{"version":3,"file":"iconpanel.bundle.js","sources":["../src/iconpanel.js"],"sourcesContent":["import {Content} from 'landing.ui.panel.content';\nimport {SidebarButton} from 'landing.ui.button.sidebarbutton';\nimport {IconListCard} from 'landing.ui.card.iconlistcard';\nimport {BaseButton} from 'landing.ui.button.basebutton';\nimport {TextField} from 'landing.ui.field.textfield';\n\nimport {Loc} from 'landing.loc';\nimport {Cache, Dom, Runtime, Type, Tag} from 'main.core';\n\nimport './css/style.css';\n\n/**\n * @memberOf BX.Landing.UI.Panel\n */\nexport class IconPanel extends Content\n{\n\tresolver: function;\n\ticonList: IconListCard;\n\tsearchField: TextField;\n\n\tstatic SUPPORTED_LANG = ['en', 'ru'];\n\tstatic DEFAULT_LANG = 'en';\n\n\tconstructor(...args)\n\t{\n\t\tsuper(...args);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.IconPanel');\n\t\tthis.setTitle(Loc.getMessage('LANDING_ICONS_SLIDER_TITLE'));\n\n\t\tDom.addClass(this.layout, 'landing-ui-panel-icon');\n\t\tDom.addClass(this.overlay, 'landing-ui-panel-icon');\n\n\t\tDom.attr(this.layout, 'hidden', true);\n\t\tDom.attr(this.overlay, 'hidden', true);\n\n\t\tthis.resolver = () => {};\n\t\tthis.iconList = null;\n\n\t\tthis.search = Runtime.debounce(this.search, 500).bind(this);\n\t\t// todo: add lupa icon after\n\t\tthis.searchField = new TextField({\n\t\t\tclassName: 'landing-ui-panel-icon-search',\n\t\t\tplaceholder: 'search...',\n\t\t\ttextOnly: true,\n\t\t\tonInput: this.search,\n\t\t});\n\n\t\tDom.append(this.layout, document.body);\n\t}\n\n\tstatic getInstance(): IconPanel\n\t{\n\t\tif (!IconPanel.instance)\n\t\t{\n\t\t\tIconPanel.instance = new IconPanel();\n\t\t}\n\n\t\treturn IconPanel.instance;\n\t}\n\n\tstatic cache = new Cache.MemoryCache();\n\n\tstatic getLibraries(): Promise<[{[key: string]: any}]>\n\t{\n\t\treturn IconPanel.cache.remember('libraries', () => {\n\t\t\treturn Runtime\n\t\t\t\t.loadExtension([\n\t\t\t\t\t'landing.icon.fontawesome6_brands',\n\t\t\t\t\t'landing.icon.fontawesome6_1',\n\t\t\t\t\t'landing.icon.fontawesome6_2',\n\t\t\t\t\t'landing.icon.fontawesome6_3',\n\t\t\t\t\t'landing.icon.etlineicons',\n\t\t\t\t\t'landing.icon.hsicons',\n\t\t\t\t\t'landing.icon.simpleline',\n\t\t\t\t\t'landing.icon.simplelinepro1',\n\t\t\t\t\t'landing.icon.simplelinepro2',\n\t\t\t\t])\n\t\t\t\t.then(Object.values);\n\t\t});\n\t}\n\n\tmakeLayout()\n\t{\n\t\tif (Type.isStringFilled(this.content.innerHTML))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.append(this.searchField.getLayout(), this.sidebar);\n\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then((libraries) => {\n\t\t\t\tlibraries.forEach(({id, name: text, categories}) => {\n\t\t\t\t\tthis.appendSidebarButton(\n\t\t\t\t\t\tnew SidebarButton({\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\n\t\t\t\t\tcategories.forEach((category) => {\n\t\t\t\t\t\tthis.appendSidebarButton(\n\t\t\t\t\t\t\tnew SidebarButton({\n\t\t\t\t\t\t\t\tid: category.id,\n\t\t\t\t\t\t\t\ttext: category.name,\n\t\t\t\t\t\t\t\tonClick: this.onCategoryChange.bind(this, category.id),\n\t\t\t\t\t\t\t\tchild: true,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// todo: init current category and icon?\n\t\t\t\tthis.onCategoryChange(libraries[0].categories[0].id);\n\t\t\t});\n\n\t\t// bottom buttons\n\t\tthis.appendFooterButton(\n\t\t\tnew BaseButton(\"save_icon\", {\n\t\t\t\ttext: Loc.getMessage(\"LANDING_ICON_PANEL_BUTTON_CHOOSE\"),\n\t\t\t\tonClick: () => {\n\t\t\t\t\tif (this.iconList.getActiveIcon())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.resolver(this.iconList.getActiveIcon());\n\t\t\t\t\t}\n\t\t\t\t\tvoid this.hide();\n\t\t\t\t},\n\t\t\t\tclassName: \"landing-ui-button-content-save\"\n\t\t\t})\n\t\t);\n\t\tthis.appendFooterButton(\n\t\t\tnew BaseButton(\"cancel_icon\", {\n\t\t\t\ttext: Loc.getMessage(\"LANDING_ICON_PANEL_BUTTON_CANCEL\"),\n\t\t\t\tonClick: this.hide.bind(this),\n\t\t\t\tclassName: \"landing-ui-button-content-cancel\"\n\t\t\t})\n\t\t);\n\t}\n\n\tfillIconsList(items: [], title: string)\n\t{\n\t\tthis.iconList = new IconListCard();\n\t\tthis.iconList.setTitle(title);\n\n\t\titems.forEach((item) => {\n\t\t\tif (Type.isObject(item))\n\t\t\t{\n\t\t\t\tconst iconOptions = {\n\t\t\t\t\toptions: item.options ? item.options : {},\n\t\t\t\t\tdefaultOption: item.defaultOption ? item.defaultOption : '',\n\t\t\t\t}\n\n\t\t\t\tthis.iconList.addItem(item.className, iconOptions);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.iconList.addItem(item);\n\t\t\t}\n\t\t});\n\n\t\tthis.appendCard(this.iconList);\n\t}\n\n\tonCategoryChange(id: string)\n\t{\n\t\tthis.content.innerHTML = '';\n\n\t\tif (this.sidebarButtons.getActive())\n\t\t{\n\t\t\tthis.sidebarButtons.getActive().deactivate();\n\t\t}\n\t\tthis.sidebarButtons.get(id).activate();\n\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then((libraries) => {\n\t\t\t\tlibraries.forEach((library) => {\n\t\t\t\t\tlibrary.categories.forEach((category) => {\n\t\t\t\t\t\tif (id === category.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillIconsList(category.items, category.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tsearch(query: string)\n\t{\n\t\t// mega optimization!\n\t\tif (query.trim().length < 2)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// dbg\n\t\tconst date = new Date();\n\t\tconsole.log('search at query \"', query, '\"was started at', date.getSeconds(), date.getMilliseconds());\n\n\t\tthis.content.innerHTML = '';\n\t\tif (this.sidebarButtons.getActive())\n\t\t{\n\t\t\tthis.sidebarButtons.getActive().deactivate();\n\t\t}\n\n\n\t\t// todo: need loader?\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then((libraries) => {\n\t\t\t\tconst result = [];\n\t\t\t\t// todo: can set language_id to collator?\n\t\t\t\tconst collator = new Intl.Collator(undefined, {\n\t\t\t\t\tusage: 'search',\n\t\t\t\t\tsensitivity: 'base',\n\t\t\t\t\tignorePunctuation: true,\n\t\t\t\t});\n\t\t\t\tconst preparedQuery = query.toLowerCase().trim().split(' ');\n\t\t\t\tif (preparedQuery.length === 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlibraries.forEach((library) => {\n\t\t\t\t\tlibrary.categories.forEach((category) => {\n\t\t\t\t\t\tcategory.items.forEach((item) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tType.isObject(item)\n\t\t\t\t\t\t\t\t&& item.keywords\n\t\t\t\t\t\t\t\t&& item.keywords !== ''\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst isFind = preparedQuery.every((queryWord) => {\n\t\t\t\t\t\t\t\t\treturn item.keywords.split(' ').find(word => {\n\t\t\t\t\t\t\t\t\t\treturn collator.compare(queryWord, word) === 0;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (isFind)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// print\n\t\t\t\tconst title = 'Search result \"' + query.trim() + '\"';\n\t\t\t\tif (result.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.fillIconsList(result, title);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.iconList = new IconListCard();\n\t\t\t\t\tthis.iconList.setTitle(title);\n\t\t\t\t\tDom.append(this.getNotFoundMessage(), this.iconList.getBody());\n\t\t\t\t\tthis.appendCard(this.iconList);\n\t\t\t\t}\n\n\t\t\t\t// dbg\n\t\t\t\tconst dateEnd = new Date();\n\t\t\t\tconsole.log('search at query\"', query, '\"was end at____', dateEnd.getSeconds(), dateEnd.getMilliseconds());\n\t\t\t});\n\t}\n\n\tgetNotFoundMessage(): HTMLElement\n\t{\n\t\t// todo: remove unnecessary phrases for diff langs\n\t\treturn IconPanel.cache.remember('notFoundMsg', () => {\n\t\t\tlet textMsgId, imageClass;\n\t\t\tconst lang = Loc.getMessage('LANGUAGE_ID');\n\t\t\tif (lang === IconPanel.DEFAULT_LANG)\n\t\t\t{\n\t\t\t\ttextMsgId = 'LANDING_ICON_PANEL_NOT_FOUND_EN';\n\t\t\t\timageClass = '--en';\n\t\t\t}\n\t\t\telse if (IconPanel.SUPPORTED_LANG.indexOf(Loc.getMessage('LANGUAGE_ID')) !== -1)\n\t\t\t{\n\t\t\t\t// todo: correct phrases\n\t\t\t\ttextMsgId = 'LANDING_ICON_PANEL_NOT_FOUND_EN';\n\t\t\t\timageClass = '--not_found';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttextMsgId = 'LANDING_ICON_PANEL_NOT_FOUND_OTHER';\n\t\t\t\timageClass = '--incorrect_lang';\n\t\t\t}\n\n\t\t\treturn Tag.render`<div class=\"landing-ui-panel-icon-not-found\">\n\t\t\t\t<div class=\"landing-ui-panel-icon-not-found-image ${imageClass}\"></div>\n\t\t\t\t<div class=\"landing-ui-panel-icon-not-found-title\">\n\t\t\t\t\t${Loc.getMessage(textMsgId)}\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t});\n\t}\n\n\tshow(): Promise<any> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.resolver = resolve;\n\t\t\tthis.makeLayout();\n\t\t\tvoid super.show();\n\t\t});\n\t}\n}"],"names":["IconPanel","args","setEventNamespace","setTitle","Loc","getMessage","Dom","addClass","layout","overlay","attr","resolver","iconList","search","Runtime","debounce","bind","searchField","TextField","className","placeholder","textOnly","onInput","append","document","body","Type","isStringFilled","content","innerHTML","getLayout","sidebar","getLibraries","then","libraries","forEach","id","text","name","categories","appendSidebarButton","SidebarButton","category","onClick","onCategoryChange","child","appendFooterButton","BaseButton","getActiveIcon","hide","items","title","IconListCard","item","isObject","iconOptions","options","defaultOption","addItem","appendCard","sidebarButtons","getActive","deactivate","get","activate","library","fillIconsList","query","trim","length","date","Date","console","log","getSeconds","getMilliseconds","result","collator","Intl","Collator","undefined","usage","sensitivity","ignorePunctuation","preparedQuery","toLowerCase","split","keywords","isFind","every","queryWord","find","word","compare","push","getNotFoundMessage","getBody","dateEnd","cache","remember","textMsgId","imageClass","lang","DEFAULT_LANG","SUPPORTED_LANG","indexOf","Tag","render","Promise","resolve","makeLayout","instance","loadExtension","Object","values","Content","Cache","MemoryCache"],"mappings":"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"}