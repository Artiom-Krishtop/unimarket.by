{"version":3,"file":"iconlistcard.bundle.js","sources":["../src/iconlistcard.js"],"sourcesContent":["import {Dom, Event, Tag, Type} from 'main.core';\nimport {BaseCard} from 'landing.ui.card.basecard';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\n\n/**\n * @memberOf BX.Landing.UI.Card\n */\nexport class IconListCard extends BaseCard\n{\n\titems: Map;\n\tactiveIcon: ?string;\n\titemsContainer: ?HTMLDivElement;\n\n\tconstructor(\n\t\toptions: {\n\t\t\tid?: string,\n\t\t\theader?: string,\n\t\t\tdescription?: string,\n\t\t\tcontext?: string,\n\t\t\ticon?: string,\n\t\t\tangle?: boolean,\n\t\t\tcloseable?: boolean,\n\t\t\thideActions?: boolean,\n\t\t\trestoreState?: boolean,\n\t\t\tmore?: string | () => {},\n\t\t},\n\t)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Card.IconListCard');\n\t\tthis.title = '';\n\t\tthis.items = new Map();\n\t\tthis.activeIcon = null;\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () =>\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card landing-ui-card-icons\">\n\t\t\t\t\t<div class=\"landing-ui-card-header-wrapper\">\n\t\t\t\t\t\t${this.getHeader()}\n\t\t\t\t\t\t${this.getPreview()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-card-body-wrapper\">\n\t\t\t\t\t\t${this.getBody()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetPreview(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('preview', () =>\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-preview --hide\">\n\t\t\t\t\t<div class=\"landing-ui-card-preview-icon\"></div>\n\t\t\t\t\t<div class=\"landing-ui-card-preview-additional\">\n\t\t\t\t\t\t<div class=\"landing-ui-card-preview-title\">${Loc.getMessage('LANDING_ICONS_CHANGE_STYLE')}</div>\n\t\t\t\t\t\t<div class=\"landing-ui-card-preview-options\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetPreviewIcon(): HTMLElement\n\t{\n\t\treturn this.getPreview().querySelector('.landing-ui-card-preview-icon');\n\t}\n\n\tgetPreviewOptions(): HTMLElement\n\t{\n\t\treturn this.getPreview().querySelector('.landing-ui-card-preview-options');\n\t}\n\n\tsetPreviewIcon(className: string)\n\t{\n\t\tconst icon = Tag.render`<span class=\"${className}\"></span>`;\n\t\tDom.clean(this.getPreviewIcon());\n\t\tDom.append(icon, this.getPreviewIcon());\n\t}\n\n\taddItem(item: string, additional: ?{})\n\t{\n\t\tif (this.getBody().childElementCount === 0)\n\t\t{\n\t\t\tthis.itemsContainer = Tag.render`<div class=\"landing-ui-card-icons-container\"></div>`;\n\t\t\tDom.append(this.itemsContainer, this.getBody());\n\t\t}\n\n\t\tconst icon = Tag.render`\n\t\t\t<div class=\"landing-ui-card landing-ui-card-icon\">\n\t\t\t\t<span class=\"${item}\"></span>\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(icon, 'click', this.onItemClick.bind(this, icon, additional));\n\t\tDom.append(icon, this.itemsContainer);\n\n\t\t// todo: need?\n\t\t// duplicate control\n\t\tconst styles = getComputedStyle(icon.querySelector('span'), ':before');\n\t\trequestAnimationFrame(() => {\n\t\t\tconst content = styles.getPropertyValue('content');\n\t\t\tif (this.items.has(content))\n\t\t\t{\n\t\t\t\ticon.hidden = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.items.set(content, true);\n\t\t\t}\n\t\t});\n\t}\n\n\tonItemClick(item: HTMLElement, additional: ?{}): void\n\t{\n\t\tconst prevActive = this.getBody().querySelector('.landing-ui-card-icon.--active');\n\t\tif (prevActive)\n\t\t{\n\t\t\tDom.removeClass(prevActive, '--active');\n\t\t}\n\t\tDom.addClass(item, '--active');\n\n\t\tthis.activeIcon = item.firstElementChild.className;\n\n\t\tif (Type.isObject(additional))\n\t\t{\n\t\t\tthis.setPreviewIcon(additional.defaultOption);\n\t\t\tthis.setPreviewOptions(additional.options, additional.defaultOption);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setPreviewIcon(this.activeIcon);\n\t\t\tthis.setPreviewOptions([this.activeIcon], this.activeIcon);\n\t\t}\n\t\tDom.removeClass(this.getPreview(), '--hide');\n\t}\n\n\tgetActiveIcon(): ?string\n\t{\n\t\treturn this.activeIcon;\n\t}\n\n\tsetPreviewOptions(options: [], defaultOption: string)\n\t{\n\t\tconst optionsLayout = this.getPreviewOptions();\n\t\tDom.clean(optionsLayout);\n\t\toptions.forEach(option => {\n\t\t\tconst isActive = (option === defaultOption) ? ' --active' : '';\n\t\t\tconst optionLayout = Tag.render`<span class=\"${option}${isActive}\"></span>`;\n\t\t\tEvent.bind(optionLayout, 'click', this.onOptionClick.bind(this, option));\n\t\t\tDom.append(optionLayout, optionsLayout);\n\t\t});\n\t}\n\n\tonOptionClick(option)\n\t{\n\t\tthis.activeIcon = option;\n\t\tthis.setPreviewIcon(option);\n\t\tthis.getPreviewOptions().querySelectorAll('span').forEach(optionItem => {\n\t\t\tDom.removeClass(optionItem, '--active');\n\t\t\tif (Dom.hasClass(optionItem, option))\n\t\t\t{\n\t\t\t\tDom.addClass(optionItem, '--active')\n\t\t\t}\n\t\t});\n\t}\n}\n"],"names":["IconListCard","options","setEventNamespace","title","items","Map","activeIcon","cache","remember","Tag","render","getHeader","getPreview","getBody","Loc","getMessage","querySelector","className","icon","Dom","clean","getPreviewIcon","append","item","additional","childElementCount","itemsContainer","Event","bind","onItemClick","styles","getComputedStyle","requestAnimationFrame","content","getPropertyValue","has","hidden","set","prevActive","removeClass","addClass","firstElementChild","Type","isObject","setPreviewIcon","defaultOption","setPreviewOptions","optionsLayout","getPreviewOptions","forEach","option","isActive","optionLayout","onOptionClick","querySelectorAll","optionItem","hasClass","BaseCard"],"mappings":"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"}