{"version":3,"file":"color_field.bundle.js","sources":["../src/internal/is-rgb-string.js","../src/internal/is-hex.js","../src/internal/is-hsl-string.js","../src/internal/hex-to-rgb.js","../src/internal/rgb-to-hsl.js","../src/internal/hex-to-hsl.js","../src/internal/rgb-to-hex.js","../src/internal/hsl-to-rgb.js","../src/internal/hsl-to-hex.js","../src/internal/rgb-string-to-hsl.js","../src/internal/hsl-string-to-hsl.js","../src/internal/css-var.js","../src/types/color_value_options.js","../src/color_value.js","../src/processor/base_processor.js","../src/control/base_control/base_control.js","../src/control/hex/hex.js","../src/control/spectrum/spectrum.js","../src/layout/recent/recent.js","../src/control/colorpicker/colorpicker.js","../src/layout/primary/primary.js","../src/internal/regexp.js","../src/internal/is-gradient-string.js","../src/gradient_value.js","../src/layout/preset/types/preset-options.js","../src/layout/preset/generator.js","../src/layout/preset/preset.js","../src/layout/preset/preset_collection.js","../src/layout/reset/reset.js","../src/layout/zeroing/zeroing.js","../src/control/color_set/color_set.js","../src/control/opacity/opacity.js","../src/layout/tabs/tabs.js","../src/processor/color.js","../src/processor/color_hover.js","../src/control/gradient/gradient.js","../src/processor/bg_color.js","../src/internal/is-bg-image-string.js","../src/bg_image_value.js","../src/control/image/image.js","../src/processor/bg.js","../src/processor/border_color.js","../src/processor/border_color_hover.js","../src/processor/bg_color_hover.js","../src/processor/bg_color_after.js","../src/processor/bg_color_before.js","../src/processor/navbar_color.js","../src/processor/navbar_color_hover.js","../src/processor/navbar_color_fix_moment.js","../src/processor/navbar_color_fix_moment_hover.js","../src/processor/navbar_bg.js","../src/processor/navbar_bg_hover.js","../src/processor/border_color-top.js","../src/processor/fill_color.js","../src/processor/fill_color_second.js","../src/processor/button_color.js","../src/processor/navbar_collapse_bg.js","../src/color_field.js"],"sourcesContent":["export const matcher = /^rgba? ?\\((\\d{1,3})[, ]+(\\d{1,3})[, ]+(\\d{1,3})([, ]+([\\d\\.]{1,5}))?\\)$/i;\n\nexport default function isRgbString(rgbString: string): boolean\n{\n\treturn !!rgbString.match(matcher);\n}\n","export const matcherHex = /^#([\\da-f]{3}){1,2}$/i;\n\nexport default function isHex(hex: string)\n{\n\treturn !!hex.trim().match(matcherHex);\n}","export const matcherHsl = /^hsla?\\((\\d{1,3}), ?(\\d{1,3})%, ?(\\d{1,3})%(, ?([\\d .]+))?\\)/i;\n\nexport default function isHslString(hsla: string)\n{\n\treturn !!hsla.trim().match(matcherHsl);\n}","export default function hexToRgb(hex: string)\n{\n\tif (hex.length === 4)\n\t{\n\t\tconst r = parseInt(`0x${hex[1]}${hex[1]}`, 16);\n\t\tconst g = parseInt(`0x${hex[2]}${hex[2]}`, 16);\n\t\tconst b = parseInt(`0x${hex[3]}${hex[3]}`, 16);\n\n\t\treturn {r, g, b};\n\t}\n\n\tif (hex.length === 7)\n\t{\n\t\tconst r = parseInt(`0x${hex[1]}${hex[2]}`, 16);\n\t\tconst g = parseInt(`0x${hex[3]}${hex[4]}`, 16);\n\t\tconst b = parseInt(`0x${hex[5]}${hex[6]}`, 16);\n\n\t\treturn {r, g, b};\n\t}\n\n\treturn {r: 255, g: 255, b: 255};\n}","export default function rgbToHsla(\n\trgb: {r: number, g: number, b: number, a?: number}\n): {h: number, s: number, l: number, a: number}\n{\n\tconst r = rgb.r / 255;\n\tconst g = rgb.g / 255;\n\tconst b = rgb.b / 255;\n\n\tconst max = Math.max(r, g, b);\n\tconst min = Math.min(r, g, b);\n\tlet h, s, l = (max + min) / 2;\n\t// let l = h;\n\t// let s;\n\n\tif (max === min)\n\t{\n\t\th = s = 0;\n\t}\n\telse\n\t{\n\t\tconst d = max - min;\n\t\ts = l > 0.5\n\t\t\t? d / (2 - max - min)\n\t\t\t: d / (max + min);\n\n\t\tswitch (max)\n\t\t{\n\t\t\tcase r:\n\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\tbreak;\n\t\t\tcase g:\n\t\t\t\th = (b - r) / d + 2;\n\t\t\t\tbreak;\n\t\t\tcase b:\n\t\t\t\th = (r - g) / d + 4;\n\t\t\t\tbreak;\n\t\t}\n\n\t\th *= 0.6;\n\t}\n\n\treturn {\n\t\th: Math.round(h * 100),\n\t\ts: Math.round(s * 100),\n\t\tl: Math.round(l * 100),\n\t\ta: ('a' in rgb) ? rgb.a : 1,\n\t};\n}\n\n// \tconst v = Math.max(r, g, b);\n// \tconst diff = v - Math.min(r, g, b);\n// \tconst diffc = (c) => {\n// \t\treturn (v - c) / 6 / diff + 1 / 2;\n// \t};\n//\n// \tif (diff === 0)\n// \t{\n// \t\th = 0;\n// \t\ts = 0;\n// \t}\n// \telse\n// \t{\n// \t\ts = diff / v;\n// \t\trdif = diffc(r);\n// \t\tgdif = diffc(g);\n// \t\tbdif = diffc(b);\n//\n// \t\tif (r === v)\n// \t\t{\n// \t\t\th = bdif - gdif;\n// \t\t}\n// \t\telse if (g === v)\n// \t\t{\n// \t\t\th = (1 / 3) + rdif - bdif;\n// \t\t}\n// \t\telse if (b === v)\n// \t\t{\n// \t\t\th = (2 / 3) + gdif - rdif;\n// \t\t}\n//\n// \t\tif (h < 0)\n// \t\t{\n// \t\t\th += 1;\n// \t\t}\n// \t\telse if (h > 1)\n// \t\t{\n// \t\t\th -= 1;\n// \t\t}\n// \t}\n//\n// \treturn {\n// \t\th: h * 360,\n// \t\ts: s * 100,\n// \t\tl: v * 100,\n// \t\ta: rgb.a || 1,\n// \t};\n// }","import hexToRgb from './hex-to-rgb';\nimport rgbToHsla from './rgb-to-hsl';\n\nexport default function hexToHsl(hex: string): {h: number, s: number, l: number, a: number}\n{\n\tconst rgb = hexToRgb(hex.trim());\n\n\treturn rgbToHsla(rgb);\n}","export default function rgbToHex(rgb: {r: number, g: number, b: number}): string\n{\n\tlet r = rgb.r.toString(16);\n\tlet g = rgb.g.toString(16);\n\tlet b = rgb.b.toString(16);\n\n\tif (r.length === 1)\n\t{\n\t\tr = \"0\" + r;\n\t}\n\tif (g.length === 1)\n\t{\n\t\tg = \"0\" + g;\n\t}\n\tif (b.length === 1)\n\t{\n\t\tb = \"0\" + b;\n\t}\n\n\treturn \"#\" + r + g + b;\n}","export default function hslToRgb(hsl: {h: number, s: number, l: number}): {r: number, g: number, b: number}\n{\n\t// todo: a little not equal with reverce conversion :-/\n\t// todo: f.e. hsl(73.53.50) it 166,195,60 and #a5c33c,\n\t// todo: but in reverse #a5c33c => 165,195,60\n\t// todo: because we save ColorValue in hsl can be some differences\n\tconst h = hsl.h;\n\tconst s = hsl.s / 100;\n\tconst l = hsl.l / 100;\n\n\tlet c = (1 - Math.abs(2 * l - 1)) * s;\n\tlet x = c * (1 - Math.abs((h / 60) % 2 - 1));\n\tlet m = l - c / 2;\n\tlet r = 0;\n\tlet g = 0;\n\tlet b = 0;\n\n\tif (0 <= h && h < 60)\n\t{\n\t\tr = c;\n\t\tg = x;\n\t\tb = 0;\n\t}\n\telse if (60 <= h && h < 120)\n\t{\n\t\tr = x;\n\t\tg = c;\n\t\tb = 0;\n\t}\n\telse if (120 <= h && h < 180)\n\t{\n\t\tr = 0;\n\t\tg = c;\n\t\tb = x;\n\t}\n\telse if (180 <= h && h < 240)\n\t{\n\t\tr = 0;\n\t\tg = x;\n\t\tb = c;\n\t}\n\telse if (240 <= h && h < 300)\n\t{\n\t\tr = x;\n\t\tg = 0;\n\t\tb = c;\n\t}\n\telse if (300 <= h && h < 360)\n\t{\n\t\tr = c;\n\t\tg = 0;\n\t\tb = x;\n\t}\n\tr = Math.round((r + m) * 255);\n\tg = Math.round((g + m) * 255);\n\tb = Math.round((b + m) * 255);\n\n\treturn {r: r, g: g, b: b};\n}","import rgbToHex from './rgb-to-hex';\nimport hslToRgb from './hsl-to-rgb';\n\nexport default function hslToHex(hsl: {h: number, s: number, l: number}): string\n{\n\tconst rgb = hslToRgb(hsl);\n\n\treturn rgbToHex(rgb);\n}","import {Text} from 'main.core';\nimport rgbToHsla from '../internal/rgb-to-hsl';\nimport {matcher} from './is-rgb-string';\n\nexport default function rgbStringToHsla(rgbString: string): { h: number, s: number, l: number, a: number}\n{\n\tlet matches = rgbString.trim().match(matcher);\n\tif (matches.length > 0)\n\t{\n\t\treturn rgbToHsla({\n\t\t\tr: Text.toNumber(matches[1]),\n\t\t\tg: Text.toNumber(matches[2]),\n\t\t\tb: Text.toNumber(matches[3]),\n\t\t\ta: matches[5] ? Text.toNumber(matches[5]) : 1,\n\t\t});\n\t}\n}","import {Text} from 'main.core';\nimport {matcherHsl} from './is-hsl-string';\n\nexport default function hslStringToHsl(hslString: string): { h: number, s: number, l: number, a: number}\n{\n\tlet matches = hslString.trim().match(matcherHsl);\n\tif (matches && matches.length > 0)\n\t{\n\t\treturn {\n\t\t\th: Text.toNumber(matches[1]),\n\t\t\ts: Text.toNumber(matches[2]),\n\t\t\tl: Text.toNumber(matches[3]),\n\t\t\ta: matches[5] ? Text.toNumber(matches[5]) : 1,\n\t\t};\n\t}\n}","const matcher = /^(var\\()?((--[\\w\\d-]*?)(-opacity_([\\d_]+)?)?)\\)?$/i;\n\nexport function isCssVar(css: string): boolean\n{\n\treturn !!css.trim().match(matcher);\n}\n\ntype cssVar = {\n\tfull: string,\n\tname: string,\n\topacity: number,\n};\n\nexport function parseCssVar(css: string): ?cssVar\n{\n\tconst matches = css.trim().match(matcher);\n\tif (!!matches)\n\t{\n\t\tconst cssVar = {\n\t\t\tfull: matches[2],\n\t\t\tname: matches[3],\n\t\t};\n\n\t\tif(matches[5])\n\t\t{\n\t\t\tcssVar.opacity = +parseFloat(matches[5].replace('_', '.')).toFixed(1);\n\t\t}\n\n\t\treturn cssVar;\n\t}\n\n\treturn null;\n}\n","import ColorValue from \"../color_value\";\n\nexport type ColorValueOptions = {\n\th?: number,\n\ts?: number,\n\tl?: number,\n\ta?: number,\n};\nexport const defaultColorValueOptions: ColorValueOptions = {\n\th: 205,\n\ts: 1,\n\tl: 50,\n\ta: 1,\n};\n\nexport type GradientValueOptions = {\n\tfrom: ColorValue,\n\tto: ColorValue,\n\tangle: number,\n\ttype: 'linear' | 'radial'\n};\n\nexport type BgImageValueOptions = {\n\turl: ?string,\n\turl2x: ?string,\n\tfileId: ?number,\n\tfileId2x: ?number,\n\tsize: 'cover' | 'auto',\n\tattachment: 'scroll' | 'fixed',\n\toverlay: ?ColorValue,\n};\nexport const defaultBgImageSize = 'cover';\nexport const defaultBgImageAttachment = 'scroll';\nexport const defaultOverlay = null;\nexport const defaultBgImageValueOptions: BgImageValueOptions = {\n\turl: null,\n\tsize: defaultBgImageSize,\n\tattachment: defaultBgImageAttachment,\n\toverlay: defaultOverlay,\n};\n","import {Dom, Type} from 'main.core';\n\nimport isRgbString from './internal/is-rgb-string';\nimport isHex from './internal/is-hex';\nimport isHslString from './internal/is-hsl-string';\nimport hexToHsl from './internal/hex-to-hsl';\nimport hslToHex from './internal/hsl-to-hex';\nimport rgbStringToHsla from './internal/rgb-string-to-hsl';\nimport hslStringToHsl from './internal/hsl-string-to-hsl';\nimport {isCssVar, parseCssVar} from \"./internal/css-var\";\nimport {ColorValueOptions, defaultColorValueOptions} from \"./types/color_value_options\";\nimport {IColorValue} from './types/i_color_value';\n\nexport default class ColorValue implements IColorValue\n{\n\tvalue: ColorValueOptions;\n\t/**\n\t * For preserve differences between hsl->rgb and rgb->hsl conversions we can save hex\n\t * @type {?string}\n\t */\n\thex: ?string;\n\t/**\n\t * if set css variable value - save them in '--var-name' format\n\t * @type {?string}\n\t */\n\tcssVar: ?string;\n\n\tconstructor(value: ColorValueOptions | ColorValue | string)\n\t{\n\t\tthis.value = defaultColorValueOptions;\n\t\tthis.hex = null;\n\t\tthis.cssVar = null;\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\tif (this.hex)\n\t\t{\n\t\t\treturn this.getHex() + '_' + this.getOpacity();\n\t\t}\n\t\tconst {h, s, l} = this.getHsl();\n\t\treturn `${h}-${s}-${l}-${this.getOpacity()}`;\n\t}\n\n\tsetValue(value: ColorValueOptions | ColorValue | string): ColorValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof ColorValue)\n\t\t\t{\n\t\t\t\tthis.value = value.getHsla();\n\t\t\t\tthis.cssVar = value.getCssVar();\n\t\t\t\tthis.hex = value.getHexOriginal();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.value = {...this.value, ...value};\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isString(value))\n\t\t{\n\t\t\tif (isHslString(value))\n\t\t\t{\n\t\t\t\tthis.value = hslStringToHsl(value);\n\t\t\t}\n\t\t\telse if (isHex(value))\n\t\t\t{\n\t\t\t\tthis.value = {...hexToHsl(value), a: defaultColorValueOptions.a};\n\t\t\t\tthis.hex = value;\n\t\t\t}\n\t\t\telse if (isRgbString(value))\n\t\t\t{\n\t\t\t\tthis.value = rgbStringToHsla(value);\n\t\t\t}\n\t\t\telse if (isCssVar(value))\n\t\t\t{\n\t\t\t\t// todo: what about opacity in primary?\n\t\t\t\tconst cssVar = parseCssVar(value);\n\t\t\t\tif (cssVar !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.cssVar = cssVar.name;\n\t\t\t\t\tthis.setValue(Dom.style(document.documentElement, this.cssVar));\n\t\t\t\t\tif (cssVar.opacity)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setOpacity(cssVar.opacity);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.value.h = Math.round(this.value.h);\n\t\tthis.value.s = Math.round(this.value.s);\n\t\tthis.value.l = Math.round(this.value.l);\n\t\tthis.value.a = +this.value.a.toFixed(1);\n\n\t\treturn this;\n\t}\n\n\tsetOpacity(opacity: number): ColorValue\n\t{\n\t\tthis.setValue({a: opacity});\n\n\t\treturn this;\n\t}\n\n\tlighten(percent: number): ColorValue\n\t{\n\t\tthis.value.l = Math.min(this.value.l + percent, 100);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tdarken(percent: number): ColorValue\n\t{\n\t\tthis.value.l = Math.max(this.value.l - percent, 0);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tsaturate(percent: number): ColorValue\n\t{\n\t\tthis.value.s = Math.min(this.value.s + percent, 100);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tdesaturate(percent: number): ColorValue\n\t{\n\t\tthis.value.s = Math.max(this.value.s - percent, 0);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tadjustHue(degree: number): ColorValue\n\t{\n\t\tthis.value.h = (this.value.h + degree) % 360;\n\n\t\treturn this;\n\t}\n\n\tgetHsl(): {h: number, s: number, l: number}\n\t{\n\t\treturn {\n\t\t\th: this.value.h,\n\t\t\ts: this.value.s,\n\t\t\tl: this.value.l,\n\t\t};\n\t}\n\n\tgetHsla(): ColorValueOptions\n\t{\n\t\treturn {\n\t\t\th: this.value.h,\n\t\t\ts: this.value.s,\n\t\t\tl: this.value.l,\n\t\t\ta: this.value.a,\n\t\t};\n\t}\n\n\t/**\n\t * Return original hex-string or convert value to hex (w.o. alpha)\n\t * @returns {string}\n\t */\n\tgetHex(): string\n\t{\n\t\treturn this.hex || hslToHex(this.value);\n\t}\n\n\t/**\n\t * Return hex only if value created from hex-string\n\t */\n\tgetHexOriginal(): string\n\t{\n\t\treturn this.hex;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\treturn this.value.a ?? defaultColorValueOptions.a;\n\t}\n\n\tgetCssVar(): ?string\n\t{\n\t\treturn this.cssVar;\n\t}\n\n\t/**\n\t * Get style string for set inline css var.\n\t * Set hsla value or primary css var with opacity in format --var-name-opacity_12_3\n\t * @returns {string}\n\t */\n\tgetStyleString(): string\n\t{\n\t\tif (this.cssVar === null)\n\t\t{\n\t\t\tif (this.hex && this.getOpacity() === defaultColorValueOptions.a)\n\t\t\t{\n\t\t\t\treturn this.hex\n\t\t\t}\n\n\t\t\tconst {h, s, l, a} = this.value;\n\n\t\t\treturn `hsla(${h}, ${s}%, ${l}%, ${a})`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet fullCssVar = this.cssVar;\n\t\t\tif (this.value.a !== defaultColorValueOptions.a)\n\t\t\t{\n\t\t\t\tfullCssVar = fullCssVar + '-opacity-' + String(this.value.a).replace('.', '_');\n\t\t\t}\n\t\t\treturn `var(${fullCssVar})`;\n\t\t}\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\tconst {h, s, l} = this.value;\n\n\t\treturn `linear-gradient(to right, hsla(${h}, ${s}%, ${l}%, 1) 0%, hsla(${h}, ${s}%, ${l}%, 0) 100%)`;\n\t}\n\n\tstatic compare(color1: ColorValue, color2: ColorValue): boolean\n\t{\n\t\treturn color1.getHsla().h === color2.getHsla().h\n\t\t\t&& color1.getHsla().s === color2.getHsla().s\n\t\t\t&& color1.getHsla().l === color2.getHsla().l\n\t\t\t&& color1.getHsla().a === color2.getHsla().a\n\t\t\t&& color1.cssVar === color2.cssVar;\n\t}\n\n\tstatic getMedian(color1: ColorValue, color2: ColorValue): ColorValue\n\t{\n\t\treturn new ColorValue({\n\t\t\th: (color1.getHsla().h + color2.getHsla().h) / 2,\n\t\t\ts: (color1.getHsla().s + color2.getHsla().s) / 2,\n\t\t\tl: (color1.getHsla().l + color2.getHsla().l) / 2,\n\t\t\ta: (color1.getHsla().a + color2.getHsla().a) / 2,\n\t\t});\n\t}\n\n\t/**\n\t * Special formula for contrast. Not only color invert!\n\t * @returns {string}\n\t */\n\tgetContrast(): ColorValue\n\t{\n\t\tlet k = 60;\n\t\t// math h range to 0-2pi radian and add modifier by sinus\n\t\tlet rad = this.getHsl().h * Math.PI / 180;\n\t\tk += (Math.sin(rad) * 10) + 5;\t// 10 & 5 is approximate coefficients\n\t\t// lighten by started light\n\t\tlet deltaL = k - (45 * this.getHsl().l / 100);\n\n\t\treturn new ColorValue(this.value).setValue({l: (this.getHsl().l + deltaL) % 100});\n\t}\n\n\t/**\n\t * Special formula for lighten, good for dark and light colors\n\t */\n\tgetLighten(): ColorValue\n\t{\n\t\tlet {h, s, l} = this.getHsl();\n\n\t\tif (s > 0)\n\t\t{\n\t\t\ts += (l - 50) / 100 * 60;\n\t\t\ts = Math.min(100, Math.max(0, l));\n\t\t}\n\n\t\tl += 10 + 20 * l / 100;\n\t\tl = Math.min(100, l);\n\n\t\treturn new ColorValue({h, s, l});\n\t}\n}\n","import {Tag, Cache, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport ColorValue from '../color_value';\nimport {IColorValue} from '../types/i_color_value';\n\nexport default class BaseProcessor extends EventEmitter\n{\n\tvariableName: string | [string];\n\tclassName: string;\n\tproperty: string | [string];\n\toptions: [];\n\tpseudoClass: ?string;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.property = 'color';\n\t\tthis.options = options;\n\t\tthis.pseudoClass = null;\n\t}\n\n\tgetProperty(): [string]\n\t{\n\t\treturn Type.isArray(this.property)\n\t\t\t? this.property\n\t\t\t: [this.property];\n\t}\n\n\tgetVariableName(): [string]\n\t{\n\t\treturn Type.isArray(this.variableName)\n\t\t\t? this.variableName\n\t\t\t: [this.variableName];\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\treturn value === null;\n\t}\n\n\tgetNullValue(): IColorValue\n\t{\n\t\treturn new ColorValue;\n\t}\n\n\tgetPseudoClass(): ?string\n\t{\n\t\treturn this.pseudoClass;\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn this.buildLayout();\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`<div>Base processor</div>`;\n\t}\n\n\tgetClassName(): [string]\n\t{\n\t\treturn [this.className];\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t}\n\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\treturn {[this.getVariableName()]: null};\n\t\t}\n\n\t\treturn {[this.getVariableName()]: this.getValue().getStyleString()};\n\t}\n\n\t/**\n\t * Set value by new format\n\t * @param value {string: string}\n\t */\n\tsetProcessorValue(value: {string: string}): void\n\t{\n\t\t// Just get last css variable\n\t\tconst processorProperty = this.getVariableName()[this.getVariableName().length - 1];\n\t\tthis.cache.delete('value');\n\t\tthis.setValue(value[processorProperty]);\n\t}\n\n\t/**\n\t * Set old-type value by computedStyle\n\t * @param value {string: string} | null\n\t */\n\tsetDefaultValue(value: {string: string} | null): void\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tconst inlineProperty = this.getProperty()[this.getProperty().length - 1];\n\t\t\tif (inlineProperty in value)\n\t\t\t{\n\t\t\t\tthis.setValue(value[inlineProperty]);\n\t\t\t\tthis.cache.delete('value');\n\t\t\t\tthis.unsetActive();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.setValue(null);\n\t\tthis.cache.set('value', null);\n\t}\n\n\tsetValue(value: string | {string: string} | null): void\n\t{\n\t}\n\n\tonReset()\n\t{\n\t\tthis.emit('onReset');\n\t}\n\n\tunsetActive()\n\t{\n\t}\n\n\tonChange()\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange');\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Cache, Dom, Tag} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\nimport {IColorValue} from '../../types/i_color_value';\n\nimport './css/base_control.css';\n\nexport default class BaseControl extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options: ?{})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn this.buildLayout();\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-base-control\">\n\t\t\t\tBase control\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn new ColorValue();\n\t\t});\n\t}\n\n\tisNeedSetValue(value): boolean\n\t{\n\t\treturn value !== this.getValue();\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.cache.set('value', value);\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n}\n","import {Dom, Event, Runtime, Tag} from 'main.core';\nimport isHex from '../../internal/is-hex';\nimport ColorValue from \"../../color_value\";\n\nimport './css/hex.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {BaseEvent} from 'main.core.events';\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Hex extends BaseControl\n{\n\tstatic +DEFAULT_TEXT: string = '#HEX';\n\tstatic +DEFAULT_COLOR: string = '#000000';\n\tstatic +DEFAULT_BG: string = '#eeeeee';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Hex');\n\t\tthis.previewMode = false;\n\n\t\tthis.onInput = Runtime.debounce(this.onInput.bind(this), 300);\n\t\tthis.onButtonClick = this.onButtonClick.bind(this);\n\t}\n\n\tsetPreviewMode(preview: boolean)\n\t{\n\t\tthis.previewMode = !!preview;\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\tif (!this.previewMode)\n\t\t{\n\t\t\t// todo: add Enter click handler\n\t\t\tEvent.bind(this.getInput(), 'input', this.onInput);\n\t\t\tEvent.bind(this.getButton(), 'click', this.onButtonClick);\n\t\t}\n\n\t\tthis.adjustColors(Hex.DEFAULT_COLOR, Hex.DEFAULT_BG);\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-hex\">\n\t\t\t\t${this.getInput()}\n\t\t\t\t${this.getButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetInput(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('input', () => {\n\t\t\treturn this.previewMode\n\t\t\t\t? Tag.render`<div class=\"landing-ui-field-color-hex-preview\">${Hex.DEFAULT_TEXT}</div>`\n\t\t\t\t: Tag.render`<input type=\"text\" name=\"hexInput\" value=\"${Hex.DEFAULT_TEXT}\" class=\"landing-ui-field-color-hex-input\">`;\n\t\t});\n\t}\n\n\tgetButton(): SVGElement\n\t{\n\t\treturn this.cache.remember('editButton', () => {\n\t\t\treturn this.previewMode\n\t\t\t\t? Tag.render`\n\t\t\t\t\t<svg class=\"landing-ui-field-color-hex-preview-btn\" width=\"9\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M7.108 0l1.588 1.604L2.486 7.8.896 6.194 7.108 0zM.006 8.49a.166.166 0 00.041.158.161.161 0 00.16.042l1.774-.478L.484 6.715.006 8.49z\"\n\t\t\t\t\t\t\tfill=\"#525C69\"\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"/>\n\t\t\t\t\t</svg>`\n\t\t\t\t: Tag.render`\n\t\t\t\t\t<svg class=\"landing-ui-field-color-hex-preview-btn\" width=\"12\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M4.27 8.551L.763 5.304 2.2 3.902l2.07 1.846L9.836.533l1.439 1.402z\"\n\t\t\t\t\t\t\tfill=\"#525C69\"\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"/>\n\t\t\t\t\t</svg>`;\n\t\t});\n\t}\n\n\tonInput(): void\n\t{\n\t\tlet value = this.getInput().value.replace(/[^\\da-f]/gi, '');\n\t\tvalue = value.substring(0, 6);\n\t\tthis.getInput().value = '#' + value.toLowerCase();\n\n\t\tthis.onChange();\n\t}\n\n\tonButtonClick(): void\n\t{\n\t\tthis.onChange();\n\t\tthis.emit('onButtonClick', {color: this.getValue()});\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tconst color = (this.getInput().value.length === 7 && isHex(this.getInput().value))\n\t\t\t? new ColorValue(this.getInput().value)\n\t\t\t: null;\n\t\tthis.setValue(color);\n\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {color: color});\n\t}\n\n\tadjustColors(textColor: string, bgColor: string)\n\t{\n\t\tDom.style(this.getInput(), 'background-color', bgColor);\n\t\tDom.style(this.getInput(), 'color', textColor);\n\t\tDom.style(this.getButton().querySelector('path'), 'fill', textColor);\n\t}\n\n\tfocus(): void\n\t{\n\t\tif (!this.previewMode)\n\t\t{\n\t\t\tif (this.getValue() === null)\n\t\t\t{\n\t\t\t\tthis.getInput().value = '#';\n\t\t\t}\n\t\t\tthis.getInput().focus();\n\t\t}\n\t}\n\n\tunFocus(): void\n\t{\n\t\tif (!this.previewMode)\n\t\t{\n\t\t\tthis.getInput().blur();\n\t\t}\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn (this.getInput().value === Hex.DEFAULT_TEXT)\n\t\t\t\t? null\n\t\t\t\t: new ColorValue(this.getInput().value);\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\t// todo: set checking in always controls?\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tif (value !== null)\n\t\t\t{\n\t\t\t\tthis.adjustColors(value.getContrast().getHex(), value.getHex());\n\t\t\t\tthis.setActive();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.adjustColors(Hex.DEFAULT_COLOR, Hex.DEFAULT_BG);\n\t\t\t\tthis.unsetActive();\n\t\t\t}\n\n\t\t\tif (this.previewMode)\n\t\t\t{\n\t\t\t\tthis.getInput().innerText = (value !== null) ? value.getHex() : Hex.DEFAULT_TEXT;\n\t\t\t}\n\t\t\telse if (PageObject.getRootWindow().document.activeElement !== this.getInput())\n\t\t\t{\n\t\t\t\tthis.getInput().value = (value !== null) ? value.getHex() : Hex.DEFAULT_TEXT;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n}\n","import {BaseEvent} from 'main.core.events';\nimport {Dom, Event, Tag, Text} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\nimport './css/spectrum.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Spectrum extends BaseControl\n{\n\tstatic DEFAULT_SATURATION: number = 100;\n\tstatic HUE_RANGE: number = 375;\n\tstatic HUE_RANGE_GRAY_THRESHOLD: number = 360;\n\tstatic HUE_RANGE_GRAY_MIDDLE: number = 367;\n\tstatic HIDE_CLASS: string = 'hidden';\n\n\t// todo: debug, del method, change calls, change css\n\tstatic getDefaultSaturation()\n\t{\n\t\tconst global = window.top.document.location.saturation;\n\t\tconst urlParam = (new URL(window.top.document.location)).searchParams.get('saturation');\n\t\tconst saturation = global || urlParam || Spectrum.DEFAULT_SATURATION;\n\n\t\twindow.top.document.body.style.setProperty('--saturation', saturation + '%');\n\n\t\treturn parseInt(saturation);\n\t}\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Spectrum');\n\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\t\tthis.onScroll = this.onScroll.bind(this);\n\n\t\tthis.document = PageObject.getRootWindow().document;\n\t\tthis.scrollContext = options.contentRoot;\n\n\t\tEvent.bind(this.getLayout(), 'mousedown', this.onPickerDragStart);\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-spectrum\">\n\t\t\t\t${this.getPicker()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-spectrum-picker\"></div>`;\n\t\t});\n\t}\n\n\tgetPickerPos(): {x: number, y: number}\n\t{\n\t\treturn {\n\t\t\tx: Text.toNumber(Dom.style(this.getPicker(), 'left')),\n\t\t\ty: Text.toNumber(Dom.style(this.getPicker(), 'top')),\n\t\t};\n\t}\n\n\tonPickerDragStart(event: MouseEvent)\n\t{\n\t\tif (event.ctrlKey || event.metaKey || event.button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.scrollContext, 'scroll', this.onScroll);\n\t\tEvent.bind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.bind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.addClass(this.document.body, 'landing-ui-field-color-draggable');\n\t\tthis.onScroll();\n\t\tthis.showPicker();\n\t\tthis.onPickerDragMove(event);\n\t}\n\n\tonPickerDragMove(event: MouseEvent)\n\t{\n\t\tif (event.target === this.getPicker())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setPickerPos(event.pageX, event.pageY);\n\t\tthis.onChange();\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tEvent.unbind(this.scrollContext, 'scroll', this.onScroll);\n\t\tEvent.unbind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.unbind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.removeClass(this.document.body, 'landing-ui-field-color-draggable');\n\t}\n\n\tonScroll()\n\t{\n\t\tthis.cache.delete('layoutSize');\n\t}\n\n\tgetLayoutRect(): {}\n\t{\n\t\treturn this.cache.remember('layoutSize', () => {\n\t\t\tconst layoutRect = this.getLayout().getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\twidth: layoutRect.width,\n\t\t\t\theight: layoutRect.height,\n\t\t\t\ttop: layoutRect.top,\n\t\t\t\tleft: layoutRect.left,\n\t\t\t};\n\t\t});\n\t}\n\n\t/**\n\t * Set picker by absolut page coords\n\t * @param x\n\t * @param y\n\t */\n\tsetPickerPos(x: number, y: number)\n\t{\n\t\tconst {width, height, top, left} = this.getLayoutRect();\n\n\t\tlet leftToSet = Math.min(Math.max((x - left), 0), width);\n\t\tleftToSet = (leftToSet > width / Spectrum.HUE_RANGE * Spectrum.HUE_RANGE_GRAY_THRESHOLD)\n\t\t\t? width / Spectrum.HUE_RANGE * Spectrum.HUE_RANGE_GRAY_MIDDLE\n\t\t\t: leftToSet\n\t\t;\n\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftToSet}px`,\n\t\t\ttop: `${Math.min(Math.max((y - top), 0), height)}px`,\n\t\t});\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (Dom.hasClass(this.getPicker(), Spectrum.HIDE_CLASS))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst layoutWidth = this.getLayout().getBoundingClientRect().width;\n\t\t\tconst h = (this.getPickerPos().x / layoutWidth) * Spectrum.HUE_RANGE;\n\t\t\tconst layoutHeight = this.getLayout().getBoundingClientRect().height;\n\t\t\tconst l = (1 - this.getPickerPos().y / layoutHeight) * 100;\n\n\t\t\tif (isNaN(h) || isNaN(l))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn new ColorValue({\n\t\t\t\th: Math.min(h, Spectrum.HUE_RANGE_GRAY_THRESHOLD),\n\t\t\t\ts: (h >= Spectrum.HUE_RANGE_GRAY_THRESHOLD) ? 0 : Spectrum.getDefaultSaturation(),\n\t\t\t\tl: l,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif ((value !== null) && Spectrum.isSpectrumValue(value))\n\t\t{\n\t\t\t// in first set value we can't match bounding client rect (layout not render). Then, use percents\n\t\t\tconst {h, s, l} = value.getHsl();\n\n\t\t\tconst left = (s === 0)\n\t\t\t\t? Spectrum.HUE_RANGE_GRAY_MIDDLE / Spectrum.HUE_RANGE * 100\n\t\t\t\t: h / Spectrum.HUE_RANGE * 100;\n\t\t\tDom.style(this.getPicker(), 'left', `${left}%`);\n\n\t\t\tconst top = 100 - l;\n\t\t\tDom.style(this.getPicker(), 'top', `${top}%`);\n\n\t\t\tthis.showPicker();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hidePicker();\n\t\t}\n\t}\n\n\thidePicker()\n\t{\n\t\tDom.addClass(this.getPicker(), Spectrum.HIDE_CLASS);\n\t}\n\n\tshowPicker()\n\t{\n\t\tDom.removeClass(this.getPicker(), Spectrum.HIDE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn (this.getValue() !== null) && Spectrum.isSpectrumValue(this.getValue());\n\t}\n\n\tstatic isSpectrumValue(value: ColorValue): boolean\n\t{\n\t\treturn (value !== null)\n\t\t\t&& (\n\t\t\t\tvalue.getHsl().s === Spectrum.getDefaultSaturation()\n\t\t\t\t|| value.getHsl().s === 0\n\t\t\t);\n\t}\n}\n","import {Cache, Event, Tag, Dom, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Backend} from 'landing.backend';\n\nimport isHex from '../../internal/is-hex';\nimport './css/recent.css';\n\nexport default class Recent extends EventEmitter\n{\n\tstatic +USER_OPTION_NAME = 'color_field_recent_colors';\n\tstatic +MAX_ITEMS = 6;\n\n\tstatic items: [] = [];\n\tstatic itemsLoaded: boolean = false;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Recent');\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\tthis.initItems();\n\n\t\treturn this.getLayoutContainer();\n\t}\n\n\tgetLayoutContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-recent\"></div>`;\n\t\t});\n\t}\n\n\tinitItems()\n\t{\n\t\tif (Recent.itemsLoaded)\n\t\t{\n\t\t\tthis.buildItemsLayout();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBackend.getInstance()\n\t\t\t\t.action(\"Utils::getUserOption\", {name: Recent.USER_OPTION_NAME})\n\t\t\t\t.then(result => {\n\t\t\t\t\tif (result && Type.isString(result.items))\n\t\t\t\t\t{\n\t\t\t\t\t\tRecent.items = [];\n\t\t\t\t\t\tresult.items.split(',').forEach(item => {\n\t\t\t\t\t\t\tif (isHex((item)) && Recent.items.length < Recent.MAX_ITEMS)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tRecent.items.push(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tRecent.itemsLoaded = true;\n\n\t\t\t\t\t\tthis.buildItemsLayout();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t// todo: what if ajax error?\n\t\t}\n\t}\n\n\tbuildItemsLayout(): Recent\n\t{\n\t\tDom.clean(this.getLayoutContainer());\n\t\tRecent.items.forEach(item => {\n\t\t\tif (isHex(item))\n\t\t\t{\n\t\t\t\tlet itemLayout = Tag.render`<div \n\t\t\t\t\tclass=\"landing-ui-field-color-recent-item\" \n\t\t\t\t\tstyle=\"background:${item}\"\n\t\t\t\t\tdata-value=\"${item}\"\n\t\t\t\t></div>`;\n\t\t\t\tEvent.bind(itemLayout, 'click', () => this.onItemClick(event));\n\t\t\t\tDom.append(itemLayout, this.getLayoutContainer());\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tonItemClick(event: MouseEvent)\n\t{\n\t\tthis.emit('onChange', {hex: event.currentTarget.dataset.value});\n\t}\n\n\taddItem(hex: string): Recent\n\t{\n\t\tif (isHex(hex))\n\t\t{\n\t\t\tlet pos = Recent.items.indexOf(hex);\n\t\t\tif (pos !== -1)\n\t\t\t{\n\t\t\t\tRecent.items.splice(pos, 1);\n\t\t\t}\n\t\t\tRecent.items.unshift(hex);\n\t\t\tif (Recent.items.length > Recent.MAX_ITEMS)\n\t\t\t{\n\t\t\t\tRecent.items.splice(Recent.MAX_ITEMS);\n\t\t\t}\n\n\t\t\tthis.buildItemsLayout();\n\t\t\tthis.saveItems();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsaveItems(): Recent\n\t{\n\t\tif (Recent.items.length > 0)\n\t\t{\n\t\t\tBX.userOptions.save('landing', Recent.USER_OPTION_NAME, 'items', Recent.items);\n\t\t}\n\n\t\treturn this;\n\t}\n}","import {Event, Tag, Text, Loc} from 'main.core';\nimport {Popup, PopupManager} from 'main.popup';\nimport {BaseEvent} from \"main.core.events\";\n\nimport Hex from '../hex/hex';\nimport ColorValue from \"../../color_value\";\nimport BaseControl from \"../base_control/base_control\";\nimport Spectrum from \"../spectrum/spectrum\";\nimport Recent from '../../layout/recent/recent';\n\nimport './css/colorpicker.css';\n\nexport default class Colorpicker extends BaseControl\n{\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Colorpicker');\n\t\tthis.popupId = 'colorpicker_popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.hexPreview = new Hex();\n\t\tthis.hexPreview.setPreviewMode(true);\n\t\tEvent.bind(this.hexPreview.getLayout(), 'click', this.onPopupOpenClick.bind(this));\n\n\t\t// popup\n\t\tthis.hex = new Hex();\n\t\tthis.hex.subscribe('onChange', this.onHexChange.bind(this));\n\t\tthis.hex.subscribe('onButtonClick', this.onSelectClick.bind(this));\n\n\t\tthis.spectrum = new Spectrum(options);\n\t\tthis.spectrum.subscribe('onChange', this.onSpectrumChange.bind(this));\n\n\t\tthis.recent = new Recent();\n\t\tthis.recent.subscribe('onChange', this.onRecentChange.bind(this));\n\n\t\tEvent.bind(this.getCancelButton(), 'click', this.onCancelClick.bind(this));\n\t\tEvent.bind(this.getSelectButton(), 'click', this.onSelectClick.bind(this));\n\t\t// end popup\n\n\t\tthis.previously = this.getValue();\n\t}\n\n\tonSelectClick(event: ?BaseEvent)\n\t{\n\t\tconst value = (event instanceof BaseEvent) ? event.getData().color : this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tthis.recent.addItem(this.getValue().getHex());\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-colorpicker\">\n\t\t\t\t${this.hexPreview.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetPopupContent(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-container\">\n\t\t\t\t<div class=\"landing-ui-field-color-popup-head\">\n\t\t\t\t\t${this.recent.getLayout()}\n\t\t\t\t\t${this.hex.getLayout()}\n\t\t\t\t</div>\n\t\t\t\t${this.spectrum.getLayout()}\n\t\t\t\t<div class=\"landing-ui-field-color-popup-footer\">\n\t\t\t\t\t${this.getSelectButton()}\n\t\t\t\t\t${this.getCancelButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetSelectButton(): HTMLButtonElement\n\t{\n\t\treturn this.cache.remember('selectButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-primary\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-BUTTON_SELECT')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCancelButton(): HTMLButtonElement\n\t{\n\t\treturn this.cache.remember('cancelButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-light-border\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-BUTTON_CANCEL')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetHexPreviewObject(): Hex\n\t{\n\t\treturn this.hexPreview;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'landing-ui-field-color-spectrum-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.hexPreview.getLayout(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 14,\n\t\t\t\twidth: 260,\n\t\t\t\toffsetTop: -37,\n\t\t\t\toffsetLeft: -180,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn this.spectrum.getValue();\n\t\t});\n\t}\n\n\tonHexChange(event: BaseEvent)\n\t{\n\t\tthis.setValue(event.getData().color);\n\t\tthis.onChange(event);\n\t}\n\n\tonSpectrumChange(event: BaseEvent)\n\t{\n\t\tthis.hex.unFocus();\n\t\tthis.setValue(event.getData().color);\n\t\tthis.onChange(event);\n\t}\n\n\tonRecentChange(event: BaseEvent)\n\t{\n\t\tconst recentColor = new ColorValue(event.getData().hex);\n\t\tthis.setValue(recentColor);\n\t\tthis.onChange(new BaseEvent({data: {color: recentColor}}));\n\t}\n\n\tonCancelClick()\n\t{\n\t\tthis.setValue(this.previously);\n\t\tthis.getPopup().close();\n\t\tthis.onChange(new BaseEvent({data: {color: this.getValue()}}));\n\t}\n\n\tonPopupOpenClick()\n\t{\n\t\tthis.recent.buildItemsLayout();\n\t\tthis.previously = this.getValue();\n\t\tthis.getPopup().show();\n\t\tif (this.getPopup().isShown())\n\t\t{\n\t\t\tthis.hex.focus();\n\t\t}\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tthis.spectrum.setValue(value);\n\t\t\tthis.hex.setValue(value);\n\t\t\tthis.hexPreview.setValue(value);\n\n\t\t\tthis.setActivity(value);\n\t\t}\n\t}\n\n\tsetActivity(value: ?ColorValue)\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (this.spectrum.isActive())\n\t\t\t{\n\t\t\t\tthis.hex.unsetActive();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hex.setActive();\n\t\t\t}\n\t\t\tthis.hexPreview.setActive();\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.hex.unsetActive();\n\t\tthis.hexPreview.unsetActive();\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.hex.isActive() || this.hexPreview.isActive();\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Dom, Loc} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\n\nimport './css/primary.css';\n\nexport default class Primary extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\tstatic CSS_VAR: string = '--primary';\n\n\t// todo: layout or control?\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Primary');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-primary\">\n\t\t\t\t\t<i class=\"landing-ui-field-color-primary-preview\"></i>\n\t\t\t\t\t<span class=\"landing-ui-field-color-primary-text\">\n\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRIMARY_TITLE')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn new ColorValue(Primary.CSS_VAR);\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.setActive();\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n\n\tsetActive()\n\t{\n\t\tDom.addClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tunsetActive()\n\t{\n\t\tDom.removeClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tisPrimaryValue(value: ColorValue): boolean\n\t{\n\t\treturn (value !== null) && (this.getValue().getCssVar() === value.getCssVar());\n\t}\n}\n","export function regexpWoStartEnd(regexp: RegExp): RegExp\n{\n\treturn new RegExp(regexpToString(regexp));\n}\n\nexport function regexpToString(regexp: RegExp): string\n{\n\treturn regexp.source.replace(/(^\\^)|(\\$$)/g, '');\n}","import {matcherHex} from \"./is-hex\";\nimport {regexpToString} from \"./regexp\";\n\nexport const matcherGradient = /^(linear|radial)-gradient\\(.*\\)$/i;\nexport const matcherGradientAngle = /^(linear|radial)-gradient\\(.*?((\\d)+deg).*?\\)$/ig;\nconst hexMatcher = regexpToString(matcherHex);\nexport const matcherGradientColors = new RegExp(\n\t'((rgba|hsla)?\\\\([\\\\d% .,]+\\\\)|transparent|' + hexMatcher + ')+', 'ig'\n);\n// todo: whooooouuuu, is so not-good\n\n// todo: add hex greaident match\n\n// todo: for tests\n// \"linear-gradient(45deg, rgb(71, 155, 255) 0%, rgb(0, 207, 78) 100%)\"\n// \"linear-gradient(45deg, #123321 0%, #543asdbd 100%)\"\n// \"linear-gradient(rgb(71, 155, 255) 0%, rgb(0, 207, 78) 100%)\"\n// \"radial-gradient(circle farthest-side, rgb(34, 148, 215), rgb(39, 82, 150))\"\n\nexport default function isGradientString(rgbString: string): boolean\n{\n\treturn !!rgbString.trim().match(matcherGradient);\n}","import {Type, Text} from 'main.core';\n\nimport {GradientValueOptions, defaultColorValueOptions} from \"./types/color_value_options\";\nimport ColorValue from \"./color_value\";\nimport {IColorValue} from './types/i_color_value';\nimport Primary from './layout/primary/primary';\n\nimport isGradientString, {\n\tmatcherGradient,\n\tmatcherGradientAngle,\n\tmatcherGradientColors,\n} from './internal/is-gradient-string';\n\nexport default class GradientValue implements IColorValue\n{\n\tstatic TYPE_RADIAL = 'radial';\n\tstatic TYPE_LINEAR = 'linear';\n\tstatic DEFAULT_ANGLE = 180;\n\tstatic DEFAULT_TYPE = 'linear';\n\n\tvalue: GradientValueOptions;\n\n\tconstructor(value: GradientValueOptions | GradientValue | string)\n\t{\n\t\tthis.value = {\n\t\t\tfrom: new ColorValue('#ffffff'),\n\t\t\tto: new ColorValue(Primary.CSS_VAR),\n\t\t\tangle: GradientValue.DEFAULT_ANGLE,\n\t\t\ttype: GradientValue.DEFAULT_TYPE,\n\t\t};\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.value.from.getName() + '_' + this.value.to.getName() + '_' + this.getAngle() + '_' + this.getType();\n\t}\n\n\t// todo: parse grad string?\n\tsetValue(value: GradientValueOptions | GradientValue | string): GradientValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tthis.value.from = new ColorValue(value.getFrom());\n\t\t\t\tthis.value.to = new ColorValue(value.getTo());\n\t\t\t\tthis.value.angle = value.getAngle();\n\t\t\t\tthis.value.type = value.getType();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif ('from' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.from = new ColorValue(value.from);\n\t\t\t\t}\n\t\t\t\tif ('to' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.to = new ColorValue(value.to);\n\t\t\t\t}\n\t\t\t\tif ('angle' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.angle = Text.toNumber(value.angle);\n\t\t\t\t}\n\t\t\t\tif ('type' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.type = value.type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telse if (Type.isString(value) && isGradientString(value))\n\t\t{\n\t\t\tthis.parseGradientString(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsetOpacity(opacity: number): GradientValue\n\t{\n\t\tthis.value.from.setOpacity(opacity);\n\t\tthis.value.to.setOpacity(opacity);\n\n\t\treturn this;\n\t}\n\n\tparseGradientString(value: string): viod\n\t{\n\t\tconst typeMatches = value.trim().match(matcherGradient);\n\t\tif (!!typeMatches)\n\t\t{\n\t\t\tthis.setValue({type: typeMatches[1]});\n\t\t}\n\n\t\tconst angleMatches = value.trim().match(matcherGradientAngle);\n\t\tif (!!angleMatches)\n\t\t{\n\t\t\tthis.setValue({angle: angleMatches[2]});\n\t\t}\n\n\n\t\tconst colorMatches = value.trim().match(matcherGradientColors);\n\t\tif (colorMatches && colorMatches.length > 0)\n\t\t{\n\t\t\tthis.setValue({from: new ColorValue(colorMatches[0])});\n\t\t\tthis.setValue({to: new ColorValue(colorMatches[colorMatches.length - 1])});\n\t\t}\n\t}\n\n\tgetFrom(): ColorValue\n\t{\n\t\treturn this.value.from;\n\t}\n\n\tgetTo(): ColorValue\n\t{\n\t\treturn this.value.to;\n\t}\n\n\tgetAngle(): number\n\t{\n\t\treturn this.value.angle;\n\t}\n\n\tsetAngle(angle: number)\n\t{\n\t\tif (Type.isNumber(angle))\n\t\t{\n\t\t\tthis.value.angle = Math.min(Math.max(angle, 0), 360);\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.value.type;\n\t}\n\n\tsetType(type: string)\n\t{\n\t\tif (type === GradientValue.TYPE_RADIAL || type === GradientValue.TYPE_LINEAR)\n\t\t{\n\t\t\tthis.value.type = type;\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\treturn (this.value.from.getOpacity() + this.value.to.getOpacity()) / 2 ?? defaultColorValueOptions.a;\n\t}\n\n\tgetStyleString(): string\n\t{\n\t\tconst angle = this.value.angle;\n\t\tconst type = this.value.type;\n\t\tconst fromString = this.value.from.getStyleString();\n\t\tconst toString = this.value.to.getStyleString();\n\n\t\treturn type === 'linear'\n\t\t\t? `linear-gradient(${angle}deg, ${fromString} 0%, ${toString} 100%)`\n\t\t\t: `radial-gradient(circle farthest-side at 50% 50%, ${fromString} 0%, ${toString} 100%)`;\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\treturn `radial-gradient(at top left, ${this.value.from.getHex()}, transparent)`\n\t\t\t+ `, radial-gradient(at bottom left, ${this.value.to.getHex()}, transparent)`\n\t}\n\n\tstatic compare(value1: GradientValue, value2: GradientValue, full:boolean = true): boolean\n\t{\n\t\tconst base = (\n\t\t\t\tColorValue.compare(value1.getFrom(), value2.getFrom())\n\t\t\t\t&& ColorValue.compare(value1.getTo(), value2.getTo())\n\t\t\t) || (\n\t\t\t\tColorValue.compare(value1.getTo(), value2.getFrom())\n\t\t\t\t&& ColorValue.compare(value1.getFrom(), value2.getTo())\n\t\t\t);\n\t\tconst ext = full\n\t\t\t? (value1.getAngle() === value2.getAngle() && value1.getType() === value2.getType())\n\t\t\t: true;\n\n\t\treturn  base && ext;\n\t}\n}\n","import ColorValue from '../../../color_value';\nimport GradientValue from '../../../gradient_value';\n\nexport type PresetOptions = {\n\tid?: string,\n\ttype?: 'color' | 'gradient',\n\titems: [ColorValue | GradientValue],\n};\n\nexport const defaultType = 'color';\nexport const gradientType = 'gradient';","import {Cache, Dom} from 'main.core';\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport {PresetOptions, gradientType} from './types/preset-options';\nimport hexToHsl from '../../internal/hex-to-hsl';\n\nexport default class Generator\n{\n\tstatic BITRIX_COLOR: string = '#2fc6f6';\n\n\tstatic cache = new Cache.MemoryCache();\n\tstatic defaultPresets: [] = [\n\t\t{\n\t\t\tid: 'agency',\n\t\t\titems: [\n\t\t\t\t'#ff6366', '#40191a', '#803233', '#bf4b4d', '#e65a5c', '#ffc1c2',\n\t\t\t\t'#363643', '#57dca3', '#ee76ba', '#ffa864', '#eaeaec', '#fadbdc',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'accounting',\n\t\t\titems: [\n\t\t\t\t'#a5c33c', '#384215', '#6f8228', '#8fa834', '#b0cf40', '#dae6ae',\n\t\t\t\t'#4c4c4c', '#5d84e6', '#cd506b', '#fe6466', '#dfdfdf', '#e9f0cf',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'app',\n\t\t\titems: [\n\t\t\t\t'#4fd2c2', '#1f524c', '#379187', '#46b8aa', '#54dece', '#c8f1ec',\n\t\t\t\t'#6639b6', '#e81c62', '#9a69ca', '#6279d8', '#ffc337', '#e9faf8',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'architecture',\n\t\t\titems: [\n\t\t\t\t'#c94645', '#4a1919', '#8a2f2f', '#b03c3c', '#d64949', '#eec3c3',\n\t\t\t\t'#363643', '#446d90', '#a13773', '#c98145', '#eaeaec', '#f9e8e7',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'business',\n\t\t\titems: [\n\t\t\t\t'#3949a0', '#232c61', '#313e87', '#3e4fad', '#556ced', '#d8d7dc',\n\t\t\t\t'#14122c', '#1d1937', '#a03949', '#2f295a', '#c87014', '#f4f4f5',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'charity',\n\t\t\titems: [\n\t\t\t\t'#f5f219', '#f58419', '#f5cc19', '#a8e32a', '#f9f76a', '#fcfbb6',\n\t\t\t\t'#000000', '#262e37', '#74797f', '#e569b1', '#edeef0', '#fefedf',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'construction',\n\t\t\titems: [\n\t\t\t\t'#f7b70b', '#382a02', '#785905', '#b88907', '#dea509', '#fdf1d1',\n\t\t\t\t'#111111', '#a3a3a3', '#f7410b', '#f70b4b', '#d6dde9', '#fef9ea',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'consulting',\n\t\t\titems: [\n\t\t\t\t'#21a79b', '#38afa5', '#14665f', '#1c8c83', '#30f2e2', '#a9ddd9',\n\t\t\t\t'#ec4672', '#58d400', '#f0ac00', '#2d6faf', '#2da721', '#e6f5f4',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'corporate',\n\t\t\titems: [\n\t\t\t\t'#6ab8ee', '#31556e', '#4e86ad', '#5fa3d4', '#70c1fa', '#d2e9f8',\n\t\t\t\t'#36e2c0', '#ffaa3c', '#ee6a76', '#ffa468', '#5feb99', '#ebf4fb',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'courses',\n\t\t\titems: [\n\t\t\t\t'#6bda95', '#2c593d', '#4b9969', '#5ebf83', '#70e69d', '#c2f0d3',\n\t\t\t\t'#31556e', '#ff947d', '#738ed3', '#f791ab', '#ffb67d', '#e2f8eb',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'event',\n\t\t\titems: [\n\t\t\t\t'#f73859', '#380d14', '#781c2b', '#b82a42', '#de334f', '#fdbbc6',\n\t\t\t\t'#151726', '#ffb553', '#30d59b', '#b265e0', '#edeef0', '#ffeaed',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'gym',\n\t\t\titems: [\n\t\t\t\t'#6b7de0', '#2f3661', '#4d5aa1', '#5f6fc7', '#7284ed', '#e4e8fa',\n\t\t\t\t'#333333', '#ffd367', '#a37fe8', '#e06b7d', '#6dc1e0', '#f4f6fd',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'lawyer',\n\t\t\titems: [\n\t\t\t\t'#e74c3c', '#69231b', '#a8382c', '#cf4536', '#f55240', '#f9d0cb',\n\t\t\t\t'#4e4353', '#5a505e', '#e7863c', '#38a27f', '#e2e1e3', '#fdeeec',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'photography',\n\t\t\titems: [\n\t\t\t\t'#f7a700', '#382600', '#785200', '#b87d00', '#de9800', '#fde8ba',\n\t\t\t\t'#333333', '#0b5aa0', '#e93d18', '#06c4ed', '#3672a8', '#fff6e3',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'restaurant',\n\t\t\titems: [\n\t\t\t\t'#e6125d', '#660829', '#a60d43', '#cc1052', '#f21361', '#facfde',\n\t\t\t\t'#0eb88e', '#00946f', '#e04292', '#9b12e6', '#bfde00', '#fef2f6',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'shipping',\n\t\t\titems: [\n\t\t\t\t'#ff0000', '#400000', '#800000', '#bf0000', '#e60000', '#ffb4b4',\n\t\t\t\t'#333333', '#ff822a', '#d63986', '#00ac6b', '#ffb800', '#fff3f3',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'spa',\n\t\t\titems: [\n\t\t\t\t'#9dba04', '#313b01', '#667a02', '#86a103', '#a6c704', '#e4ecb9',\n\t\t\t\t'#ba7c04', '#cf54bb', '#049dba', '#1d7094', '#eead2f', '#f2f6dd',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'travel',\n\t\t\titems: [\n\t\t\t\t'#ee4136', '#6e1f19', '#ad3128', '#d43c31', '#fa4639', '#fef1f0',\n\t\t\t\t'#31353e', '#3e434d', '#ee8036', '#428abc', '#eaebec', '#c3c4c7',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'wedding',\n\t\t\titems: [\n\t\t\t\t'#d65779', '#572431', '#963e55', '#bd4d6b', '#e35d81', '#f7dfe5',\n\t\t\t\t'#af58a7', '#6bc34b', '#ec8c60', '#50a098', '#57b9d6', '#fdf4f6',\n\t\t\t],\n\t\t},\n\t];\n\n\tstatic getDefaultPresets(): PresetOptions[]\n\t{\n\t\treturn Generator.cache.remember('default', () => {\n\t\t\tconst presets = [];\n\t\t\tGenerator.defaultPresets.forEach(preset => {\n\t\t\t\tpresets.push({\n\t\t\t\t\tid: preset.id,\n\t\t\t\t\ttype: 'color',\n\t\t\t\t\titems: preset.items.map(item => new ColorValue(hexToHsl(item))),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn presets;\n\t\t});\n\t}\n\n\tstatic getPrimaryColorPreset(): PresetOptions\n\t{\n\t\treturn this.cache.remember('primary', () => {\n\t\t\tconst preset = {\n\t\t\t\tid: 'defaultPrimary',\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tconst primary = new ColorValue(Dom.style(document.documentElement, '--primary').trim());\n\t\t\tpreset.items.push(new ColorValue(primary));\n\n\t\t\tif (primary.getHsl().s <= 10)\n\t\t\t{\n\t\t\t\tconst lBeforeCount = (primary.getHsl().l > 50)\n\t\t\t\t\t? Math.ceil(primary.getHsl().l / 100 * 5)\n\t\t\t\t\t: Math.floor(primary.getHsl().l / 100 * 5);\n\t\t\t\tconst lAfterCount = 5 - lBeforeCount;\n\t\t\t\tconst deltaLBefore = primary.getHsl().l / (lBeforeCount + 1);\n\t\t\t\tconst deltaLAfter = (100 - primary.getHsl().l) / (lAfterCount + 1);\n\t\t\t\tfor (let i = 1; i <= lBeforeCount; i++)\n\t\t\t\t{\n\t\t\t\t\tpreset.items.push(new ColorValue(primary).darken(deltaLBefore * i));\n\t\t\t\t}\n\t\t\t\tfor (let ii = 1; ii <= lAfterCount; ii++)\n\t\t\t\t{\n\t\t\t\t\tpreset.items.push(new ColorValue(primary).lighten(deltaLAfter * ii));\n\t\t\t\t}\n\n\t\t\t\tconst deltaBitrixL = 15;\n\t\t\t\tconst deltaBitrixS = 15;\n\t\t\t\tconst bitrixColor = new ColorValue(Generator.BITRIX_COLOR);\n\t\t\t\tpreset.items[6] = new ColorValue(bitrixColor);\n\n\t\t\t\tpreset.items[7] = new ColorValue(bitrixColor.darken(deltaBitrixL).saturate(deltaBitrixS));\n\t\t\t\tpreset.items[8] = new ColorValue(bitrixColor.darken(deltaBitrixL).saturate(deltaBitrixS));\n\t\t\t\tbitrixColor.lighten(deltaBitrixL * 2).desaturate(deltaBitrixS * 2);\n\n\t\t\t\tpreset.items[9] = new ColorValue(bitrixColor.lighten(deltaBitrixL).desaturate(deltaBitrixS));\n\t\t\t\tpreset.items[10] = new ColorValue(bitrixColor.lighten(deltaBitrixL).desaturate(deltaBitrixS));\n\t\t\t\tbitrixColor.darken(deltaBitrixL * 2).saturate(deltaBitrixS * 2);\n\n\t\t\t\tpreset.items[11] = new ColorValue(bitrixColor).adjustHue(180);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst deltaL = (90 - primary.getHsl().l) / 3;\n\t\t\t\tconst deltaL2 = (primary.getHsl().l - 10) / 3;\n\t\t\t\tconst deltaS = (90 - primary.getHsl().s) / 3;\n\t\t\t\tconst deltaS2 = (primary.getHsl().s - 10) / 3;\n\n\t\t\t\tpreset.items[1] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tpreset.items[2] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tpreset.items[3] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tprimary.lighten(deltaL2 * 3).desaturate(deltaS * 3);\n\n\t\t\t\tpreset.items[4] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tpreset.items[5] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tpreset.items[11] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tprimary.saturate(deltaS2 * 3).darken(deltaL * 3);\n\n\t\t\t\tpreset.items[7] = new ColorValue(primary.adjustHue(40));\n\t\t\t\tpreset.items[8] = new ColorValue(primary.adjustHue(-80));\n\t\t\t\tpreset.items[9] = new ColorValue(primary.adjustHue(180));\n\t\t\t\tpreset.items[6] = new ColorValue(primary.adjustHue(40));\n\t\t\t\tpreset.items[10] = new ColorValue(primary.adjustHue(40));\n\t\t\t}\n\t\t\treturn preset;\n\t\t});\n\t}\n\n\tstatic getBlackAndWhitePreset(): PresetOptions\n\t{\n\t\treturn this.cache.remember('blackAndWhite', () => {\n\t\t\tconst preset = {\n\t\t\t\tid: 'blackAndWhite',\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tconst start = new ColorValue('#ffffff');\n\n\t\t\tpreset.items.push(new ColorValue(start));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.7)));\n\n\t\t\treturn preset;\n\t\t});\n\t}\n\n\tstatic getGradientByColorOptions(options: PresetOptions): PresetOptions\n\t{\n\t\tconst items = [];\n\t\tconst pairs = [\n\t\t\t[1, 2],\n\t\t\t[1, 4],\n\t\t\t[5, 12],\n\t\t\t[1, 8],\n\t\t\t[8, 9],\n\t\t\t[1, 9],\n\t\t\t[10, 7],\n\t\t\t[7, 11],\n\t\t];\n\t\tpairs.forEach(pair => {\n\t\t\titems.push(new GradientValue({\n\t\t\t\tfrom: new ColorValue(options.items[pair[0] - 1]),\n\t\t\t\tto: new ColorValue(options.items[pair[1] - 1]),\n\t\t\t\tangle: GradientValue.DEFAULT_ANGLE,\n\t\t\t\ttype: GradientValue.DEFAULT_TYPE,\n\t\t\t}));\n\t\t});\n\n\t\treturn {\n\t\t\ttype: gradientType,\n\t\t\titems: items,\n\t\t};\n\t}\n}\n","import {Tag, Dom, Event, Type, Cache} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {IColorValue} from '../../types/i_color_value';\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport {PresetOptions, defaultType, gradientType} from './types/preset-options';\nimport Generator from './generator';\n\nimport './css/preset.css';\n\nexport default class Preset extends EventEmitter\n{\n\tid: string;\n\ttype: 'color' | 'gradient';\n\titems: [ColorValue | GradientValue];\n\tactiveItem: string | IColorValue | null;\n\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options: PresetOptions)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Preset');\n\n\t\tthis.id = options.id;\n\t\tthis.type = options.type || defaultType;\n\t\tthis.items = options.items;\n\t\tthis.activeItem = null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetGradientPreset(): Preset\n\t{\n\t\tconst options = (this.type === gradientType)\n\t\t\t? {type: gradientType, items: this.items}\n\t\t\t: Generator.getGradientByColorOptions({items: this.items});\n\n\t\treturn new Preset(options);\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-preset\">\n\t\t\t\t\t${this.items.map((item) => {\n\t\t\t\t\t\treturn this.getItemLayout(item.getName());\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetItemLayout(name: string): HTMLDivElement\n\t{\n\t\treturn this.cache.remember(name, () => {\n\t\t\tconst color = this.getItemByName(name);\n\t\t\tconst style = Type.isString(color) ? color : color.getStyleString();\n\t\t\tconst item = Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"landing-ui-field-color-preset-item\"\n\t\t\t\t\tstyle=\"background: ${style}\"\n\t\t\t\t\tdata-name=\"${name}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t\tEvent.bind(item, 'click', this.onItemClick.bind(this));\n\n\t\t\treturn item;\n\t\t});\n\t}\n\n\tgetItemByName(name: string): string | IColorValue | null\n\t{\n\t\treturn this.items.find(item => name === item.getName()) || null;\n\t}\n\n\tisPresetValue(value: ColorValue | GradientValue | null): boolean\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn this.items.some(item => {\n\t\t\tif (item instanceof ColorValue && value instanceof ColorValue)\n\t\t\t{\n\t\t\t\treturn ColorValue.compare(item, new ColorValue(value).setOpacity(1));\n\t\t\t}\n\t\t\telse if (item instanceof GradientValue && value instanceof GradientValue)\n\t\t\t{\n\t\t\t\treturn GradientValue.compare(item, value, false);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tonItemClick(event: MouseEvent)\n\t{\n\t\tthis.setActiveItem(event.currentTarget.dataset.name);\n\n\t\tlet value = null;\n\t\tif (this.activeItem !== null)\n\t\t{\n\t\t\tvalue = this.activeItem instanceof GradientValue\n\t\t\t\t? new GradientValue(this.activeItem)\n\t\t\t\t: new ColorValue(this.activeItem);\n\t\t}\n\n\t\tthis.emit('onChange', {color: value});\n\t}\n\n\tsetActiveItem(name: string)\n\t{\n\t\tthis.activeItem = this.getItemByName(name);\n\n\t\tthis.items.forEach((item) => {\n\t\t\tconst itemName = item.getName();\n\t\t\tif (name === itemName)\n\t\t\t{\n\t\t\t\tDom.addClass(this.getItemLayout(itemName), Preset.ACTIVE_CLASS);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getItemLayout(itemName), Preset.ACTIVE_CLASS);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetActiveValue(value: ColorValue | GradientValue | null)\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tthis.setActiveItem(\n\t\t\t\t\tnew GradientValue(value)\n\t\t\t\t\t\t.setAngle(GradientValue.DEFAULT_ANGLE)\n\t\t\t\t\t\t.setType(GradientValue.DEFAULT_TYPE)\n\t\t\t\t\t\t.getName()\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setActiveItem(\n\t\t\t\t\tnew ColorValue(value)\n\t\t\t\t\t\t.setOpacity(1)\n\t\t\t\t\t\t.getName()\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.items.forEach(item => {\n\t\t\tDom.removeClass(this.getItemLayout(item.getName()), Preset.ACTIVE_CLASS);\n\t\t});\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.items.some(item => {\n\t\t\treturn Dom.hasClass(this.getItemLayout(item.getName()), Preset.ACTIVE_CLASS);\n\t\t});\n\t}\n}","import {Tag, Text, Dom, Event, Type, Cache, Loc} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Popup, PopupManager} from 'main.popup';\n\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport Generator from \"./generator\";\nimport './css/preset_collection.css';\nimport {PresetOptions} from \"./types/preset-options\";\nimport Preset from \"./preset\";\n\nexport default class PresetCollection extends EventEmitter\n{\n\tstatic globalActiveId: number | string | null = null;\n\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\tpresets: {\n\t\t[id: string]: PresetOptions\n\t} = {};\n\tactiveId: number | string | null = null;\n\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.PresetCollection');\n\t\tthis.popupId = 'presets-popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.onPresetClick = this.onPresetClick.bind(this);\n\t\tEvent.bind(this.getOpenButton(), 'click', () => {\n\t\t\tthis.getPopup().toggle();\n\t\t});\n\t\tthis.onPresetChangeGlobal = this.onPresetChangeGlobal.bind(this);\n\t\tEventEmitter.subscribe('BX.Landing.UI.Field.Color.PresetCollection:onChange', this.onPresetChangeGlobal);\n\t}\n\n\taddDefaultPresets()\n\t{\n\t\tthis.addPreset(Generator.getPrimaryColorPreset());\n\t\tGenerator.getDefaultPresets().map((item) => {\n\t\t\tthis.addPreset(item);\n\t\t});\n\t}\n\n\taddPreset(options: PresetOptions)\n\t{\n\t\tthis.cache.delete('popupLayout');\n\t\tif (!Object.keys(this.presets).length || !(options.id in this.presets))\n\t\t{\n\t\t\tthis.presets[options.id] = options;\n\t\t}\n\t}\n\n\tgetGlobalActiveId(): number | string | null\n\t{\n\t\treturn PresetCollection.globalActiveId;\n\t}\n\n\tgetActiveId(): number | string\n\t{\n\t\treturn this.getGlobalActiveId() || this.getDefaultPreset().getId();\n\t}\n\n\tgetActivePreset(): Preset\n\t{\n\t\treturn this.getPresetById(this.getActiveId());\n\t}\n\n\tgetDefaultPreset(): ?Preset\n\t{\n\t\treturn Object.keys(this.presets).length\n\t\t\t? this.getPresetById(Object.keys(this.presets)[0])\n\t\t\t: null;\n\t}\n\n\tgetPresetById(id: number | string): ?Preset\n\t{\n\t\tif (id in this.presets)\n\t\t{\n\t\t\treturn this.cache.remember(id, () => new Preset(this.presets[id]));\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetPresetByItemValue(value: ColorValue | GradientValue | null): ?Preset\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (let id in this.presets)\n\t\t{\n\t\t\tconst preset = this.getPresetById(id);\n\t\t\tif (preset && value instanceof ColorValue)\n\t\t\t{\n\t\t\t\tif (preset.isPresetValue(value))\n\t\t\t\t{\n\t\t\t\t\treturn preset;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (preset && value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tif (preset.getGradientPreset().isPresetValue(value))\n\t\t\t\t{\n\t\t\t\t\treturn preset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-presets\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-presets-left\">\n\t\t\t\t\t\t<span class=\"landing-ui-field-color-presets-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_TITLE')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-field-color-presets-right\">${this.getOpenButton()}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetOpenButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('openButton', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-field-color-presets-open\">\n\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_MORE')}\n\t\t\t</span>`;\n\t\t});\n\t}\n\n\tgetTitleContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleContainer', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-ui-field-color-presets-left');\n\t\t});\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\t// todo: bind to event target? or need button\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'presets-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.getOpenButton(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\twidth: 280,\n\t\t\t\toffsetLeft: -200,\n\t\t\t\tcontent: this.getPopupLayout(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupLayout', () => {\n\t\t\tconst layouts = Tag.render`<div class=\"landing-ui-field-color-presets-popup\">\n\t\t\t\t<div class=\"landing-ui-field-color-presets-popup-title\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_MORE_COLORS')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-presets-popup-inner\"></div>\n\t\t\t</div>`;\n\t\t\tconst innerLayouts = layouts.querySelector('.landing-ui-field-color-presets-popup-inner');\n\t\t\tfor (const presetId in this.presets)\n\t\t\t{\n\t\t\t\tconst layout = this.getPresetLayout(presetId);\n\t\t\t\tif (presetId === this.getActiveId())\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(layout, PresetCollection.ACTIVE_CLASS);\n\t\t\t\t\tthis.activeId = presetId;\n\t\t\t\t}\n\t\t\t\tEvent.bind(layout, 'click', this.onPresetClick);\n\t\t\t\tDom.append(layout, innerLayouts);\n\t\t\t}\n\n\t\t\treturn layouts;\n\t\t});\n\t}\n\n\tgetPresetLayout(presetId: string | number): HTMLDivElement\n\t{\n\t\treturn this.cache.remember(presetId + 'layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-presets-preset\" data-id=\"${presetId}\">\n\t\t\t\t\t${\n\t\t\t\t\t\tthis.presets[presetId].items.map((item) => {\n\t\t\t\t\t\t\treturn Tag.render`<div\n\t\t\t\t\t\t\t\tclass=\"landing-ui-field-color-presets-preset-item\"\n\t\t\t\t\t\t\t\tstyle=\"background: ${Type.isString(item) ? item : item.getStyleString()}\"\n\t\t\t\t\t\t\t></div>`;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonPresetClick(event: MouseEvent)\n\t{\n\t\tthis.getPopup().close();\n\t\tthis.setActiveItem(event.currentTarget.dataset.id);\n\t\tthis.emit('onChange', {presetId: this.getActiveId()});\n\t}\n\n\tonPresetChangeGlobal(event: BaseEvent)\n\t{\n\t\tif (event.getData().presetId !== this.activeId)\n\t\t{\n\t\t\tthis.setActiveItem(event.getData().presetId);\n\t\t\tthis.emit('onChange', event);\n\t\t}\n\t}\n\n\tsetActiveItem(presetId: string)\n\n\t{\n\t\tif (\n\t\t\tpresetId !== null\n\t\t\t&& presetId !== this.activeId\n\t\t)\n\t\t{\n\t\t\tPresetCollection.globalActiveId = presetId;\n\t\t\tthis.activeId = presetId;\n\t\t\tfor (const id in this.presets)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getPresetLayout(id), PresetCollection.ACTIVE_CLASS);\n\t\t\t\tif (id === presetId)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.getPresetLayout(id), PresetCollection.ACTIVE_CLASS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive()\n\t{\n\t\tfor (const presetId in this.presets)\n\t\t{\n\t\t\tDom.removeClass(this.getPresetLayout(presetId), PresetCollection.ACTIVE_CLASS);\n\t\t}\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Loc, Text} from 'main.core';\n\nimport './css/reset.css';\n\nexport default class Reset extends EventEmitter\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Reset');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\n\t\tconst hint = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\ttargetContainer: options.contentRoot,\n\t\t\t\tpadding: 0,\n\t\t\t}\n\t\t});\n\t\thint.init(this.getLayout());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-reset-container\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-reset\"\n\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('LANDING_FIELD_COLOR-RESET_HINT')}\"\n\t\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('onReset');\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Loc} from 'main.core';\n\nimport './css/zeroing.css';\n\nexport default class Zeroing extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Zeroing');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`<div \n\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-ZEROING_TITLE')}\"\n\t\t\t\tclass=\"landing-ui-field-color-preset-item landing-ui-field-color-zeroing\"\n\t\t\t></div>`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('onChange', {color: null});\n\t}\n}\n","import {Dom, Tag} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport BaseControl from '../base_control/base_control';\nimport ColorValue from \"../../color_value\";\nimport Colorpicker from \"../colorpicker/colorpicker\";\nimport Preset from '../../layout/preset/preset';\nimport PresetCollection from '../../layout/preset/preset_collection';\nimport Reset from '../../layout/reset/reset';\nimport Zeroing from '../../layout/zeroing/zeroing';\n\nimport Generator from '../../layout/preset/generator';\nimport './css/color_set.css';\n\nexport default class ColorSet extends BaseControl\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.ColorSet');\n\n\t\tthis.reset = new Reset(options);\n\t\tthis.reset.subscribe('onReset', () => {\n\t\t\tthis.emit('onReset');\n\t\t});\n\n\t\tthis.zeroing = new Zeroing();\n\t\tthis.zeroing.subscribe('onChange', (event) => {\n\t\t\tthis.unsetActive();\n\t\t\tthis.setValue(event.getData().color);\n\t\t\t// todo: need reload computed props and reinit\n\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tthis.blackAndWhitePreset = new Preset(Generator.getBlackAndWhitePreset());\n\t\tthis.blackAndWhitePreset.subscribe('onChange', (event) => {\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.onPresetItemChange(event);\n\t\t});\n\n\t\tthis.colorpicker = new Colorpicker(options);\n\t\tthis.colorpicker.subscribe('onChange', (event) => {\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.blackAndWhitePreset.unsetActive();\n\n\t\t\tconst color = event.getData().color;\n\t\t\tif (this.preset.isPresetValue(color))\n\t\t\t{\n\t\t\t\tthis.preset.setActiveValue(color);\n\t\t\t\tthis.colorpicker.unsetActive();\n\t\t\t}\n\t\t\telse if (this.blackAndWhitePreset.isPresetValue(color))\n\t\t\t{\n\t\t\t\tthis.blackAndWhitePreset.setActiveValue(color);\n\t\t\t\tthis.colorpicker.unsetActive();\n\t\t\t}\n\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tthis.presets = new PresetCollection(options);\n\t\tthis.presets.subscribe('onChange', (event) => {\n\t\t\tthis.setPreset(this.presets.getPresetById(event.getData().presetId));\n\t\t});\n\t\tthis.presets.addDefaultPresets();\n\t\tconst preset = this.presets.getActivePreset();\n\t\tif (preset)\n\t\t{\n\t\t\tthis.setPreset(preset);\n\t\t}\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tDom.append(this.reset.getLayout(), this.presets.getTitleContainer());\n\t\tDom.prepend(this.zeroing.getLayout(), this.blackAndWhitePreset.getLayout());\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-colorset\">\n\t\t\t\t<div class=\"landing-ui-field-color-colorset-top\">\n\t\t\t\t\t${this.presets.getLayout()}\n\t\t\t\t</div>\n\t\t\t\t${this.getPresetContainer()}\n\t\t\t\t<div class=\"landing-ui-field-color-colorset-bottom\">\n\t\t\t\t\t${this.blackAndWhitePreset.getLayout()}\n\t\t\t\t\t${this.colorpicker.getLayout()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleLayout', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-ui-field-color-colorset-title');\n\t\t});\n\t}\n\n\tgetPresetContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('presetContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-colorset-preset-container\"></div>`;\n\t\t});\n\t}\n\n\tsetPreset(preset: Preset)\n\t{\n\t\tthis.preset = preset;\n\t\tthis.preset.unsetActive();\n\t\tif (this.getValue() !== null && this.preset.isPresetValue(this.getValue()))\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.preset.setActiveValue(this.getValue());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.colorpicker.setValue(this.getValue());\n\t\t}\n\t\tthis.preset.subscribe('onChange', (event) => {\n\t\t\tthis.blackAndWhitePreset.unsetActive();\n\t\t\tthis.onPresetItemChange(event);\n\t\t});\n\n\t\tDom.clean(this.getPresetContainer());\n\t\tDom.append(preset.getLayout(), this.getPresetContainer());\n\n\t\tthis.emit('onPresetChange', {preset: preset});\n\t}\n\n\tgetPreset(): ?Preset\n\t{\n\t\treturn this.preset;\n\t}\n\n\tgetPresetsCollection(): ?PresetCollection\n\t{\n\t\treturn this.presets;\n\t}\n\n\tonPresetItemChange(event: BaseEvent)\n\t{\n\t\tthis.colorpicker.setValue(event.getData().color);\n\t\tthis.colorpicker.unsetActive();\n\t\tthis.onChange(event);\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.set('value', event.getData().color);\n\t\tthis.emit('onChange', event);\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn this.colorpicker.getValue();\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t\tthis.colorpicker.setValue(value);\n\n\t\t\tconst activePreset =\n\t\t\t\tthis.presets.getGlobalActiveId()\n\t\t\t\t\t? this.presets.getPresetById(this.presets.getGlobalActiveId())\n\t\t\t\t\t: this.presets.getPresetByItemValue(value);\n\t\t\tif (activePreset !== null)\n\t\t\t{\n\t\t\t\tthis.setPreset(activePreset);\n\t\t\t\tthis.presets.setActiveItem(activePreset.getId());\n\t\t\t}\n\n\t\t\tif (value !== null && this.blackAndWhitePreset.isPresetValue(value))\n\t\t\t{\n\t\t\t\tthis.unsetActive();\n\t\t\t\tthis.blackAndWhitePreset.setActiveValue(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.preset.unsetActive();\n\t\tthis.blackAndWhitePreset.unsetActive();\n\t\tthis.colorpicker.unsetActive();\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.preset.isActive() || this.blackAndWhitePreset.isActive() || this.colorpicker.isActive();\n\t}\n}\n","import {Dom, Event, Tag, Text, Type} from 'main.core';\n\nimport {IColorValue} from '../../types/i_color_value';\nimport ColorValue from \"../../color_value\";\nimport './css/opacity.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Opacity extends BaseControl\n{\n\tstatic +DEFAULT_COLOR: string = '#cccccc';\n\tstatic +DEFAULT_OPACITY: string = 1;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Opacity');\n\n\t\tthis.defaultOpacity = (Type.isObject(options) && Reflect.has(options, 'defaultOpacity'))\n\t\t\t? options.defaultOpacity\n\t\t\t: Opacity.DEFAULT_OPACITY;\n\n\t\tthis.document = PageObject.getRootWindow().document;\n\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\t\tEvent.bind(this.getLayout(), 'mousedown', this.onPickerDragStart);\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tconst layout = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-opacity\">\n\t\t\t\t${this.getPicker()}\n\t\t\t\t${this.getColorLayout()}\n\t\t\t</div>\n\t\t`;\n\t\tthis.setPickerPosByOpacity(this.defaultOpacity);\n\n\t\treturn layout;\n\t}\n\n\tonPickerDragStart(event: MouseEvent)\n\t{\n\t\tif (event.ctrlKey || event.metaKey || event.button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.bind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.addClass(this.document.body, 'landing-ui-field-color-draggable');\n\n\t\tthis.onPickerDragMove(event);\n\t}\n\n\tonPickerDragMove(event: MouseEvent)\n\t{\n\t\tif (event.target === this.getPicker())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setPickerPos(event.pageX);\n\t\tthis.onChange();\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tEvent.unbind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.unbind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.removeClass(this.document.body, 'landing-ui-field-color-draggable');\n\t}\n\n\t/**\n\t * Set picker by absolute page coords\n\t * @param x\n\t */\n\tsetPickerPos(x: number)\n\t{\n\t\tconst leftPos = Math.max(Math.min((x - this.getLayoutRect().left), this.getLayoutRect().width), 0);\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftPos}px`,\n\t\t});\n\t}\n\n\tsetPickerPosByOpacity(opacity: number)\n\t{\n\t\topacity = Math.min(1, Math.max(0, opacity));\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${100 - (opacity * 100)}%`,\n\t\t});\n\t}\n\n\tgetLayoutRect(): {}\n\t{\n\t\treturn this.cache.remember('layoutSize', () => {\n\t\t\tconst layoutRect = this.getLayout().getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\twidth: layoutRect.width,\n\t\t\t\tleft: layoutRect.left,\n\t\t\t};\n\t\t});\n\t}\n\n\tgetColorLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('colorLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-color\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker-item\">\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker-item-circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t});\n\t}\n\n\tgetDefaultValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('default', () => {\n\t\t\treturn new ColorValue(Opacity.DEFAULT_COLOR).setOpacity(this.defaultOpacity);\n\t\t});\n\t}\n\n\tgetValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst pickerLeft = Text.toNumber(Dom.style(this.getPicker(), 'left'));\n\t\t\tconst layoutWidth = Text.toNumber(this.getLayout().getBoundingClientRect().width);\n\n\t\t\treturn this.getDefaultValue().setOpacity((1 - pickerLeft / layoutWidth));\n\t\t});\n\t}\n\n\tsetValue(value: ?IColorValue)\n\t{\n\t\tconst valueToSet = (value !== null) ? value : this.getDefaultValue();\n\t\tsuper.setValue(valueToSet);\n\n\t\tif (value !== null)\n\t\t{\n\t\t\tDom.style(this.getColorLayout(), {background: valueToSet.getStyleStringForOpacity()});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.getColorLayout(), {background: 'none'});\n\t\t}\n\t\tthis.setPickerPosByOpacity(valueToSet.getOpacity());\n\t}\n}\n","import {Cache, Dom, Event, Tag, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport BaseControl from '../../control/base_control/base_control';\nimport './css/tabs.css';\n\nexport default class Tabs extends EventEmitter\n{\n\ttabs: Tab[];\n\tmultiple: boolean;\n\tisBig: boolean;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Tabs');\n\n\t\tthis.tabs = [];\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.multiple = true;\n\t\tthis.isBig = false;\n\n\t\tthis.onToggle = this.onToggle.bind(this);\n\t}\n\n\tsetMultiple(multiple: boolean): Tabs\n\t{\n\t\tthis.multiple = multiple;\n\n\t\treturn this;\n\t}\n\n\tsetBig(big: boolean): Tabs\n\t{\n\t\tthis.isBig = big;\n\t\tthis.multiple = false;\n\n\t\treturn this;\n\t}\n\n\tappendTab(id: string, title: string, items: BaseControl | Tab | [BaseControl | Tab]): Tabs\n\t{\n\t\tconst tab = new Tab({\n\t\t\tid: id,\n\t\t\ttitle: title,\n\t\t\titems: Type.isArray(items) ? items : [items],\n\t\t});\n\t\tthis.tabs.push(tab);\n\t\tthis.bindEvents(tab);\n\t\tthis.cache.delete('layout');\n\n\t\treturn this;\n\t}\n\n\tprependTab(id: string, title: string, items: BaseControl | Tab | [BaseControl | Tab]): Tabs\n\t{\n\t\tconst tab = new Tab({\n\t\t\tid: id,\n\t\t\ttitle: title,\n\t\t\titems: Type.isArray(items) || [items],\n\t\t});\n\t\tthis.tabs.unshift(tab);\n\t\tthis.bindEvents(tab);\n\t\tthis.cache.delete('layout');\n\n\t\treturn this;\n\t}\n\n\tbindEvents(tab)\n\t{\n\t\ttab.subscribe('onToggle', this.onToggle);\n\t\ttab.subscribe('onShow', this.onToggle);\n\t\ttab.subscribe('onHide', this.onToggle);\n\t}\n\n\tonToggle(event: BaseEvent)\n\t{\n\t\tthis.emit('onToggle', event);\n\t}\n\n\tshowTab(id): Tabs\n\t{\n\t\tif (!this.multiple)\n\t\t{\n\t\t\tthis.tabs.forEach((tab) => {\n\t\t\t\ttab.hide();\n\t\t\t});\n\t\t}\n\n\t\tconst tab = this.getTabById(id);\n\t\tif (tab)\n\t\t{\n\t\t\ttab.show();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetTabById(id: string): Tab\n\t{\n\t\treturn this.tabs.find((tab) => {\n\t\t\treturn tab.id === id;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst additional = this.isBig ? ' landing-ui-field-color-tabs--big' : '';\n\t\t\tconst layout = Tag.render`<div class=\"landing-ui-field-color-tabs${additional}\"></div>`;\n\n\t\t\tif (this.isBig)\n\t\t\t{\n\t\t\t\tconst head = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-tabs-head landing-ui-field-color-tabs-head--big\"></div>\n\t\t\t\t`;\n\t\t\t\tconst content = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-tabs-content landing-ui-field-color-tabs-content--big\"></div>\n\t\t\t\t`;\n\n\t\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\t\tDom.append(tab.getTitle(), head);\n\t\t\t\t\tDom.append(tab.getLayout(), content);\n\t\t\t\t});\n\n\t\t\t\tDom.append(head, layout);\n\t\t\t\tDom.append(content, layout);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\t\tconst tabLayout = Tag.render`<div class=\"landing-ui-field-color-tabs-tab\">\n\t\t\t\t\t\t${tab.getTitle()}${tab.getLayout()}\n\t\t\t\t\t</div>`;\n\t\t\t\t\tDom.append(tabLayout, layout);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// events\n\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\tEvent.bind(tab.getTitle(), 'click', () => {\n\t\t\t\t\tif (!this.multiple)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.tabs.forEach((tab) => {\n\t\t\t\t\t\t\ttab.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttab.toggle();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn layout;\n\t\t});\n\t}\n}\n\nexport type TabOptions = {\n\tid: string,\n\ttitle: string,\n\titems: BaseControl[]\n}\n\nexport class Tab extends EventEmitter\n{\n\tid: string;\n\ttitle: string;\n\titems: BaseControl[];\n\n\tstatic SHOW_CLASS: string = 'show';\n\n\tconstructor(options: TabOptions)\n\t{\n\t\tsuper();\n\n\t\tthis.id = options.id;\n\t\tthis.title = options.title;\n\t\tthis.items = options.items;\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler\">\n\t\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler-icon\"></span>\n\t\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler-name\">${this.title}</span>\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-tabs-tab-content\">\n\t\t\t\t\t${this.items.map(item => item.getLayout())}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\ttoggle(): Tab\n\t{\n\t\tDom.toggleClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.toggleClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onToggle', {tab: this.title});\n\n\t\treturn this;\n\t}\n\n\tshow(): Tab\n\t{\n\t\tDom.addClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.addClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onShow', {tab: this.title});\n\n\t\treturn this;\n\t}\n\n\thide(): Tab\n\t{\n\t\tDom.removeClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.removeClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onHide', {tab: this.title});\n\n\t\treturn this;\n\t}\n}\n","import {Tag, Loc} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\n\nimport BaseProcessor from './base_processor';\nimport ColorSet from \"../control/color_set/color_set\";\nimport Opacity from \"../control/opacity/opacity\";\nimport Tabs from '../layout/tabs/tabs';\nimport Primary from '../layout/primary/primary';\n\nimport ColorValue from \"../color_value\";\nimport {IColorValue} from '../types/i_color_value';\n\nexport default class Color extends BaseProcessor\n{\n\tstatic PRIMARY_VAR: string = 'var(--primary)';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.Color');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--color';\n\t\tthis.className = 'g-color';\n\n\t\tthis.colorSet = new ColorSet(options);\n\t\tthis.colorSet.subscribe('onChange', this.onColorSetChange.bind(this));\n\t\tthis.colorSet.subscribe('onReset', this.onReset.bind(this));\n\n\t\tthis.opacity = new Opacity();\n\t\tthis.opacity.subscribe('onChange', this.onOpacityChange.bind(this));\n\n\t\tthis.primary = new Primary();\n\t\tthis.primary.subscribe('onChange', this.onPrimaryChange.bind(this));\n\n\t\tthis.tabs = new Tabs().appendTab('Opacity', Loc.getMessage('LANDING_FIELD_COLOR-TAB_OPACITY'), this.opacity);\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\treturn (\n\t\t\tvalue === null\n\t\t\t|| value === 'none'\n\t\t\t|| value === 'rgba(0, 0, 0, 0)'\n\t\t);\n\t}\n\n\tgetNullValue()\n\t{\n\t\treturn new ColorValue('rgba(0, 0, 0, 0)');\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-color\">\n\t\t\t\t${this.colorSet.getLayout()}\n\t\t\t\t${this.primary.getLayout()}\n\t\t\t\t${this.tabs.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.primary.unsetActive();\n\n\t\tconst color = event.getData().color;\n\t\tif (color !== null)\n\t\t{\n\t\t\tcolor.setOpacity(this.opacity.getValue().getOpacity());\n\t\t}\n\t\tthis.opacity.setValue(color);\n\n\t\tthis.onChange();\n\t}\n\n\tonOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tonPrimaryChange(event: BaseEvent)\n\t{\n\t\tthis.colorSet.setValue(event.getData().color);\n\t\tthis.onColorSetChange(event);\n\n\t\tthis.colorSet.unsetActive();\n\t\tthis.primary.setActive();\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.primary.unsetActive();\n\t}\n\n\tsetValue(value: ?string): void\n\t{\n\t\tconst valueObj = (value !== null) ? new ColorValue(value) : null;\n\n\t\tthis.colorSet.setValue(valueObj);\n\t\tthis.opacity.setValue(valueObj);\n\n\t\t// todo: what about opacity in primary?\n\t\tif (this.primary.isPrimaryValue(valueObj))\n\t\t{\n\t\t\tthis.primary.setActive();\n\t\t\tthis.colorSet.unsetActive();\n\t\t}\n\n\t\tif (value !== null && valueObj.getOpacity() < 1)\n\t\t{\n\t\t\tthis.tabs.showTab('Opacity');\n\t\t}\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst value = this.primary.isActive() ? this.primary.getValue() : this.colorSet.getValue();\n\n\t\t\treturn (value === null)\n\t\t\t\t? null\n\t\t\t\t: value.setOpacity(this.opacity.getValue().getOpacity());\n\t\t});\n\t}\n}\n","import Color from './color';\n\nexport default class ColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.ColorHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--color-hover';\n\t\tthis.className = 'g-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import {Event, Tag, Text, Dom, Loc} from 'main.core';\nimport {Popup, PopupManager} from 'main.popup';\nimport {BaseEvent} from \"main.core.events\";\nimport BaseControl from \"../base_control/base_control\";\nimport Colorpicker from \"../colorpicker/colorpicker\";\nimport Preset from '../../layout/preset/preset';\n\nimport './css/gradient.css';\nimport GradientValue from \"../../gradient_value\";\nimport ColorValue from '../../color_value';\n\nexport default class Gradient extends BaseControl\n{\n\tstatic DISABLE_CLASS = 'disable';\n\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\n\tpreset: ?Preset;\n\tcolorpickerFrom: Colorpicker;\n\tcolorpickerTo: Colorpicker;\n\n\t+ROTATE_STEP = 45;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Gradient');\n\t\tthis.popupId = 'gradient_popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.colorpickerFrom = new Colorpicker(options);\n\t\tthis.colorpickerFrom.subscribe('onChange', (event) => {\n\t\t\tthis.onColorChange(event.getData().color, null);\n\t\t});\n\n\t\tthis.colorpickerTo = new Colorpicker(options);\n\t\tthis.colorpickerTo.subscribe('onChange', (event) => {\n\t\t\tthis.onColorChange(null, event.getData().color);\n\t\t});\n\n\t\tEvent.bind(this.getPopupButton(), 'click', this.onPopupOpen.bind(this));\n\t\tEvent.bind(this.getRotateButton(), 'click', this.onRotate.bind(this));\n\t\tEvent.bind(this.getSwitchTypeButton(), 'click', this.onSwitchType.bind(this));\n\t\tEvent.bind(this.getSwapButton(), 'click', this.onSwap.bind(this));\n\n\t\tthis.preset = null;\n\t}\n\n\tonColorChange(fromValue: ?ColorValue, toValue: ?ColorValue)\n\t{\n\t\tif (fromValue === null && toValue === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst valueToSet = this.getValue() || new GradientValue();\n\t\tconst fromValueToSet = fromValue || valueToSet.getFrom() || (new GradientValue()).getFrom();\n\t\tconst toValueToSet = toValue || valueToSet.getTo() || (new GradientValue()).getTo();\n\t\tvalueToSet.setValue({\n\t\t\tfrom: fromValueToSet,\n\t\t\tto: toValueToSet,\n\t\t});\n\n\t\tthis.setValue(valueToSet);\n\t\tthis.preset.unsetActive();\n\t\tthis.onChange();\n\t}\n\n\tonPopupOpen()\n\t{\n\t\tthis.getPopup().toggle();\n\t}\n\n\tonRotate(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tvalue.setValue({\n\t\t\t\tangle: ((value.getAngle() + this.ROTATE_STEP) % 360),\n\t\t\t});\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonSwitchType(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (value.getType() === GradientValue.TYPE_LINEAR)\n\t\t\t{\n\t\t\t\tvalue.setValue({type: GradientValue.TYPE_RADIAL});\n\t\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalue.setValue({type: GradientValue.TYPE_LINEAR});\n\t\t\t\tGradient.enableButton(this.getRotateButton());\n\t\t\t}\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonSwap(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tvalue.setValue({\n\t\t\t\tto: value.getFrom(),\n\t\t\t\tfrom: value.getTo(),\n\t\t\t});\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tstatic disableButton(button: HTMLDivElement)\n\t{\n\t\tDom.addClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tstatic enableButton(button: HTMLDivElement)\n\t{\n\t\tDom.removeClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tstatic isButtonEnable(button: HTMLDivElement)\n\t{\n\t\treturn !Dom.hasClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tcorrectColorpickerColors()\n\t{\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tconst angle = value.getAngle();\n\t\t\tconst hexFrom = this.colorpickerFrom.getHexPreviewObject();\n\t\t\tconst hexTo = this.colorpickerTo.getHexPreviewObject();\n\t\t\tconst colorFrom = value.getFrom();\n\t\t\tconst colorTo = value.getTo();\n\t\t\tif (value.getType() === GradientValue.TYPE_LINEAR)\n\t\t\t{\n\t\t\t\tif (angle === 270 || angle === 90)\n\t\t\t\t{\n\t\t\t\t\tconst median = ColorValue.getMedian(colorFrom, colorTo).getContrast().getHex();\n\t\t\t\t\thexFrom.adjustColors(median, 'transparent');\n\t\t\t\t\thexTo.adjustColors(median, 'transparent');\n\t\t\t\t}\n\t\t\t\telse if (angle >= 135 && angle <= 225)\n\t\t\t\t{\n\t\t\t\t\thexFrom.adjustColors(colorFrom.getContrast().getHex(), 'transparent');\n\t\t\t\t\thexTo.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thexFrom.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\t\thexTo.adjustColors(colorFrom.getContrast().getHex(), 'transparent');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (value.getType() === GradientValue.TYPE_RADIAL)\n\t\t\t{\n\t\t\t\thexFrom.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\thexTo.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'landing-ui-field-color-gradient-preset-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.getPopupButton(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: {offset: -5},\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 7,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupContent(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-preset-popup-container\">\n\t\t\t\t\t${this.getRotateButton()}\n\t\t\t\t\t${this.getSwapButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tif (this.preset)\n\t\t{\n\t\t\tDom.clean(this.getPresetContainer());\n\t\t\tDom.append(this.preset.getLayout(), this.getPresetContainer());\n\t\t}\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-gradient\">\n\t\t\t\t${this.getPresetContainer()}\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-container\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-from\">${this.colorpickerFrom.getLayout()}</div>\n\t\t\t\t\t${this.getPopupButton()}\n\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-to\">${this.colorpickerTo.getLayout()}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-switch-type-container\">\n\t\t\t\t\t${this.getSwitchTypeButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContainerLayout(): HTMLDivElement\n\t{\n\t\t// todo: do better after change vyorstka\n\t\treturn this.getLayout().querySelector('.landing-ui-field-color-gradient-container');\n\t}\n\n\tgetPresetContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('presetContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-gradient-preset-container\"></div>`;\n\t\t});\n\t}\n\n\tgetPopupButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupButton', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-field-color-gradient-open-popup\"></span>`;\n\t\t});\n\t}\n\n\tgetSwitchTypeButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('switchTypeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-switch-type\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_SWITCH_TYPE')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tgetRotateButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('rotateButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-rotate\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_ROTATE')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tgetSwapButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('swapButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-swap\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_SWAP')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tsetPreset(preset: Preset)\n\t{\n\t\tthis.preset = preset;\n\t\tthis.preset.unsetActive();\n\t\tthis.preset.subscribe('onChange', (event) => {\n\t\t\tthis.setValue(event.getData().color);\n\t\t\tthis.unsetColorpickerActive();\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tDom.clean(this.getPresetContainer());\n\t\tDom.append(preset.getLayout(), this.getPresetContainer());\n\t}\n\n\tgetPreset(): ?Preset\n\t{\n\t\treturn this.preset;\n\t}\n\n\tgetValue(): ?GradientValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (\n\t\t\t\tthis.colorpickerFrom.getValue() === null\n\t\t\t\t|| this.colorpickerTo.getValue() === null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet rotate = this.getRotateButton().dataset.rotate;\n\t\t\trotate = rotate ? Text.toNumber(rotate) : 0;\n\t\t\tconst type = this.getSwitchTypeButton().dataset.type || GradientValue.TYPE_LINEAR;\n\n\t\t\treturn new GradientValue({\n\t\t\t\tfrom: this.colorpickerFrom.getValue(),\n\t\t\t\tto: this.colorpickerTo.getValue(),\n\t\t\t\tangle: rotate,\n\t\t\t\ttype: type,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetValue(value: ?GradientValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif (value === null)\n\t\t{\n\t\t\tthis.colorpickerFrom.setValue(null);\n\t\t\tthis.colorpickerTo.setValue(null);\n\n\t\t\tthis.unsetActive();\n\n\t\t\tDom.style(this.getContainerLayout(), 'background', (new GradientValue).getStyleString());\n\n\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\tGradient.disableButton(this.getSwitchTypeButton());\n\t\t\tGradient.disableButton(this.getSwapButton());\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// todo: how set default type and rotation?\n\t\t\tthis.colorpickerFrom.setValue(value.getFrom());\n\t\t\tthis.colorpickerTo.setValue(value.getTo());\n\t\t\tthis.correctColorpickerColors();\n\n\t\t\tthis.getRotateButton().dataset.rotate = value.getAngle();\n\t\t\tthis.getSwitchTypeButton().dataset.type = value.getType();\n\n\t\t\tDom.style(this.getRotateButton(), 'transform', `rotate(${value.getAngle()}deg)`);\n\t\t\tDom.style(this.getContainerLayout(), 'background', this.getValue().getStyleString());\n\n\t\t\tGradient.enableButton(this.getSwitchTypeButton());\n\t\t\tGradient.enableButton(this.getSwapButton());\n\t\t\tif (value.getType() === GradientValue.TYPE_RADIAL)\n\t\t\t{\n\t\t\t\tGradient.disableButton(this.getRotateButton())\n\t\t\t\tthis.getSwitchTypeButton().innerText = Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_DO_LINEAR');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tGradient.enableButton(this.getRotateButton());\n\t\t\t\tthis.getSwitchTypeButton().innerText = Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_DO_RADIAL');\n\t\t\t}\n\n\t\t\tthis.setActive();\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {gradient: this.getValue()});\n\t}\n\n\tsetActive(): void\n\t{\n\t\tconst value = this.getValue();\n\t\tif (this.preset.isPresetValue(value))\n\t\t{\n\t\t\tthis.preset.setActiveValue(value);\n\t\t\tthis.unsetColorpickerActive();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.setColorpickerActive();\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.preset.unsetActive();\n\t\tthis.unsetColorpickerActive();\n\t}\n\n\tsetColorpickerActive(): void\n\t{\n\t\tDom.addClass(this.getContainerLayout(), Gradient.ACTIVE_CLASS);\n\t}\n\n\tunsetColorpickerActive(): void\n\t{\n\t\tthis.colorpickerFrom.unsetActive();\n\t\tthis.colorpickerTo.unsetActive();\n\t\tDom.removeClass(this.getContainerLayout(), Gradient.ACTIVE_CLASS);\n\t}\n}\n","import {Type, Loc} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport isHex from '../internal/is-hex';\nimport isRgbString from '../internal/is-rgb-string';\nimport isHslString from '../internal/is-hsl-string';\nimport isGradientString from '../internal/is-gradient-string';\nimport {isCssVar} from '../internal/css-var';\n\nimport Color from \"./color\";\nimport Gradient from \"../control/gradient/gradient\";\nimport Preset from '../layout/preset/preset';\n\nimport GradientValue from \"../gradient_value\";\nimport {IColorValue} from '../types/i_color_value';\nimport Opacity from '../control/opacity/opacity';\n\nexport default class BgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColor');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg';\n\t\tthis.className = 'g-bg';\n\n\t\tthis.activeControl = null;\n\n\t\tthis.gradient = new Gradient(options);\n\t\tthis.gradient.subscribe('onChange', this.onGradientChange.bind(this));\n\t\tthis.tabs.prependTab('Gradient', Loc.getMessage('LANDING_FIELD_COLOR-TAB_GRADIENT'), this.gradient);\n\n\t\tthis.setGradientPreset(this.colorSet.getPreset());\n\t\tthis.colorSet.subscribe('onPresetChange', (event) => {\n\t\t\tthis.setGradientPreset(event.getData().preset);\n\t\t});\n\n\t\tthis.tabs.subscribe('onToggle', this.onTabsToggle.bind(this));\n\t}\n\n\tsetGradientPreset(preset: Preset)\n\t{\n\t\tconst gradientPreset = preset.getGradientPreset();\n\t\tthis.gradient.setPreset(gradientPreset);\n\t\tgradientPreset.subscribe('onChange', () => {\n\t\t\tthis.activeControl = this.gradient;\n\t\t\tthis.onChange();\n\t\t});\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null && value instanceof GradientValue)\n\t\t{\n\t\t\tif (this.gradient.getPreset().isPresetValue(value))\n\t\t\t{\n\t\t\t\tthis.colorSet.getPreset().unsetActive();\n\t\t\t\tthis.gradient.getPreset().setActiveValue(value);\n\t\t\t\tthis.gradient.unsetColorpickerActive();\n\t\t\t}\n\t\t}\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.activeControl = this.colorSet;\n\t\tthis.gradient.unsetActive();\n\n\t\tsuper.onColorSetChange(event);\n\t}\n\n\tonGradientChange(event: BaseEvent)\n\t{\n\t\tthis.activeControl = this.gradient;\n\t\tthis.colorSet.unsetActive();\n\n\t\tconst gradValue = event.getData().gradient;\n\t\tif (gradValue !== null)\n\t\t{\n\t\t\tthis.opacity.setValue(\n\t\t\t\tgradValue.setOpacity(this.opacity.getValue().getOpacity()),\n\t\t\t);\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\tonOverlayOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tonTabsToggle()\n\t{\n\t\tthis.gradient.getPopup().close();\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.gradient.unsetActive();\n\t\tthis.primary.unsetActive();\n\t}\n\n\tsetValue(value: ?string): void\n\t{\n\t\tthis.colorSet.setValue(null);\n\t\tthis.gradient.setValue(null);\n\t\tthis.unsetActive();\n\n\t\tthis.activeControl = null;\n\n\t\tif (Type.isNull(value))\n\t\t{\n\t\t\t// todo: set NULL for gradient or opacity?\n\t\t}\n\t\telse if (\n\t\t\tisRgbString(value)\n\t\t\t|| isHex(value)\n\t\t\t|| isHslString(value)\n\t\t\t|| isCssVar(value)\n\t\t)\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tthis.activeControl = this.colorSet;\n\t\t}\n\t\telse if (isGradientString(value))\n\t\t{\n\t\t\tthis.activeControl = this.gradient;\n\n\t\t\tconst gradientValue = new GradientValue(value);\n\t\t\tthis.gradient.setValue(gradientValue);\n\t\t\tthis.opacity.setValue(gradientValue);\n\n\t\t\tconst presets = this.colorSet.getPresetsCollection();\n\t\t\tconst activePreset = presets.getGlobalActiveId()\n\t\t\t\t? presets.getPresetById(presets.getGlobalActiveId())\n\t\t\t\t: presets.getPresetByItemValue(gradientValue);\n\t\t\tif (activePreset !== null && activePreset !== this.colorSet.getPreset())\n\t\t\t{\n\t\t\t\tthis.colorSet.setPreset(activePreset);\n\t\t\t\tthis.setGradientPreset(activePreset);\n\t\t\t}\n\n\t\t\tthis.tabs.showTab('Gradient');\n\t\t\tif (gradientValue.getOpacity() < 1)\n\t\t\t{\n\t\t\t\tthis.tabs.showTab('Opacity');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (this.activeControl === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (this.activeControl === this.gradient)\n\t\t\t{\n\t\t\t\tconst gradValue = this.gradient.getValue();\n\t\t\t\treturn (gradValue === null)\n\t\t\t\t\t? gradValue\n\t\t\t\t\t: gradValue.setOpacity(this.opacity.getValue().getOpacity());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn super.getValue();\n\t\t\t}\n\t\t});\n\t}\n}\n","import {matcherGradient} from './is-gradient-string';\nimport {regexpToString} from './regexp';\n\nexport const matcherBgImage = /url\\(['\"]?([^ '\"]*)['\"]?\\)([\\w \\/]*)/i;\n\nexport default function isBgImageString(bgImage: string)\n{\n\tif (!!bgImage.trim().match(matcherBgImage))\n\t{\n\t\treturn true;\n\t}\n\n\treturn !!bgImage.trim().match(getMatcherWithOverlay());\n}\n\nfunction getMatcherWithOverlay(): RegExp\n{\n\tconst matcherBgString = regexpToString(matcherBgImage);\n\tconst matcherGradientString = regexpToString(matcherGradient);\n\treturn new RegExp(`^${matcherGradientString},${matcherBgString}`);\n}\n\n","import {Type, Loc} from 'main.core';\n\nimport {\n\tBgImageValueOptions,\n\tdefaultBgImageValueOptions,\n\tdefaultBgImageSize,\n\tdefaultBgImageAttachment,\n} from \"./types/color_value_options\";\nimport {IColorValue} from './types/i_color_value';\n\nimport isBgImageString, {matcherBgImage} from './internal/is-bg-image-string';\nimport {matcherGradient, matcherGradientColors} from './internal/is-gradient-string';\nimport {regexpWoStartEnd} from './internal/regexp';\n\nimport ColorValue from './color_value';\n\nexport default class BgImageValue implements IColorValue\n{\n\tvalue: BgImageValueOptions;\n\n\tconstructor(value: BgImageValueOptions | BgImageValue | string)\n\t{\n\t\t// todo: add 2x, file ids\n\t\tthis.value = defaultBgImageValueOptions;\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn `\n\t\t\t${this.value.url.replace(/[^\\w\\d]/g, '')}_${this.value.size}_${this.value.attachment}\n\t\t`;\n\t}\n\n\tsetValue(value: BgImageValueOptions | BgImageValue | string): BgImageValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof BgImageValue)\n\t\t\t{\n\t\t\t\t// todo: add 2x and file IDs\n\t\t\t\tthis.value.url = value.getUrl();\n\t\t\t\tthis.value.url2x = value.getUrl2x();\n\t\t\t\tthis.value.fileId = value.getFileId();\n\t\t\t\tthis.value.fileId2x = value.getFileId2x();\n\t\t\t\tthis.value.size = value.getSize();\n\t\t\t\tthis.value.attachment = value.getAttachment();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.value = {...this.value, ...value};\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isString(value) && isBgImageString(value))\n\t\t{\n\t\t\tthis.parseBgString(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tparseBgString(string: string): void\n\t{\n\t\t// todo: check matcher for 2x\n\t\tconst options = defaultBgImageValueOptions;\n\n\t\tconst matchesBg = string.trim().match(regexpWoStartEnd(matcherBgImage));\n\t\tif (!!matchesBg)\n\t\t{\n\t\t\toptions.url = matchesBg[1];\n\n\t\t\toptions.size = matchesBg[2].indexOf('auto') === -1\n\t\t\t\t? defaultBgImageSize\n\t\t\t\t: 'auto'\n\t\t\t;\n\n\t\t\toptions.attachment = matchesBg[2].indexOf('fixed') === -1\n\t\t\t\t? defaultBgImageAttachment\n\t\t\t\t: 'fixed'\n\t\t\t;\n\t\t}\n\n\t\tconst matchesOverlay = string.trim().match(regexpWoStartEnd(matcherGradientColors));\n\t\tif(!!string.trim().match(regexpWoStartEnd(matcherGradient)) && !!matchesOverlay)\n\t\t{\n\t\t\toptions.overlay = new ColorValue(matchesOverlay[0]);\n\t\t}\n\n\t\tthis.setValue(options);\n\t}\n\n\tsetOpacity(opacity: number): BgImageValue\n\t{\n\t\t// todo: what for image?\n\n\t\treturn this;\n\t}\n\n\tsetUrl(value: string): BgImageValue\n\t{\n\t\tthis.setValue({url: value});\n\t\treturn this;\n\t}\n\n\tsetUrl2x(value: string): BgImageValue\n\t{\n\t\tthis.setValue({url2x: value});\n\t\treturn this;\n\t}\n\n\tsetFileId(value: number): BgImageValue\n\t{\n\t\tthis.setValue({fileId: value});\n\t\treturn this;\n\t}\n\n\tsetFileId2x(value: number): BgImageValue\n\t{\n\t\tthis.setValue({fileId2x: value});\n\t\treturn this;\n\t}\n\n\tsetSize(value: 'cover' | 'auto'): BgImageValue\n\t{\n\t\tthis.setValue({size: value});\n\t\treturn this;\n\t}\n\n\tsetAttachment(value: 'scroll' | 'fixed'): BgImageValue\n\t{\n\t\tthis.setValue({attachment: value});\n\t\treturn this;\n\t}\n\n\tsetOverlay(value: ColorValue)\n\t{\n\t\tthis.setValue({overlay: value});\n\t\treturn this;\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.value.url;\n\t}\n\n\tgetUrl2x(): ?string\n\t{\n\t\treturn this.value.url2x;\n\t}\n\n\tgetFileId(): number\n\t{\n\t\treturn this.value.fileId;\n\t}\n\n\tgetFileId2x(): ?number\n\t{\n\t\treturn this.value.fileId2x;\n\t}\n\n\tgetSize(): 'cover' | 'auto'\n\t{\n\t\treturn this.value.size;\n\t}\n\n\tgetAttachment(needBool: boolean = false): string | boolean\n\t{\n\t\treturn needBool\n\t\t\t? this.value.attachment === 'fixed'\n\t\t\t: this.value.attachment;\n\t}\n\n\tgetOverlay(): ColorValue\n\t{\n\t\treturn this.value.overlay;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\t// todo: how image can have opacity?\n\t\treturn 1;\n\t}\n\n\tgetStyleString(): string\n\t{\n\t\tlet style = '';\n\t\tif (this.value.overlay !== null)\n\t\t{\n\t\t\tstyle = `linear-gradient(${this.value.overlay.getStyleString()},${this.value.overlay.getStyleString()})`;\n\t\t}\n\n\t\t// todo: what if url is null\n\t\tconst {url, url2x, size, attachment} = this.value;\n\t\tconst endString = `center / ${size} ${attachment}`;\n\t\tif (url !== null)\n\t\t{\n\t\t\tstyle = style.length ? (style + ',') : '';\n\t\t\tif(url2x !== null)\n\t\t\t{\n\t\t\t\tstyle += `-webkit-image-set(url('${url}') 1x, url('${url2x}') 2x) ${endString},`;\n\t\t\t\tstyle += `image-set(url('${url}') 1x, url('${url2x}') 2x) ${endString},`;\n\t\t\t}\n\t\t\tstyle += `url('${url}') ${endString}`;\n\t\t}\n\n\t\treturn style;\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\t// todo: how image can have opacity?\n\t\treturn '';\n\t}\n\n\tstatic getSizeItemsForButtons(): []\n\t{\n\t\treturn [\n\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_COVER'), value: 'cover'},\n\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_MOSAIC'), value: 'auto'},\n\t\t];\n\t}\n\n\tstatic getAttachmentValueByBool(value: boolean): string\n\t{\n\t\treturn value ? 'fixed' : 'scroll';\n\t}\n}\n","import {BaseEvent} from 'main.core.events';\nimport {Dom, Tag, Type, Loc, Text} from 'main.core';\n\nimport {Backend} from 'landing.backend';\nimport {PageObject} from 'landing.pageobject';\nimport BaseControl from \"../base_control/base_control\";\nimport BgImageValue from '../../bg_image_value';\nimport './css/image.css';\n\nexport default class Image extends BaseControl\n{\n\toptions: {\n\t\tblock: BX.Landing.Block,\n\t\tstyleNode: BX.Landing.UI.Style,\n\t\tcontentRoot: ?HTMLDivElement,\n\t\tselector: string,\n\t};\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Image');\n\t\tthis.options = options;\n\n\t\t// todo: set dimensions from block\n\t\tconst rootWindow = PageObject.getRootWindow();\n\t\tthis.imgField = new rootWindow.BX.Landing.UI.Field.Image({\n\t\t\tid: 'landing_ui_color_image_' + Text.getRandom().toLowerCase(),\n\t\t\tclassName: 'landing-ui-field-color-image-image',\n\t\t\tcompactMode: true,\n\t\t\tdisableLink: true,\n\t\t\t// selector: options.selector,\n\t\t\tdisableAltField: true,\n\t\t\tallowClear: true,\n\t\t\tdimensions: {width: 1920},\n\t\t\tuploadParams: {\n\t\t\t\taction: \"Block::uploadFile\",\n\t\t\t\tblock: this.options.block.id,\n\t\t\t},\n\t\t\tcontentRoot: this.options.contentRoot,\n\t\t});\n\t\tthis.imgField.subscribe('change', this.onImageChange.bind(this));\n\n\t\tthis.sizeField = new BX.Landing.UI.Field.Dropdown({\n\t\t\t// todo: need commented fields?\n\t\t\tid: 'landing_ui_color_image_size_' + Text.getRandom().toLowerCase(),\n\t\t\t// title: 'size field title',\n\t\t\t// description: 'ButtonGroup size description',\n\t\t\ttitle: Loc.getMessage('LANDING_FIELD_COLOR-BG_SIZE_TITLE'),\n\t\t\tclassName: 'landing-ui-field-color-image-size',\n\t\t\t// selector: this.options.selector,\n\t\t\titems: BgImageValue.getSizeItemsForButtons(),\n\t\t\tonChange: this.onSizeChange.bind(this),\n\t\t\tcontentRoot: this.options.contentRoot,\n\t\t});\n\n\t\tthis.attachmentField = new BX.Landing.UI.Field.Checkbox({\n\t\t\t// todo: need commented fields?\n\t\t\tid: 'landing_ui_color_image_attach_' + Text.getRandom().toLowerCase(),\n\t\t\tclassName: 'landing-ui-field-color-image-attachment',\n\t\t\t// title: 'attachement field title',\n\t\t\t// description: 'ButtonGroup size description',\n\t\t\tmultiple: false,\n\t\t\tcompact: true,\n\t\t\t// selector: options.selector,\n\t\t\titems: [\n\t\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_FIXED'), value: true},\n\t\t\t],\n\t\t\tonChange: this.onAttachmentChange.bind(this),\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-image\">\n\t\t\t\t${this.imgField.getLayout()}\n\t\t\t\t${this.sizeField.getLayout()}\n\t\t\t\t${this.attachmentField.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonImageChange(event: BaseEvent)\n\t{\n\t\tconst value = this.getValue() || new BgImageValue();\n\t\tif (event.getData().value.src)\n\t\t{\n\t\t\tvalue.setUrl(event.getData().value.src);\n\t\t\tvalue.setFileId(event.getData().value.id);\n\t\t\tif (event.getData().value.src2x)\n\t\t\t{\n\t\t\t\tvalue.setUrl2x(event.getData().value.src2x);\n\t\t\t\tvalue.setFileId2x(event.getData().value.id2x);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvalue.setUrl(null);\n\t\t\tvalue.setFileId(null);\n\t\t\tvalue.setUrl2x(null);\n\t\t\tvalue.setFileId2x(null);\n\t\t}\n\n\t\tthis.setValue(value);\n\t\tthis.onChange();\n\n\t\tthis.saveNode(value);\n\t}\n\n\tsaveNode(value: BgImageValue)\n\t{\n\t\tconst style = this.options.styleNode;\n\t\tconst block = this.options.block;\n\n\t\tlet selector;\n\t\tif (\n\t\t\tstyle.selector === block.selector\n\t\t\t|| style.selector === block.makeAbsoluteSelector(block.selector)\n\t\t)\n\t\t{\n\t\t\tselector = '#wrapper';\n\t\t}\n\t\telse if (!style.isSelectGroup())\n\t\t{\n\t\t\tselector = BX.Landing.Utils.join(\n\t\t\t\tstyle.selector.split(\"@\")[0],\n\t\t\t\t\"@\",\n\t\t\t\tstyle.getElementIndex(style.getNode()[0])\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselector = style.selector.split(\"@\")[0];\n\t\t}\n\n\t\tconst data = {[selector]: {}};\n\t\tdata[selector].id = value.getFileId() || -1;\n\t\tdata[selector].id2x = value.getFileId2x() || -1;\n\n\t\tBackend.getInstance()\n\t\t\t.action(\n\t\t\t\t\"Landing\\\\Block::updateNodes\",\n\t\t\t\t{\n\t\t\t\t\tblock: this.options.block.id,\n\t\t\t\t\tdata: data,\n\t\t\t\t},\n\t\t\t)\n\t}\n\n\tonSizeChange(size: string)\n\t{\n\t\tif (Type.isString(size))\n\t\t{\n\t\t\tconst value = this.getValue() || new BgImageValue();\n\t\t\tvalue.setSize(size);\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tonAttachmentChange(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tconst value = this.getValue() || new BgImageValue();\n\t\t\tvalue.setAttachment(\n\t\t\t\tBgImageValue.getAttachmentValueByBool(this.attachmentField.getValue()),\n\t\t\t);\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {data: {image: this.getValue()}});\n\t}\n\n\tgetValue(): ?BgImageValue\n\t{\n\t\t// todo: get size and attachement from controls\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst imgValue = this.imgField.getValue();\n\t\t\tconst url = imgValue.src;\n\t\t\tif (url === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst value = new BgImageValue({\n\t\t\t\t\turl: url,\n\t\t\t\t\tfileId: imgValue.id,\n\t\t\t\t});\n\t\t\t\tif (imgValue.src2x)\n\t\t\t\t{\n\t\t\t\t\tvalue.setUrl2x(imgValue.src2x);\n\t\t\t\t\tvalue.setFileId2x(imgValue.fileId2x);\n\t\t\t\t}\n\t\t\t\tconst size = this.sizeField.getValue();\n\t\t\t\tif (size !== null)\n\t\t\t\t{\n\t\t\t\t\tvalue.setSize(size);\n\t\t\t\t}\n\n\t\t\t\tvalue.setAttachment(BgImageValue.getAttachmentValueByBool(this.attachmentField.getValue()));\n\n\t\t\t\t// todo: set overlay\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\n\tsetValue(value: ?BgImageValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\t// todo: can delete prev image\n\t\t\tsuper.setValue(value);\n\n\t\t\tif (value === null)\n\t\t\t{\n\t\t\t\tthis.imgField.setValue({src: ''}, true);\n\t\t\t\t// todo: what set size and attachement?\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (value.getUrl() !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.setActive();\n\t\t\t\t}\n\n\t\t\t\tconst imgFieldValue = {\n\t\t\t\t\ttype: 'image',\n\t\t\t\t\tsrc: value.getUrl(),\n\t\t\t\t\tid: value.getFileId(),\n\t\t\t\t};\n\t\t\t\tif (value.getUrl2x())\n\t\t\t\t{\n\t\t\t\t\timgFieldValue.src2x = value.getUrl2x();\n\t\t\t\t\timgFieldValue.id2x = value.getFileId2x();\n\t\t\t\t}\n\t\t\t\tthis.imgField.setValue(imgFieldValue, true);\n\t\t\t\tthis.sizeField.setValue(value.getSize(), true);\n\t\t\t\tthis.attachmentField.setValue([value.getAttachment(true)]);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.imgField.getLayout(), Image.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.imgField.getLayout(), Image.ACTIVE_CLASS);\n\t}\n}\n","import {Tag, Type, Loc} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport BgColor from './bg_color';\nimport Image from '../control/image/image';\nimport ColorSet from '../control/color_set/color_set';\n\nimport ColorValue from \"../color_value\";\nimport BgImageValue from '../bg_image_value';\nimport {IColorValue} from '../types/i_color_value';\nimport Opacity from '../control/opacity/opacity';\nimport Tabs from '../layout/tabs/tabs';\nimport GradientValue from '../gradient_value';\nimport Preset from '../layout/preset/preset';\n\nexport default class Bg extends BgColor\n{\n\tstatic BG_URL_VAR: string = '--bg-url';\n\tstatic BG_URL_2X_VAR: string = '--bg-url-2x';\n\tstatic BG_OVERLAY_VAR: string = '--bg-overlay';\n\tstatic BG_SIZE_VAR: string = '--bg-size';\n\tstatic BG_ATTACHMENT_VAR: string = '--bg-attachment';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.Bg');\n\t\tthis.parentVariableName = this.variableName;\n\t\tthis.variableName = [\n\t\t\tthis.parentVariableName,\n\t\t\tBg.BG_URL_VAR,\n\t\t\tBg.BG_URL_2X_VAR,\n\t\t\tBg.BG_OVERLAY_VAR,\n\t\t\tBg.BG_SIZE_VAR,\n\t\t\tBg.BG_ATTACHMENT_VAR,\n\t\t];\n\t\tthis.parentClassName = this.className;\n\t\tthis.className = 'g-bg-image';\n\n\t\tthis.image = new Image(options);\n\t\tthis.image.subscribe('onChange', this.onImageChange.bind(this));\n\n\t\tthis.overlay = new ColorSet(options);\n\t\tthis.overlay.subscribe('onChange', this.onOverlayChange.bind(this));\n\t\tthis.overlayOpacity = new Opacity({defaultOpacity: 0.5});\n\t\tthis.overlayOpacity.subscribe('onChange', this.onOverlayOpacityChange.bind(this));\n\n\t\tthis.imageTabs = new Tabs().appendTab(\n\t\t\t'Overlay',\n\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_OVERLAY'),\n\t\t\t[this.overlay, this.overlayOpacity],\n\t\t);\n\n\t\tthis.bigTabs = new Tabs()\n\t\t\t.setBig(true)\n\t\t\t.appendTab(\n\t\t\t\t'Color',\n\t\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_COLOR'),\n\t\t\t\t[this.colorSet, this.primary, this.tabs],\n\t\t\t)\n\t\t\t.appendTab(\n\t\t\t\t'Image',\n\t\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_IMAGE'),\n\t\t\t\t[this.image, this.imageTabs],\n\t\t\t);\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-color\">\n\t\t\t\t${this.bigTabs.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.image.unsetActive();\n\t\tthis.overlay.unsetActive();\n\n\t\tsuper.onColorSetChange(event);\n\t}\n\n\tonGradientChange(event: BaseEvent)\n\t{\n\t\tthis.image.unsetActive();\n\t\tthis.overlay.unsetActive();\n\n\t\tsuper.onGradientChange(event);\n\t}\n\n\tonImageChange()\n\t{\n\t\t// todo: can drop image from b_landing_file after change\n\t\tthis.unsetActive();\n\n\t\tthis.activeControl = this.image;\n\t\tthis.image.setActive();\n\n\t\tthis.onChange();\n\t}\n\n\tonOverlayChange(event: BaseEvent)\n\t{\n\t\tconst overlayValue = event.getData().color;\n\t\tif (overlayValue !== null)\n\t\t{\n\t\t\toverlayValue.setOpacity(this.overlayOpacity.getValue().getOpacity());\n\t\t}\n\t\tthis.overlayOpacity.setValue(overlayValue);\n\n\t\tconst imageValue = this.image.getValue();\n\t\tif (imageValue !== null)\n\t\t{\n\t\t\tthis.image.setValue(imageValue.setOverlay(overlayValue));\n\t\t\tthis.activeControl = this.image;\n\t\t\tthis.image.setActive();\n\t\t\tthis.colorSet.unsetActive();\n\t\t\tthis.gradient.unsetActive();\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\tonOverlayOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tunsetActive()\n\t{\n\t\tsuper.unsetActive();\n\t\tthis.image.unsetActive();\n\t}\n\n\t/**\n\t * Set value by new format\n\t */\n\tsetProcessorValue(value: {string: string}): void\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.setValue(value);\n\t}\n\n\tsetValue(value: {string: string} | string | null): void\n\t{\n\t\tthis.image.setValue(null);\n\t\tthis.bigTabs.showTab('Color');\n\n\t\tif (Type.isNull(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t}\n\t\telse if (Type.isString(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t}\n\t\telse if (this.parentVariableName in value && Type.isString(value[this.parentVariableName]))\n\t\t{\n\t\t\tsuper.setValue(value[this.parentVariableName]);\n\t\t}\n\t\telse if (Type.isObject(value))\n\t\t{\n\t\t\t// todo: super.setValue null?\n\t\t\tconst bgValue = new BgImageValue();\n\t\t\tif (Bg.BG_URL_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setUrl(value[Bg.BG_URL_VAR].replace(/url\\([\"']/i, '').replace(/['\"]\\)/i, ''));\n\t\t\t}\n\t\t\tif (Bg.BG_URL_2X_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setUrl2x(value[Bg.BG_URL_2X_VAR].replace(/url\\([\"']/i, '').replace(/['\"]\\)/i, ''));\n\t\t\t}\n\t\t\tif (Bg.BG_SIZE_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setSize(value[Bg.BG_SIZE_VAR]);\n\t\t\t}\n\t\t\tif (Bg.BG_ATTACHMENT_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setAttachment(value[Bg.BG_ATTACHMENT_VAR]);\n\t\t\t}\n\t\t\tif (Bg.BG_OVERLAY_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setOverlay(new ColorValue(value[Bg.BG_OVERLAY_VAR]));\n\t\t\t}\n\n\t\t\tthis.image.setValue(bgValue);\n\t\t\tthis.bigTabs.showTab('Image');\n\t\t\tthis.activeControl = this.image;\n\n\t\t\tif (Bg.BG_OVERLAY_VAR in value)\n\t\t\t{\n\t\t\t\tconst overlayValue = new ColorValue(value[Bg.BG_OVERLAY_VAR]);\n\t\t\t\tthis.overlay.setValue(overlayValue);\n\t\t\t\tthis.overlayOpacity.setValue(overlayValue);\n\t\t\t\tthis.imageTabs.showTab('Overlay');\n\t\t\t}\n\t\t}\n\t}\n\n\t// todo: create base value instead interface. In this case can return ALL types, color, grad, bg\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (this.activeControl === this.image)\n\t\t\t{\n\t\t\t\tconst imageValue = this.image.getValue();\n\t\t\t\tconst overlayValue = this.overlay.getValue();\n\t\t\t\tif (imageValue !== null && this.overlay.isActive() && overlayValue !== null)\n\t\t\t\t{\n\t\t\t\t\toverlayValue.setOpacity(this.overlayOpacity.getValue().getOpacity());\n\t\t\t\t\timageValue.setOverlay(overlayValue);\n\t\t\t\t}\n\n\t\t\t\treturn imageValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn super.getValue();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetClassName(): [string]\n\t{\n\t\tconst value = this.getValue();\n\t\tif (value === null || value instanceof ColorValue || value instanceof GradientValue)\n\t\t{\n\t\t\treturn [this.parentClassName];\n\t\t}\n\n\t\treturn [this.className];\n\t}\n\n\t// todo: what about fileid?\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\t// todo: not null, but what?\n\t\t\treturn {\n\t\t\t\t[this.parentVariableName]: null,\n\t\t\t\t[Bg.BG_URL_VAR]: null,\n\t\t\t\t[Bg.BG_URL_2X_VAR]: null,\n\t\t\t\t[Bg.BG_OVERLAY_VAR]: null,\n\t\t\t\t[Bg.BG_SIZE_VAR]: null,\n\t\t\t\t[Bg.BG_ATTACHMENT_VAR]: null,\n\t\t\t};\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tlet color = null;\n\t\tlet image = null;\n\t\tlet image2x = null;\n\t\tlet overlay = null;\n\t\t// let size = 'cover';\n\t\tlet size = null;\n\t\t// let attachment = 'scroll';\n\t\tlet attachment = null;\n\t\tif (value instanceof ColorValue || value instanceof GradientValue)\n\t\t{\n\t\t\t// todo: need change class if not a image?\n\t\t\tcolor = value.getStyleString();\n\t\t}\n\t\telse\n\t\t{\n\t\t\timage = value.getUrl() ? `url('${value.getUrl()}')` : '';\n\t\t\timage2x = value.getUrl2x() ? `url('${value.getUrl2x()}')` : '';\n\t\t\toverlay = value.getOverlay() ? value.getOverlay().getStyleString() : 'rgba(0, 0, 0, 0)';\n\t\t\tsize = value.getSize();\n\t\t\tattachment = value.getAttachment();\n\t\t}\n\n\t\treturn {\n\t\t\t[this.parentVariableName]: color,\n\t\t\t[Bg.BG_URL_VAR]: image,\n\t\t\t[Bg.BG_URL_2X_VAR]: image2x,\n\t\t\t[Bg.BG_OVERLAY_VAR]: overlay,\n\t\t\t[Bg.BG_SIZE_VAR]: size,\n\t\t\t[Bg.BG_ATTACHMENT_VAR]: attachment,\n\t\t};\n\t}\n}\n","import Color from \"./color\";\n\nexport default class BorderColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColor');\n\t\tthis.property = 'border-color';\n\t\tthis.variableName = '--border-color';\n\t\tthis.className = 'g-border-color';\n\t}\n}","import Color from \"./color\";\n\nexport default class BorderColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColorHover');\n\t\tthis.property = 'border-color';\n\t\tthis.variableName = '--border-color--hover';\n\t\tthis.className = 'g-border-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import BgColor from './bg_color';\n\nexport default class BgColorHover extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorHover');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg-hover';\n\t\tthis.className = 'g-bg--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import BgColor from './bg_color';\n\nimport ColorValue from '../color_value';\n\nexport default class BgColorAfter extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorAfter');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg--after';\n\t\tthis.className = 'g-bg--after';\n\t\tthis.pseudoClass = ':after';\n\n\t\tconst opacityValue = this.getValue() || new ColorValue();\n\t\tthis.opacity.setValue(opacityValue.setOpacity(0.5));\n\t\tthis.tabs.showTab('Opacity');\n\t}\n}\n","import BgColor from './bg_color';\nimport ColorValue from '../color_value';\n\nexport default class BgColorBefore extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorBefore');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg--before';\n\t\tthis.className = 'g-bg--before';\n\t\tthis.pseudoClass = ':before';\n\n\t\tconst opacityValue = this.getValue() || new ColorValue();\n\t\tthis.opacity.setValue(opacityValue.setOpacity(0.5));\n\t\tthis.tabs.showTab('Opacity');\n\t}\n}\n","import Color from './color';\n\nexport default class NavbarColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColor');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color';\n\t\tthis.className = 'u-navbar-color';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--hover';\n\t\tthis.className = 'u-navbar-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorFixMoment extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorFixMoment');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--fix-moment';\n\t\tthis.className = 'u-navbar-color--fix-moment';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorFixMomentHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorFixMomentHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--fix-moment--hover';\n\t\tthis.className = 'u-navbar-color--fix-moment--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from './color';\n\nexport default class NavbarBgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarBgColor');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-bg-color';\n\t\tthis.className = 'u-navbar-bg';\n\t}\n}","import Color from './color';\n\nexport default class NavbarBgColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarBgColorHover');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-bg-color--hover';\n\t\tthis.className = 'u-navbar-bg--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from \"./color\";\n\nexport default class BorderColorTop extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColorTop');\n\t\tthis.property = 'border-top-color';\n\t\tthis.variableName = '--border-color-top';\n\t\tthis.className = 'g-border-color-top';\n\t}\n}","import Color from \"./color\";\n\nexport default class FillColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.FillColor');\n\t\tthis.property = 'fill';\n\t\tthis.pseudoClass = ':before';\n\t\tthis.variableName = '--fill-first';\n\t\tthis.className = 'g-fill-first';\n\t}\n}","import Color from \"./color\";\n\nexport default class FillColorSecond extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.FillColorSecond');\n\t\tthis.property = 'fill';\n\t\tthis.pseudoClass = ':after';\n\t\tthis.variableName = '--fill-second';\n\t\tthis.className = 'g-fill-second';\n\t}\n}","import Color from \"./color\";\nimport ColorValue from '../color_value';\n\nexport default class ButtonColor extends Color\n{\n\tstatic COLOR_CONTRAST_VAR: string = '--button-color-contrast';\n\tstatic COLOR_HOVER_VAR: string = '--button-color-hover';\n\tstatic COLOR_LIGHT_VAR: string = '--button-color-light';\n\tstatic COLOR_VAR: string = '--button-color';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.ButtonColor');\n\t\tthis.property = 'background-color';\n\t\t// order is important! Base variable must be last. Hack :-/\n\t\tthis.variableName = [\n\t\t\tButtonColor.COLOR_CONTRAST_VAR,\n\t\t\tButtonColor.COLOR_HOVER_VAR,\n\t\t\tButtonColor.COLOR_LIGHT_VAR,\n\t\t\tButtonColor.COLOR_VAR,\n\t\t];\n\t\tthis.className = 'g-button-color';  //todo: ?\n\t}\n\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\treturn {\n\t\t\t\t[ButtonColor.COLOR_CONTRAST_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_HOVER_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_LIGHT_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_VAR]: null,\n\t\t\t};\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tconst valueContrast = value.getContrast().lighten(10);\n\t\tconst valueHover = new ColorValue(value).lighten(10);\n\t\tconst valueLight = value.getLighten();\n\n\t\treturn {\n\t\t\t[ButtonColor.COLOR_CONTRAST_VAR]: valueContrast.getStyleString(),\n\t\t\t[ButtonColor.COLOR_HOVER_VAR]: valueHover.getStyleString(),\n\t\t\t[ButtonColor.COLOR_LIGHT_VAR]: valueLight.getStyleString(),\n\t\t\t[ButtonColor.COLOR_VAR]: value.getStyleString(),\n\t\t};\n\t}\n}","import Color from './color';\n\nexport default class NavbarCollapseBgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarCollapseBgColor');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-collapse-bg-color';\n\t\tthis.className = 'u-navbar-collapse-bg';\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\n\nimport BaseProcessor from './processor/base_processor';\nimport Color from './processor/color';\nimport ColorHover from './processor/color_hover';\nimport Bg from './processor/bg';\nimport BorderColor from './processor/border_color';\nimport BorderColorHover from './processor/border_color_hover';\nimport BgColor from './processor/bg_color';\nimport BgColorHover from './processor/bg_color_hover';\nimport BgColorAfter from './processor/bg_color_after';\nimport BgColorBefore from './processor/bg_color_before';\nimport NavbarColor from './processor/navbar_color';\nimport NavbarColorHover from './processor/navbar_color_hover';\nimport NavbarColorFixMoment from './processor/navbar_color_fix_moment';\nimport NavbarColorFixMomentHover from './processor/navbar_color_fix_moment_hover';\nimport NavbarBgColor from './processor/navbar_bg';\nimport NavbarBgColorHover from './processor/navbar_bg_hover';\nimport BorderColorTop from './processor/border_color-top';\nimport FillColor from './processor/fill_color';\nimport FillColorSecond from './processor/fill_color_second';\nimport ButtonColor from './processor/button_color';\nimport {IColorValue} from './types/i_color_value';\nimport NavbarCollapseBgColor from './processor/navbar_collapse_bg';\n\nexport class ColorField extends BaseField\n{\n\tprocessor: BaseProcessor;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.items = ('items' in options && options.items) ? options.items : [];\n\t\tthis.postfix = (typeof options.postfix === 'string') ? options.postfix : '';\n\t\tthis.frame = (typeof options.frame === 'object') ? options.frame : null;\n\t\tconst processorOptions = {\n\t\t\tblock: options.block,\n\t\t\tstyleNode: options.styleNode,\n\t\t\tselector: options.selector,\n\t\t\tcontentRoot: this.contentRoot,\n\t\t};\n\n\t\tthis.changeHandler = (typeof options.onChange === \"function\") ? options.onChange : (() => {});\n\t\tthis.resetHandler = (typeof options.onReset === \"function\") ? options.onReset : (function () {});\n\n\t\t// todo: rename \"subtype\"\n\t\tswitch (options.subtype)\n\t\t{\n\t\t\tcase 'color':\n\t\t\t\tthis.processor = new Color(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'color-hover':\n\t\t\t\tthis.processor = new ColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg':\n\t\t\t\tthis.processor = new Bg(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color':\n\t\t\t\tthis.processor = new BgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-hover':\n\t\t\t\tthis.processor = new BgColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-after':\n\t\t\t\tthis.processor = new BgColorAfter(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-before':\n\t\t\t\tthis.processor = new BgColorBefore(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color':\n\t\t\t\tthis.processor = new BorderColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color-hover':\n\t\t\t\tthis.processor = new BorderColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color-top':\n\t\t\t\tthis.processor = new BorderColorTop(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color':\n\t\t\t\tthis.processor = new NavbarColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-hover':\n\t\t\t\tthis.processor = new NavbarColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-fix-moment':\n\t\t\t\tthis.processor = new NavbarColorFixMoment(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-fix-moment-hover':\n\t\t\t\tthis.processor = new NavbarColorFixMomentHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-bg-color':\n\t\t\t\tthis.processor = new NavbarBgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-bg-color-hover':\n\t\t\t\tthis.processor = new NavbarBgColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-collapse-bg-color':\n\t\t\t\tthis.processor = new NavbarCollapseBgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'fill-color':\n\t\t\t\tthis.processor = new FillColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'fill-color-second':\n\t\t\t\tthis.processor = new FillColorSecond(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'button-color':\n\t\t\t\tthis.processor = new ButtonColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.property = this.processor.getProperty()[this.processor.getProperty().length - 1];\n\t\tthis.processor.getClassName().forEach(\n\t\t\titem => this.items.push({name: item, value: item}),\n\t\t);\n\n\t\t// todo: what a input?\n\t\tDom.remove(this.input);\n\t\tthis.layout.classList.add(\"landing-ui-field-color\");\n\t\tDom.append(this.processor.getLayout(), this.layout);\n\n\t\tthis.processor.subscribe('onChange', this.onChange.bind(this));\n\t\tthis.processor.subscribe('onReset', this.onReset.bind(this));\n\t}\n\n\tgetInlineProperties(): [string]\n\t{\n\t\treturn this.processor.getVariableName();\n\t}\n\n\tgetComputedProperties(): [string]\n\t{\n\t\treturn this.processor.getProperty();\n\t}\n\n\tgetPseudoElement(): ?string\n\t{\n\t\treturn this.processor.getPseudoClass();\n\t}\n\n\tonChange()\n\t{\n\t\tthis.changeHandler(\n\t\t\t{\n\t\t\t\tclassName: this.processor.getClassName(),\n\t\t\t\tstyle: this.processor.getStyle(),\n\t\t\t},\n\t\t\tthis.items,\n\t\t\tthis.postfix,\n\t\t\tthis.property,\n\t\t);\n\n\t\tthis.emit('onChange');\n\t}\n\n\tonReset()\n\t{\n\t\tthis.resetHandler(this.items, this.postfix, this.property);\n\t}\n\n\tgetValue(): IColorValue\n\t{\n\t\treturn this.processor.getValue() || this.processor.getNullValue();\n\t}\n\n\tsetValue(value: {string: ?string})\n\t{\n\t\tlet processorValue = null;\n\t\t// now for multiple properties get just last value. Maybe, need object-like values\n\t\tthis.getInlineProperties().forEach(prop => {\n\t\t\tif (prop in value && !this.processor.isNullValue(value[prop]))\n\t\t\t{\n\t\t\t\tif (!Type.isObject(processorValue))\n\t\t\t\t{\n\t\t\t\t\tprocessorValue = {};\n\t\t\t\t}\n\t\t\t\tprocessorValue[prop] = value[prop];\n\t\t\t}\n\t\t});\n\n\t\tlet defaultValue = null;\n\t\tthis.getComputedProperties().forEach(prop => {\n\t\t\tif (prop in value && !this.processor.isNullValue(value[prop]))\n\t\t\t{\n\t\t\t\tif (!Type.isObject(defaultValue))\n\t\t\t\t{\n\t\t\t\t\tdefaultValue = {};\n\t\t\t\t}\n\t\t\t\tdefaultValue[prop] = value[prop];\n\t\t\t}\n\t\t});\n\n\t\tif (processorValue !== null)\n\t\t{\n\t\t\tthis.processor.setProcessorValue(processorValue);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.processor.setDefaultValue(defaultValue);\n\t\t}\n\t}\n\n\tonFrameLoad()\n\t{\n\t\t// todo: now not work with \"group select\", can use just any node from elements. If group - need forEach\n\n\t\tconst value = this.data.styleNode.getValue(true);\n\t\tthis.setValue(value.style);\n\t}\n}"],"names":["matcher","isRgbString","rgbString","match","matcherHex","isHex","hex","trim","matcherHsl","isHslString","hsla","hexToRgb","length","r","parseInt","g","b","rgbToHsla","rgb","max","Math","min","h","s","l","d","round","a","hexToHsl","rgbToHex","toString","hslToRgb","hsl","c","abs","x","m","hslToHex","rgbStringToHsla","matches","Text","toNumber","hslStringToHsl","hslString","isCssVar","css","parseCssVar","cssVar","full","name","opacity","parseFloat","replace","toFixed","defaultColorValueOptions","defaultBgImageSize","defaultBgImageAttachment","defaultOverlay","defaultBgImageValueOptions","url","size","attachment","overlay","ColorValue","value","setValue","getHex","getOpacity","getHsl","Type","isObject","getHsla","getCssVar","getHexOriginal","isString","Dom","style","document","documentElement","setOpacity","percent","degree","fullCssVar","String","k","rad","PI","sin","deltaL","color1","color2","BaseProcessor","options","cache","Cache","MemoryCache","property","pseudoClass","isArray","variableName","remember","buildLayout","Tag","render","className","getValue","getVariableName","getStyleString","processorProperty","delete","inlineProperty","getProperty","unsetActive","set","emit","EventEmitter","BaseControl","event","color","addClass","getLayout","ACTIVE_CLASS","removeClass","hasClass","Hex","setEventNamespace","previewMode","onInput","Runtime","debounce","bind","onButtonClick","preview","Event","getInput","getButton","adjustColors","DEFAULT_COLOR","DEFAULT_BG","DEFAULT_TEXT","substring","toLowerCase","onChange","textColor","bgColor","querySelector","focus","blur","isNeedSetValue","getContrast","setActive","innerText","PageObject","getRootWindow","activeElement","Spectrum","global","window","top","location","saturation","urlParam","URL","searchParams","get","DEFAULT_SATURATION","body","setProperty","onPickerDragStart","onPickerDragMove","onPickerDragEnd","onScroll","scrollContext","contentRoot","getPicker","y","ctrlKey","metaKey","button","showPicker","target","setPickerPos","pageX","pageY","unbind","layoutRect","getBoundingClientRect","width","height","left","getLayoutRect","leftToSet","HUE_RANGE","HUE_RANGE_GRAY_THRESHOLD","HUE_RANGE_GRAY_MIDDLE","HIDE_CLASS","layoutWidth","getPickerPos","layoutHeight","isNaN","getDefaultSaturation","isSpectrumValue","hidePicker","Recent","initItems","getLayoutContainer","itemsLoaded","buildItemsLayout","Backend","getInstance","action","USER_OPTION_NAME","then","result","items","split","forEach","item","MAX_ITEMS","push","clean","itemLayout","onItemClick","append","currentTarget","dataset","pos","indexOf","splice","unshift","saveItems","BX","userOptions","save","Colorpicker","popupId","getRandom","popupTargetContainer","hexPreview","setPreviewMode","onPopupOpenClick","subscribe","onHexChange","onSelectClick","spectrum","onSpectrumChange","recent","onRecentChange","getCancelButton","onCancelClick","getSelectButton","previously","BaseEvent","getData","addItem","getPopup","close","Loc","getMessage","PopupManager","create","id","autoHide","bindElement","bindOptions","forceTop","forceLeft","padding","contentPadding","offsetTop","offsetLeft","content","getPopupContent","closeByEsc","targetContainer","unFocus","recentColor","data","show","isShown","setActivity","isActive","Primary","onClick","CSS_VAR","regexpWoStartEnd","regexp","RegExp","regexpToString","source","matcherGradient","matcherGradientAngle","hexMatcher","matcherGradientColors","isGradientString","GradientValue","from","to","angle","DEFAULT_ANGLE","type","DEFAULT_TYPE","getName","getAngle","getType","getFrom","getTo","parseGradientString","typeMatches","angleMatches","colorMatches","isNumber","TYPE_RADIAL","TYPE_LINEAR","fromString","value1","value2","base","compare","ext","defaultType","gradientType","Generator","presets","defaultPresets","preset","map","primary","lBeforeCount","ceil","floor","lAfterCount","deltaLBefore","deltaLAfter","i","darken","ii","lighten","deltaBitrixL","deltaBitrixS","bitrixColor","BITRIX_COLOR","saturate","desaturate","adjustHue","deltaL2","deltaS","deltaS2","start","pairs","pair","Preset","activeItem","getGradientByColorOptions","getItemLayout","getItemByName","find","some","setActiveItem","itemName","setAngle","setType","PresetCollection","onPresetClick","getOpenButton","toggle","onPresetChangeGlobal","addPreset","getPrimaryColorPreset","getDefaultPresets","Object","keys","globalActiveId","getGlobalActiveId","getDefaultPreset","getId","getPresetById","getActiveId","isPresetValue","getGradientPreset","getPopupLayout","layouts","innerLayouts","presetId","layout","getPresetLayout","activeId","Reset","hint","UI","Hint","createInstance","popupParameters","init","Zeroing","ColorSet","reset","zeroing","blackAndWhitePreset","getBlackAndWhitePreset","onPresetItemChange","colorpicker","setActiveValue","setPreset","addDefaultPresets","getActivePreset","getTitleContainer","prepend","getPresetContainer","activePreset","getPresetByItemValue","Opacity","defaultOpacity","Reflect","has","DEFAULT_OPACITY","getColorLayout","setPickerPosByOpacity","leftPos","pickerLeft","getDefaultValue","valueToSet","background","getStyleStringForOpacity","Tabs","tabs","multiple","isBig","onToggle","big","title","tab","Tab","bindEvents","hide","getTabById","additional","head","getTitle","tabLayout","toggleClass","SHOW_CLASS","Color","colorSet","onColorSetChange","onReset","onOpacityChange","onPrimaryChange","appendTab","valueObj","isPrimaryValue","showTab","ColorHover","Gradient","colorpickerFrom","onColorChange","colorpickerTo","getPopupButton","onPopupOpen","getRotateButton","onRotate","getSwitchTypeButton","onSwitchType","getSwapButton","onSwap","fromValue","toValue","fromValueToSet","toValueToSet","isButtonEnable","ROTATE_STEP","disableButton","enableButton","hexFrom","getHexPreviewObject","hexTo","colorFrom","colorTo","median","getMedian","offset","unsetColorpickerActive","rotate","getContainerLayout","correctColorpickerColors","gradient","setColorpickerActive","DISABLE_CLASS","BgColor","activeControl","onGradientChange","prependTab","setGradientPreset","getPreset","onTabsToggle","gradientPreset","gradValue","isNull","gradientValue","getPresetsCollection","matcherBgImage","isBgImageString","bgImage","getMatcherWithOverlay","matcherBgString","matcherGradientString","BgImageValue","getUrl","url2x","getUrl2x","fileId","getFileId","fileId2x","getFileId2x","getSize","getAttachment","parseBgString","string","matchesBg","matchesOverlay","needBool","endString","Image","rootWindow","imgField","Landing","Field","compactMode","disableLink","disableAltField","allowClear","dimensions","uploadParams","block","onImageChange","sizeField","Dropdown","getSizeItemsForButtons","onSizeChange","attachmentField","Checkbox","compact","onAttachmentChange","src","setUrl","setFileId","src2x","setUrl2x","setFileId2x","id2x","saveNode","styleNode","selector","makeAbsoluteSelector","isSelectGroup","Utils","join","getElementIndex","getNode","setSize","setAttachment","getAttachmentValueByBool","image","imgValue","imgFieldValue","Bg","parentVariableName","BG_URL_VAR","BG_URL_2X_VAR","BG_OVERLAY_VAR","BG_SIZE_VAR","BG_ATTACHMENT_VAR","parentClassName","onOverlayChange","overlayOpacity","onOverlayOpacityChange","imageTabs","bigTabs","setBig","overlayValue","imageValue","setOverlay","bgValue","image2x","getOverlay","BorderColor","BorderColorHover","BgColorHover","BgColorAfter","opacityValue","BgColorBefore","NavbarColor","NavbarColorHover","NavbarColorFixMoment","NavbarColorFixMomentHover","NavbarBgColor","NavbarBgColorHover","BorderColorTop","FillColor","FillColorSecond","ButtonColor","COLOR_CONTRAST_VAR","COLOR_HOVER_VAR","COLOR_LIGHT_VAR","COLOR_VAR","valueContrast","valueHover","valueLight","getLighten","NavbarCollapseBgColor","ColorField","postfix","frame","processorOptions","changeHandler","resetHandler","subtype","processor","getClassName","remove","input","classList","add","getPseudoClass","getStyle","getNullValue","processorValue","getInlineProperties","prop","isNullValue","defaultValue","getComputedProperties","setProcessorValue","setDefaultValue","BaseField"],"mappings":";;;;;;CAAO,IAAMA,OAAO,GAAG,0EAAhB;AAEP,CAAe,SAASC,WAAT,CAAqBC,SAArB,EACf;CACC,SAAO,CAAC,CAACA,SAAS,CAACC,KAAV,CAAgBH,OAAhB,CAAT;CACA;;CCLM,IAAMI,UAAU,GAAG,uBAAnB;AAEP,CAAe,SAASC,KAAT,CAAeC,GAAf,EACf;CACC,SAAO,CAAC,CAACA,GAAG,CAACC,IAAJ,GAAWJ,KAAX,CAAiBC,UAAjB,CAAT;CACA;;CCLM,IAAMI,UAAU,GAAG,+DAAnB;AAEP,CAAe,SAASC,WAAT,CAAqBC,IAArB,EACf;CACC,SAAO,CAAC,CAACA,IAAI,CAACH,IAAL,GAAYJ,KAAZ,CAAkBK,UAAlB,CAAT;CACA;;CCLc,SAASG,QAAT,CAAkBL,GAAlB,EACf;CACC,MAAIA,GAAG,CAACM,MAAJ,KAAe,CAAnB,EACA;CACC,QAAMC,CAAC,GAAGC,QAAQ,aAAMR,GAAG,CAAC,CAAD,CAAT,SAAeA,GAAG,CAAC,CAAD,CAAlB,GAAyB,EAAzB,CAAlB;CACA,QAAMS,CAAC,GAAGD,QAAQ,aAAMR,GAAG,CAAC,CAAD,CAAT,SAAeA,GAAG,CAAC,CAAD,CAAlB,GAAyB,EAAzB,CAAlB;CACA,QAAMU,CAAC,GAAGF,QAAQ,aAAMR,GAAG,CAAC,CAAD,CAAT,SAAeA,GAAG,CAAC,CAAD,CAAlB,GAAyB,EAAzB,CAAlB;CAEA,WAAO;CAACO,MAAAA,CAAC,EAADA,CAAD;CAAIE,MAAAA,CAAC,EAADA,CAAJ;CAAOC,MAAAA,CAAC,EAADA;CAAP,KAAP;CACA;;CAED,MAAIV,GAAG,CAACM,MAAJ,KAAe,CAAnB,EACA;CACC,QAAMC,EAAC,GAAGC,QAAQ,aAAMR,GAAG,CAAC,CAAD,CAAT,SAAeA,GAAG,CAAC,CAAD,CAAlB,GAAyB,EAAzB,CAAlB;;CACA,QAAMS,EAAC,GAAGD,QAAQ,aAAMR,GAAG,CAAC,CAAD,CAAT,SAAeA,GAAG,CAAC,CAAD,CAAlB,GAAyB,EAAzB,CAAlB;;CACA,QAAMU,EAAC,GAAGF,QAAQ,aAAMR,GAAG,CAAC,CAAD,CAAT,SAAeA,GAAG,CAAC,CAAD,CAAlB,GAAyB,EAAzB,CAAlB;;CAEA,WAAO;CAACO,MAAAA,CAAC,EAADA,EAAD;CAAIE,MAAAA,CAAC,EAADA,EAAJ;CAAOC,MAAAA,CAAC,EAADA;CAAP,KAAP;CACA;;CAED,SAAO;CAACH,IAAAA,CAAC,EAAE,GAAJ;CAASE,IAAAA,CAAC,EAAE,GAAZ;CAAiBC,IAAAA,CAAC,EAAE;CAApB,GAAP;CACA;;CCrBc,SAASC,SAAT,CACdC,GADc,EAGf;CACC,MAAML,CAAC,GAAGK,GAAG,CAACL,CAAJ,GAAQ,GAAlB;CACA,MAAME,CAAC,GAAGG,GAAG,CAACH,CAAJ,GAAQ,GAAlB;CACA,MAAMC,CAAC,GAAGE,GAAG,CAACF,CAAJ,GAAQ,GAAlB;CAEA,MAAMG,GAAG,GAAGC,IAAI,CAACD,GAAL,CAASN,CAAT,EAAYE,CAAZ,EAAeC,CAAf,CAAZ;CACA,MAAMK,GAAG,GAAGD,IAAI,CAACC,GAAL,CAASR,CAAT,EAAYE,CAAZ,EAAeC,CAAf,CAAZ;CACA,MAAIM,CAAJ;CAAA,MAAOC,CAAP;CAAA,MAAUC,CAAC,GAAG,CAACL,GAAG,GAAGE,GAAP,IAAc,CAA5B,CAPD;CASC;;CAEA,MAAIF,GAAG,KAAKE,GAAZ,EACA;CACCC,IAAAA,CAAC,GAAGC,CAAC,GAAG,CAAR;CACA,GAHD,MAKA;CACC,QAAME,CAAC,GAAGN,GAAG,GAAGE,GAAhB;CACAE,IAAAA,CAAC,GAAGC,CAAC,GAAG,GAAJ,GACDC,CAAC,IAAI,IAAIN,GAAJ,GAAUE,GAAd,CADA,GAEDI,CAAC,IAAIN,GAAG,GAAGE,GAAV,CAFJ;;CAIA,YAAQF,GAAR;CAEC,WAAKN,CAAL;CACCS,QAAAA,CAAC,GAAG,CAACP,CAAC,GAAGC,CAAL,IAAUS,CAAV,IAAeV,CAAC,GAAGC,CAAJ,GAAQ,CAAR,GAAY,CAA3B,CAAJ;CACA;;CACD,WAAKD,CAAL;CACCO,QAAAA,CAAC,GAAG,CAACN,CAAC,GAAGH,CAAL,IAAUY,CAAV,GAAc,CAAlB;CACA;;CACD,WAAKT,CAAL;CACCM,QAAAA,CAAC,GAAG,CAACT,CAAC,GAAGE,CAAL,IAAUU,CAAV,GAAc,CAAlB;CACA;CAVF;;CAaAH,IAAAA,CAAC,IAAI,GAAL;CACA;;CAED,SAAO;CACNA,IAAAA,CAAC,EAAEF,IAAI,CAACM,KAAL,CAAWJ,CAAC,GAAG,GAAf,CADG;CAENC,IAAAA,CAAC,EAAEH,IAAI,CAACM,KAAL,CAAWH,CAAC,GAAG,GAAf,CAFG;CAGNC,IAAAA,CAAC,EAAEJ,IAAI,CAACM,KAAL,CAAWF,CAAC,GAAG,GAAf,CAHG;CAING,IAAAA,CAAC,EAAG,OAAOT,GAAR,GAAeA,GAAG,CAACS,CAAnB,GAAuB;CAJpB,GAAP;CAMA;CAGD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CC7Fe,SAASC,QAAT,CAAkBtB,GAAlB,EACf;CACC,MAAMY,GAAG,GAAGP,QAAQ,CAACL,GAAG,CAACC,IAAJ,EAAD,CAApB;CAEA,SAAOU,SAAS,CAACC,GAAD,CAAhB;CACA;;CCRc,SAASW,QAAT,CAAkBX,GAAlB,EACf;CACC,MAAIL,CAAC,GAAGK,GAAG,CAACL,CAAJ,CAAMiB,QAAN,CAAe,EAAf,CAAR;CACA,MAAIf,CAAC,GAAGG,GAAG,CAACH,CAAJ,CAAMe,QAAN,CAAe,EAAf,CAAR;CACA,MAAId,CAAC,GAAGE,GAAG,CAACF,CAAJ,CAAMc,QAAN,CAAe,EAAf,CAAR;;CAEA,MAAIjB,CAAC,CAACD,MAAF,KAAa,CAAjB,EACA;CACCC,IAAAA,CAAC,GAAG,MAAMA,CAAV;CACA;;CACD,MAAIE,CAAC,CAACH,MAAF,KAAa,CAAjB,EACA;CACCG,IAAAA,CAAC,GAAG,MAAMA,CAAV;CACA;;CACD,MAAIC,CAAC,CAACJ,MAAF,KAAa,CAAjB,EACA;CACCI,IAAAA,CAAC,GAAG,MAAMA,CAAV;CACA;;CAED,SAAO,MAAMH,CAAN,GAAUE,CAAV,GAAcC,CAArB;CACA;;CCpBc,SAASe,QAAT,CAAkBC,GAAlB,EACf;CACC;CACA;CACA;CACA;CACA,MAAMV,CAAC,GAAGU,GAAG,CAACV,CAAd;CACA,MAAMC,CAAC,GAAGS,GAAG,CAACT,CAAJ,GAAQ,GAAlB;CACA,MAAMC,CAAC,GAAGQ,GAAG,CAACR,CAAJ,GAAQ,GAAlB;CAEA,MAAIS,CAAC,GAAG,CAAC,IAAIb,IAAI,CAACc,GAAL,CAAS,IAAIV,CAAJ,GAAQ,CAAjB,CAAL,IAA4BD,CAApC;CACA,MAAIY,CAAC,GAAGF,CAAC,IAAI,IAAIb,IAAI,CAACc,GAAL,CAAUZ,CAAC,GAAG,EAAL,GAAW,CAAX,GAAe,CAAxB,CAAR,CAAT;CACA,MAAIc,CAAC,GAAGZ,CAAC,GAAGS,CAAC,GAAG,CAAhB;CACA,MAAIpB,CAAC,GAAG,CAAR;CACA,MAAIE,CAAC,GAAG,CAAR;CACA,MAAIC,CAAC,GAAG,CAAR;;CAEA,MAAI,KAAKM,CAAL,IAAUA,CAAC,GAAG,EAAlB,EACA;CACCT,IAAAA,CAAC,GAAGoB,CAAJ;CACAlB,IAAAA,CAAC,GAAGoB,CAAJ;CACAnB,IAAAA,CAAC,GAAG,CAAJ;CACA,GALD,MAMK,IAAI,MAAMM,CAAN,IAAWA,CAAC,GAAG,GAAnB,EACL;CACCT,IAAAA,CAAC,GAAGsB,CAAJ;CACApB,IAAAA,CAAC,GAAGkB,CAAJ;CACAjB,IAAAA,CAAC,GAAG,CAAJ;CACA,GALI,MAMA,IAAI,OAAOM,CAAP,IAAYA,CAAC,GAAG,GAApB,EACL;CACCT,IAAAA,CAAC,GAAG,CAAJ;CACAE,IAAAA,CAAC,GAAGkB,CAAJ;CACAjB,IAAAA,CAAC,GAAGmB,CAAJ;CACA,GALI,MAMA,IAAI,OAAOb,CAAP,IAAYA,CAAC,GAAG,GAApB,EACL;CACCT,IAAAA,CAAC,GAAG,CAAJ;CACAE,IAAAA,CAAC,GAAGoB,CAAJ;CACAnB,IAAAA,CAAC,GAAGiB,CAAJ;CACA,GALI,MAMA,IAAI,OAAOX,CAAP,IAAYA,CAAC,GAAG,GAApB,EACL;CACCT,IAAAA,CAAC,GAAGsB,CAAJ;CACApB,IAAAA,CAAC,GAAG,CAAJ;CACAC,IAAAA,CAAC,GAAGiB,CAAJ;CACA,GALI,MAMA,IAAI,OAAOX,CAAP,IAAYA,CAAC,GAAG,GAApB,EACL;CACCT,IAAAA,CAAC,GAAGoB,CAAJ;CACAlB,IAAAA,CAAC,GAAG,CAAJ;CACAC,IAAAA,CAAC,GAAGmB,CAAJ;CACA;;CACDtB,EAAAA,CAAC,GAAGO,IAAI,CAACM,KAAL,CAAW,CAACb,CAAC,GAAGuB,CAAL,IAAU,GAArB,CAAJ;CACArB,EAAAA,CAAC,GAAGK,IAAI,CAACM,KAAL,CAAW,CAACX,CAAC,GAAGqB,CAAL,IAAU,GAArB,CAAJ;CACApB,EAAAA,CAAC,GAAGI,IAAI,CAACM,KAAL,CAAW,CAACV,CAAC,GAAGoB,CAAL,IAAU,GAArB,CAAJ;CAEA,SAAO;CAACvB,IAAAA,CAAC,EAAEA,CAAJ;CAAOE,IAAAA,CAAC,EAAEA,CAAV;CAAaC,IAAAA,CAAC,EAAEA;CAAhB,GAAP;CACA;;CCvDc,SAASqB,QAAT,CAAkBL,GAAlB,EACf;CACC,MAAMd,GAAG,GAAGa,QAAQ,CAACC,GAAD,CAApB;CAEA,SAAOH,QAAQ,CAACX,GAAD,CAAf;CACA;;CCJc,SAASoB,eAAT,CAAyBpC,SAAzB,EACf;CACC,MAAIqC,OAAO,GAAGrC,SAAS,CAACK,IAAV,GAAiBJ,KAAjB,CAAuBH,OAAvB,CAAd;;CACA,MAAIuC,OAAO,CAAC3B,MAAR,GAAiB,CAArB,EACA;CACC,WAAOK,SAAS,CAAC;CAChBJ,MAAAA,CAAC,EAAE2B,cAAI,CAACC,QAAL,CAAcF,OAAO,CAAC,CAAD,CAArB,CADa;CAEhBxB,MAAAA,CAAC,EAAEyB,cAAI,CAACC,QAAL,CAAcF,OAAO,CAAC,CAAD,CAArB,CAFa;CAGhBvB,MAAAA,CAAC,EAAEwB,cAAI,CAACC,QAAL,CAAcF,OAAO,CAAC,CAAD,CAArB,CAHa;CAIhBZ,MAAAA,CAAC,EAAEY,OAAO,CAAC,CAAD,CAAP,GAAaC,cAAI,CAACC,QAAL,CAAcF,OAAO,CAAC,CAAD,CAArB,CAAb,GAAyC;CAJ5B,KAAD,CAAhB;CAMA;CACD;;CCbc,SAASG,cAAT,CAAwBC,SAAxB,EACf;CACC,MAAIJ,OAAO,GAAGI,SAAS,CAACpC,IAAV,GAAiBJ,KAAjB,CAAuBK,UAAvB,CAAd;;CACA,MAAI+B,OAAO,IAAIA,OAAO,CAAC3B,MAAR,GAAiB,CAAhC,EACA;CACC,WAAO;CACNU,MAAAA,CAAC,EAAEkB,cAAI,CAACC,QAAL,CAAcF,OAAO,CAAC,CAAD,CAArB,CADG;CAENhB,MAAAA,CAAC,EAAEiB,cAAI,CAACC,QAAL,CAAcF,OAAO,CAAC,CAAD,CAArB,CAFG;CAGNf,MAAAA,CAAC,EAAEgB,cAAI,CAACC,QAAL,CAAcF,OAAO,CAAC,CAAD,CAArB,CAHG;CAINZ,MAAAA,CAAC,EAAEY,OAAO,CAAC,CAAD,CAAP,GAAaC,cAAI,CAACC,QAAL,CAAcF,OAAO,CAAC,CAAD,CAArB,CAAb,GAAyC;CAJtC,KAAP;CAMA;CACD;;CCfD,IAAMvC,SAAO,GAAG,oDAAhB;AAEA,CAAO,SAAS4C,QAAT,CAAkBC,GAAlB,EACP;CACC,SAAO,CAAC,CAACA,GAAG,CAACtC,IAAJ,GAAWJ,KAAX,CAAiBH,SAAjB,CAAT;CACA;AAQD,CAAO,SAAS8C,WAAT,CAAqBD,GAArB,EACP;CACC,MAAMN,OAAO,GAAGM,GAAG,CAACtC,IAAJ,GAAWJ,KAAX,CAAiBH,SAAjB,CAAhB;;CACA,MAAI,CAAC,CAACuC,OAAN,EACA;CACC,QAAMQ,MAAM,GAAG;CACdC,MAAAA,IAAI,EAAET,OAAO,CAAC,CAAD,CADC;CAEdU,MAAAA,IAAI,EAAEV,OAAO,CAAC,CAAD;CAFC,KAAf;;CAKA,QAAGA,OAAO,CAAC,CAAD,CAAV,EACA;CACCQ,MAAAA,MAAM,CAACG,OAAP,GAAiB,CAACC,UAAU,CAACZ,OAAO,CAAC,CAAD,CAAP,CAAWa,OAAX,CAAmB,GAAnB,EAAwB,GAAxB,CAAD,CAAV,CAAyCC,OAAzC,CAAiD,CAAjD,CAAlB;CACA;;CAED,WAAON,MAAP;CACA;;CAED,SAAO,IAAP;CACA;;CCxBM,IAAMO,wBAA2C,GAAG;CAC1DhC,EAAAA,CAAC,EAAE,GADuD;CAE1DC,EAAAA,CAAC,EAAE,CAFuD;CAG1DC,EAAAA,CAAC,EAAE,EAHuD;CAI1DG,EAAAA,CAAC,EAAE;CAJuD,CAApD;AAuBP,CAAO,IAAM4B,kBAAkB,GAAG,OAA3B;AACP,CAAO,IAAMC,wBAAwB,GAAG,QAAjC;AACP,CAAO,IAAMC,cAAc,GAAG,IAAvB;AACP,CAAO,IAAMC,0BAA+C,GAAG;CAC9DC,EAAAA,GAAG,EAAE,IADyD;CAE9DC,EAAAA,IAAI,EAAEL,kBAFwD;CAG9DM,EAAAA,UAAU,EAAEL,wBAHkD;CAI9DM,EAAAA,OAAO,EAAEL;CAJqD,CAAxD;;KCrBcM;CAGpB;CACD;CACA;CACA;;CAEC;CACD;CACA;CACA;CAGC,sBAAYC,KAAZ,EACA;CAAA;CACC,SAAKA,KAAL,GAAaV,wBAAb;CACA,SAAKhD,GAAL,GAAW,IAAX;CACA,SAAKyC,MAAL,GAAc,IAAd;CACA,SAAKkB,QAAL,CAAcD,KAAd;CACA;;;;+BAGD;CACC,UAAI,KAAK1D,GAAT,EACA;CACC,eAAO,KAAK4D,MAAL,KAAgB,GAAhB,GAAsB,KAAKC,UAAL,EAA7B;CACA;;CAJF,yBAKmB,KAAKC,MAAL,EALnB;CAAA,UAKQ9C,CALR,gBAKQA,CALR;CAAA,UAKWC,CALX,gBAKWA,CALX;CAAA,UAKcC,CALd,gBAKcA,CALd;;CAMC,uBAAUF,CAAV,cAAeC,CAAf,cAAoBC,CAApB,cAAyB,KAAK2C,UAAL,EAAzB;CACA;;;8BAEQH,OACT;CACC,UAAIK,cAAI,CAACC,QAAL,CAAcN,KAAd,CAAJ,EACA;CACC,YAAIA,KAAK,YAAYD,UAArB,EACA;CACC,eAAKC,KAAL,GAAaA,KAAK,CAACO,OAAN,EAAb;CACA,eAAKxB,MAAL,GAAciB,KAAK,CAACQ,SAAN,EAAd;CACA,eAAKlE,GAAL,GAAW0D,KAAK,CAACS,cAAN,EAAX;CACA,SALD,MAOA;CACC,eAAKT,KAAL,iCAAiB,KAAKA,KAAtB,EAAgCA,KAAhC;CACA;CACD;;CAED,UAAIK,cAAI,CAACK,QAAL,CAAcV,KAAd,CAAJ,EACA;CACC,YAAIvD,WAAW,CAACuD,KAAD,CAAf,EACA;CACC,eAAKA,KAAL,GAAatB,cAAc,CAACsB,KAAD,CAA3B;CACA,SAHD,MAIK,IAAI3D,KAAK,CAAC2D,KAAD,CAAT,EACL;CACC,eAAKA,KAAL,iCAAiBpC,QAAQ,CAACoC,KAAD,CAAzB;CAAkCrC,YAAAA,CAAC,EAAE2B,wBAAwB,CAAC3B;CAA9D;CACA,eAAKrB,GAAL,GAAW0D,KAAX;CACA,SAJI,MAKA,IAAI/D,WAAW,CAAC+D,KAAD,CAAf,EACL;CACC,eAAKA,KAAL,GAAa1B,eAAe,CAAC0B,KAAD,CAA5B;CACA,SAHI,MAIA,IAAIpB,QAAQ,CAACoB,KAAD,CAAZ,EACL;CACC;CACA,cAAMjB,MAAM,GAAGD,WAAW,CAACkB,KAAD,CAA1B;;CACA,cAAIjB,MAAM,KAAK,IAAf,EACA;CACC,iBAAKA,MAAL,GAAcA,MAAM,CAACE,IAArB;CACA,iBAAKgB,QAAL,CAAcU,aAAG,CAACC,KAAJ,CAAUC,QAAQ,CAACC,eAAnB,EAAoC,KAAK/B,MAAzC,CAAd;;CACA,gBAAIA,MAAM,CAACG,OAAX,EACA;CACC,mBAAK6B,UAAL,CAAgBhC,MAAM,CAACG,OAAvB;CACA;CACD;CACD;CACD;;CAED,WAAKc,KAAL,CAAW1C,CAAX,GAAeF,IAAI,CAACM,KAAL,CAAW,KAAKsC,KAAL,CAAW1C,CAAtB,CAAf;CACA,WAAK0C,KAAL,CAAWzC,CAAX,GAAeH,IAAI,CAACM,KAAL,CAAW,KAAKsC,KAAL,CAAWzC,CAAtB,CAAf;CACA,WAAKyC,KAAL,CAAWxC,CAAX,GAAeJ,IAAI,CAACM,KAAL,CAAW,KAAKsC,KAAL,CAAWxC,CAAtB,CAAf;CACA,WAAKwC,KAAL,CAAWrC,CAAX,GAAe,CAAC,KAAKqC,KAAL,CAAWrC,CAAX,CAAa0B,OAAb,CAAqB,CAArB,CAAhB;CAEA,aAAO,IAAP;CACA;;;gCAEUH,SACX;CACC,WAAKe,QAAL,CAAc;CAACtC,QAAAA,CAAC,EAAEuB;CAAJ,OAAd;CAEA,aAAO,IAAP;CACA;;;6BAEO8B,SACR;CACC,WAAKhB,KAAL,CAAWxC,CAAX,GAAeJ,IAAI,CAACC,GAAL,CAAS,KAAK2C,KAAL,CAAWxC,CAAX,GAAewD,OAAxB,EAAiC,GAAjC,CAAf;CACA,WAAK1E,GAAL,GAAW,IAAX;CAEA,aAAO,IAAP;CACA;;;4BAEM0E,SACP;CACC,WAAKhB,KAAL,CAAWxC,CAAX,GAAeJ,IAAI,CAACD,GAAL,CAAS,KAAK6C,KAAL,CAAWxC,CAAX,GAAewD,OAAxB,EAAiC,CAAjC,CAAf;CACA,WAAK1E,GAAL,GAAW,IAAX;CAEA,aAAO,IAAP;CACA;;;8BAEQ0E,SACT;CACC,WAAKhB,KAAL,CAAWzC,CAAX,GAAeH,IAAI,CAACC,GAAL,CAAS,KAAK2C,KAAL,CAAWzC,CAAX,GAAeyD,OAAxB,EAAiC,GAAjC,CAAf;CACA,WAAK1E,GAAL,GAAW,IAAX;CAEA,aAAO,IAAP;CACA;;;gCAEU0E,SACX;CACC,WAAKhB,KAAL,CAAWzC,CAAX,GAAeH,IAAI,CAACD,GAAL,CAAS,KAAK6C,KAAL,CAAWzC,CAAX,GAAeyD,OAAxB,EAAiC,CAAjC,CAAf;CACA,WAAK1E,GAAL,GAAW,IAAX;CAEA,aAAO,IAAP;CACA;;;+BAES2E,QACV;CACC,WAAKjB,KAAL,CAAW1C,CAAX,GAAe,CAAC,KAAK0C,KAAL,CAAW1C,CAAX,GAAe2D,MAAhB,IAA0B,GAAzC;CAEA,aAAO,IAAP;CACA;;;8BAGD;CACC,aAAO;CACN3D,QAAAA,CAAC,EAAE,KAAK0C,KAAL,CAAW1C,CADR;CAENC,QAAAA,CAAC,EAAE,KAAKyC,KAAL,CAAWzC,CAFR;CAGNC,QAAAA,CAAC,EAAE,KAAKwC,KAAL,CAAWxC;CAHR,OAAP;CAKA;;;+BAGD;CACC,aAAO;CACNF,QAAAA,CAAC,EAAE,KAAK0C,KAAL,CAAW1C,CADR;CAENC,QAAAA,CAAC,EAAE,KAAKyC,KAAL,CAAWzC,CAFR;CAGNC,QAAAA,CAAC,EAAE,KAAKwC,KAAL,CAAWxC,CAHR;CAING,QAAAA,CAAC,EAAE,KAAKqC,KAAL,CAAWrC;CAJR,OAAP;CAMA;CAED;CACD;CACA;CACA;;;;8BAEC;CACC,aAAO,KAAKrB,GAAL,IAAY+B,QAAQ,CAAC,KAAK2B,KAAN,CAA3B;CACA;CAED;CACD;CACA;;;;sCAEC;CACC,aAAO,KAAK1D,GAAZ;CACA;;;kCAGD;CAAA;;CACC,8BAAO,KAAK0D,KAAL,CAAWrC,CAAlB,yDAAuB2B,wBAAwB,CAAC3B,CAAhD;CACA;;;iCAGD;CACC,aAAO,KAAKoB,MAAZ;CACA;CAED;CACD;CACA;CACA;CACA;;;;sCAEC;CACC,UAAI,KAAKA,MAAL,KAAgB,IAApB,EACA;CACC,YAAI,KAAKzC,GAAL,IAAY,KAAK6D,UAAL,OAAsBb,wBAAwB,CAAC3B,CAA/D,EACA;CACC,iBAAO,KAAKrB,GAAZ;CACA;;CAJF,0BAMsB,KAAK0D,KAN3B;CAAA,YAMQ1C,CANR,eAMQA,CANR;CAAA,YAMWC,CANX,eAMWA,CANX;CAAA,YAMcC,CANd,eAMcA,CANd;CAAA,YAMiBG,CANjB,eAMiBA,CANjB;CAQC,8BAAeL,CAAf,eAAqBC,CAArB,gBAA4BC,CAA5B,gBAAmCG,CAAnC;CACA,OAVD,MAYA;CACC,YAAIuD,UAAU,GAAG,KAAKnC,MAAtB;;CACA,YAAI,KAAKiB,KAAL,CAAWrC,CAAX,KAAiB2B,wBAAwB,CAAC3B,CAA9C,EACA;CACCuD,UAAAA,UAAU,GAAGA,UAAU,GAAG,WAAb,GAA2BC,MAAM,CAAC,KAAKnB,KAAL,CAAWrC,CAAZ,CAAN,CAAqByB,OAArB,CAA6B,GAA7B,EAAkC,GAAlC,CAAxC;CACA;;CACD,6BAAc8B,UAAd;CACA;CACD;;;gDAGD;CAAA,yBACmB,KAAKlB,KADxB;CAAA,UACQ1C,CADR,gBACQA,CADR;CAAA,UACWC,CADX,gBACWA,CADX;CAAA,UACcC,CADd,gBACcA,CADd;CAGC,sDAAyCF,CAAzC,eAA+CC,CAA/C,gBAAsDC,CAAtD,4BAAyEF,CAAzE,eAA+EC,CAA/E,gBAAsFC,CAAtF;CACA;;;;CAqBD;CACD;CACA;CACA;mCAEC;CACC,UAAI4D,CAAC,GAAG,EAAR,CADD;;CAGC,UAAIC,GAAG,GAAG,KAAKjB,MAAL,GAAc9C,CAAd,GAAkBF,IAAI,CAACkE,EAAvB,GAA4B,GAAtC;CACAF,MAAAA,CAAC,IAAKhE,IAAI,CAACmE,GAAL,CAASF,GAAT,IAAgB,EAAjB,GAAuB,CAA5B,CAJD;CAKC;;CACA,UAAIG,MAAM,GAAGJ,CAAC,GAAI,KAAK,KAAKhB,MAAL,GAAc5C,CAAnB,GAAuB,GAAzC;CAEA,aAAO,IAAIuC,UAAJ,CAAe,KAAKC,KAApB,EAA2BC,QAA3B,CAAoC;CAACzC,QAAAA,CAAC,EAAE,CAAC,KAAK4C,MAAL,GAAc5C,CAAd,GAAkBgE,MAAnB,IAA6B;CAAjC,OAApC,CAAP;CACA;CAED;CACD;CACA;;;;kCAEC;CAAA,0BACiB,KAAKpB,MAAL,EADjB;CAAA,UACM9C,CADN,iBACMA,CADN;CAAA,UACSC,CADT,iBACSA,CADT;CAAA,UACYC,CADZ,iBACYA,CADZ;;CAGC,UAAID,CAAC,GAAG,CAAR,EACA;CACCA,QAAAA,CAAC,IAAI,CAACC,CAAC,GAAG,EAAL,IAAW,GAAX,GAAiB,EAAtB;CACAD,QAAAA,CAAC,GAAGH,IAAI,CAACC,GAAL,CAAS,GAAT,EAAcD,IAAI,CAACD,GAAL,CAAS,CAAT,EAAYK,CAAZ,CAAd,CAAJ;CACA;;CAEDA,MAAAA,CAAC,IAAI,KAAK,KAAKA,CAAL,GAAS,GAAnB;CACAA,MAAAA,CAAC,GAAGJ,IAAI,CAACC,GAAL,CAAS,GAAT,EAAcG,CAAd,CAAJ;CAEA,aAAO,IAAIuC,UAAJ,CAAe;CAACzC,QAAAA,CAAC,EAADA,CAAD;CAAIC,QAAAA,CAAC,EAADA,CAAJ;CAAOC,QAAAA,CAAC,EAADA;CAAP,OAAf,CAAP;CACA;;;6BApDciE,QAAoBC,QACnC;CACC,aAAOD,MAAM,CAAClB,OAAP,GAAiBjD,CAAjB,KAAuBoE,MAAM,CAACnB,OAAP,GAAiBjD,CAAxC,IACHmE,MAAM,CAAClB,OAAP,GAAiBhD,CAAjB,KAAuBmE,MAAM,CAACnB,OAAP,GAAiBhD,CADrC,IAEHkE,MAAM,CAAClB,OAAP,GAAiB/C,CAAjB,KAAuBkE,MAAM,CAACnB,OAAP,GAAiB/C,CAFrC,IAGHiE,MAAM,CAAClB,OAAP,GAAiB5C,CAAjB,KAAuB+D,MAAM,CAACnB,OAAP,GAAiB5C,CAHrC,IAIH8D,MAAM,CAAC1C,MAAP,KAAkB2C,MAAM,CAAC3C,MAJ7B;CAKA;;;+BAEgB0C,QAAoBC,QACrC;CACC,aAAO,IAAI3B,UAAJ,CAAe;CACrBzC,QAAAA,CAAC,EAAE,CAACmE,MAAM,CAAClB,OAAP,GAAiBjD,CAAjB,GAAqBoE,MAAM,CAACnB,OAAP,GAAiBjD,CAAvC,IAA4C,CAD1B;CAErBC,QAAAA,CAAC,EAAE,CAACkE,MAAM,CAAClB,OAAP,GAAiBhD,CAAjB,GAAqBmE,MAAM,CAACnB,OAAP,GAAiBhD,CAAvC,IAA4C,CAF1B;CAGrBC,QAAAA,CAAC,EAAE,CAACiE,MAAM,CAAClB,OAAP,GAAiB/C,CAAjB,GAAqBkE,MAAM,CAACnB,OAAP,GAAiB/C,CAAvC,IAA4C,CAH1B;CAIrBG,QAAAA,CAAC,EAAE,CAAC8D,MAAM,CAAClB,OAAP,GAAiB5C,CAAjB,GAAqB+D,MAAM,CAACnB,OAAP,GAAiB5C,CAAvC,IAA4C;CAJ1B,OAAf,CAAP;CAMA;;;;;;;;;;;;;;;KChPmBgE;;;CAQpB,yBAAYC,OAAZ,EACA;CAAA;;CAAA;CACC;CACA,UAAKC,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;CACA,UAAKC,QAAL,GAAgB,OAAhB;CACA,UAAKJ,OAAL,GAAeA,OAAf;CACA,UAAKK,WAAL,GAAmB,IAAnB;CALD;CAMC;;;;mCAGD;CACC,aAAO5B,cAAI,CAAC6B,OAAL,CAAa,KAAKF,QAAlB,IACJ,KAAKA,QADD,GAEJ,CAAC,KAAKA,QAAN,CAFH;CAGA;;;uCAGD;CACC,aAAO3B,cAAI,CAAC6B,OAAL,CAAa,KAAKC,YAAlB,IACJ,KAAKA,YADD,GAEJ,CAAC,KAAKA,YAAN,CAFH;CAGA;;;iCAEWnC,OACZ;CACC,aAAOA,KAAK,KAAK,IAAjB;CACA;;;oCAGD;CACC,aAAO,IAAID,UAAJ,EAAP;CACA;;;sCAGD;CACC,aAAO,KAAKkC,WAAZ;CACA;;;iCAGD;CAAA;;CACC,aAAO,KAAKJ,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAO,MAAI,CAACC,WAAL,EAAP;CACA,OAFM,CAAP;CAGA;;;mCAGD;CACC,aAAOC,aAAG,CAACC,MAAX;CACA;;;oCAGD;CACC,aAAO,CAAC,KAAKC,SAAN,CAAP;CACA;;;gCAGD;;;gCAIA;CACC,UAAI,KAAKC,QAAL,OAAoB,IAAxB,EACA;CACC,+CAAS,KAAKC,eAAL,EAAT,EAAkC,IAAlC;CACA;;CAED,6CAAS,KAAKA,eAAL,EAAT,EAAkC,KAAKD,QAAL,GAAgBE,cAAhB,EAAlC;CACA;CAED;CACD;CACA;CACA;;;;uCACmB3C,OAClB;CACC;CACA,UAAM4C,iBAAiB,GAAG,KAAKF,eAAL,GAAuB,KAAKA,eAAL,GAAuB9F,MAAvB,GAAgC,CAAvD,CAA1B;CACA,WAAKiF,KAAL,CAAWgB,MAAX,CAAkB,OAAlB;CACA,WAAK5C,QAAL,CAAcD,KAAK,CAAC4C,iBAAD,CAAnB;CACA;CAED;CACD;CACA;CACA;;;;qCACiB5C,OAChB;CACC,UAAIA,KAAK,KAAK,IAAd,EACA;CACC,YAAM8C,cAAc,GAAG,KAAKC,WAAL,GAAmB,KAAKA,WAAL,GAAmBnG,MAAnB,GAA4B,CAA/C,CAAvB;;CACA,YAAIkG,cAAc,IAAI9C,KAAtB,EACA;CACC,eAAKC,QAAL,CAAcD,KAAK,CAAC8C,cAAD,CAAnB;CACA,eAAKjB,KAAL,CAAWgB,MAAX,CAAkB,OAAlB;CACA,eAAKG,WAAL;CAEA;CACA;CACD;;CACD,WAAK/C,QAAL,CAAc,IAAd;CACA,WAAK4B,KAAL,CAAWoB,GAAX,CAAe,OAAf,EAAwB,IAAxB;CACA;;;8BAEQjD,OACT;;;+BAIA;CACC,WAAKkD,IAAL,CAAU,SAAV;CACA;;;mCAGD;;;gCAIA;CACC,WAAKrB,KAAL,CAAWgB,MAAX,CAAkB,OAAlB;CACA,WAAKK,IAAL,CAAU,UAAV;CACA;;;GAhIyCC;;;;;;;;;;;;KCGtBC;;;CAIpB,uBAAYxB,OAAZ,EACA;CAAA;;CAAA;CACC;CACA,UAAKC,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;CAFD;CAGC;;;;iCAGD;CAAA;;CACC,aAAO,KAAKF,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAO,MAAI,CAACC,WAAL,EAAP;CACA,OAFM,CAAP;CAGA;;;mCAGD;CACC,aAAOC,aAAG,CAACC,MAAX;CAKA;;;gCAGD;CACC,aAAO,KAAKV,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAO,IAAIrC,UAAJ,EAAP;CACA,OAFM,CAAP;CAGA;;;oCAEcC,OACf;CACC,aAAOA,KAAK,KAAK,KAAKyC,QAAL,EAAjB;CACA;;;8BAEQzC,OACT;CACC,WAAK6B,KAAL,CAAWoB,GAAX,CAAe,OAAf,EAAwBjD,KAAxB;CACA;;;8BAEQqD,OACT;CACC,WAAKxB,KAAL,CAAWgB,MAAX,CAAkB,OAAlB;CACA,WAAKK,IAAL,CAAU,UAAV,EAAsB;CAACI,QAAAA,KAAK,EAAE,KAAKb,QAAL;CAAR,OAAtB;CACA;;;iCAGD;CACC9B,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAKC,SAAL,EAAb,EAA+BJ,WAAW,CAACK,YAA3C;CACA;;;mCAGD;CACC9C,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKF,SAAL,EAAhB,EAAkCJ,WAAW,CAACK,YAA9C;CACA;;;gCAGD;CACC,aAAO9C,aAAG,CAACgD,QAAJ,CAAa,KAAKH,SAAL,EAAb,EAA+BJ,WAAW,CAACK,YAA3C,CAAP;CACA;;;GA9DuCN;;6BAApBC,6BAEU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCDVQ;;;CAMpB,iBACA;CAAA;;CAAA;CACC;;CACA,UAAKC,iBAAL,CAAuB,+BAAvB;;CACA,UAAKC,WAAL,GAAmB,KAAnB;CAEA,UAAKC,OAAL,GAAeC,iBAAO,CAACC,QAAR,CAAiB,MAAKF,OAAL,CAAaG,IAAb,2CAAjB,EAA0C,GAA1C,CAAf;CACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,2CAArB;CAND;CAOC;;;;oCAEcE,SACf;CACC,WAAKN,WAAL,GAAmB,CAAC,CAACM,OAArB;CACA;;;mCAGD;CACC,UAAI,CAAC,KAAKN,WAAV,EACA;CACC;CACAO,QAAAA,eAAK,CAACH,IAAN,CAAW,KAAKI,QAAL,EAAX,EAA4B,OAA5B,EAAqC,KAAKP,OAA1C;CACAM,QAAAA,eAAK,CAACH,IAAN,CAAW,KAAKK,SAAL,EAAX,EAA6B,OAA7B,EAAsC,KAAKJ,aAA3C;CACA;;CAED,WAAKK,YAAL,CAAkBZ,GAAG,CAACa,aAAtB,EAAqCb,GAAG,CAACc,UAAzC;CAEA,aAAOpC,aAAG,CAACC,MAAX,sBAEI,KAAK+B,QAAL,EAFJ,EAGI,KAAKC,SAAL,EAHJ;CAMA;;;gCAGD;CAAA;;CACC,aAAO,KAAK1C,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAO,MAAI,CAAC0B,WAAL,GACJxB,aAAG,CAACC,MADA,qBACyDqB,GAAG,CAACe,YAD7D,IAEJrC,aAAG,CAACC,MAFA,qBAEmDqB,GAAG,CAACe,YAFvD,CAAP;CAGA,OAJM,CAAP;CAKA;;;iCAGD;CAAA;;CACC,aAAO,KAAK9C,KAAL,CAAWO,QAAX,CAAoB,YAApB,EAAkC,YAAM;CAC9C,eAAO,MAAI,CAAC0B,WAAL,GACJxB,aAAG,CAACC,MADA,uBAQJD,aAAG,CAACC,MARA,oBAAP;CAeA,OAhBM,CAAP;CAiBA;;;+BAGD;CACC,UAAIvC,KAAK,GAAG,KAAKsE,QAAL,GAAgBtE,KAAhB,CAAsBZ,OAAtB,CAA8B,YAA9B,EAA4C,EAA5C,CAAZ;CACAY,MAAAA,KAAK,GAAGA,KAAK,CAAC4E,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAR;CACA,WAAKN,QAAL,GAAgBtE,KAAhB,GAAwB,MAAMA,KAAK,CAAC6E,WAAN,EAA9B;CAEA,WAAKC,QAAL;CACA;;;qCAGD;CACC,WAAKA,QAAL;CACA,WAAK5B,IAAL,CAAU,eAAV,EAA2B;CAACI,QAAAA,KAAK,EAAE,KAAKb,QAAL;CAAR,OAA3B;CACA;;;8BAEQY,OACT;CACC,UAAMC,KAAK,GAAI,KAAKgB,QAAL,GAAgBtE,KAAhB,CAAsBpD,MAAtB,KAAiC,CAAjC,IAAsCP,KAAK,CAAC,KAAKiI,QAAL,GAAgBtE,KAAjB,CAA5C,GACX,IAAID,UAAJ,CAAe,KAAKuE,QAAL,GAAgBtE,KAA/B,CADW,GAEX,IAFH;CAGA,WAAKC,QAAL,CAAcqD,KAAd;CAEA,WAAKzB,KAAL,CAAWgB,MAAX,CAAkB,OAAlB;CACA,WAAKK,IAAL,CAAU,UAAV,EAAsB;CAACI,QAAAA,KAAK,EAAEA;CAAR,OAAtB;CACA;;;kCAEYyB,WAAmBC,SAChC;CACCrE,MAAAA,aAAG,CAACC,KAAJ,CAAU,KAAK0D,QAAL,EAAV,EAA2B,kBAA3B,EAA+CU,OAA/C;CACArE,MAAAA,aAAG,CAACC,KAAJ,CAAU,KAAK0D,QAAL,EAAV,EAA2B,OAA3B,EAAoCS,SAApC;CACApE,MAAAA,aAAG,CAACC,KAAJ,CAAU,KAAK2D,SAAL,GAAiBU,aAAjB,CAA+B,MAA/B,CAAV,EAAkD,MAAlD,EAA0DF,SAA1D;CACA;;;6BAGD;CACC,UAAI,CAAC,KAAKjB,WAAV,EACA;CACC,YAAI,KAAKrB,QAAL,OAAoB,IAAxB,EACA;CACC,eAAK6B,QAAL,GAAgBtE,KAAhB,GAAwB,GAAxB;CACA;;CACD,aAAKsE,QAAL,GAAgBY,KAAhB;CACA;CACD;;;+BAGD;CACC,UAAI,CAAC,KAAKpB,WAAV,EACA;CACC,aAAKQ,QAAL,GAAgBa,IAAhB;CACA;CACD;;;gCAGD;CAAA;;CACC,aAAO,KAAKtD,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAQ,MAAI,CAACkC,QAAL,GAAgBtE,KAAhB,KAA0B4D,GAAG,CAACe,YAA/B,GACJ,IADI,GAEJ,IAAI5E,UAAJ,CAAe,MAAI,CAACuE,QAAL,GAAgBtE,KAA/B,CAFH;CAGA,OAJM,CAAP;CAKA;;;8BAEQA,OACT;CACC;CACA,UAAI,KAAKoF,cAAL,CAAoBpF,KAApB,CAAJ,EACA;CACC,kGAAeA,KAAf;;CAEA,YAAIA,KAAK,KAAK,IAAd,EACA;CACC,eAAKwE,YAAL,CAAkBxE,KAAK,CAACqF,WAAN,GAAoBnF,MAApB,EAAlB,EAAgDF,KAAK,CAACE,MAAN,EAAhD;CACA,eAAKoF,SAAL;CACA,SAJD,MAMA;CACC,eAAKd,YAAL,CAAkBZ,GAAG,CAACa,aAAtB,EAAqCb,GAAG,CAACc,UAAzC;CACA,eAAK1B,WAAL;CACA;;CAED,YAAI,KAAKc,WAAT,EACA;CACC,eAAKQ,QAAL,GAAgBiB,SAAhB,GAA6BvF,KAAK,KAAK,IAAX,GAAmBA,KAAK,CAACE,MAAN,EAAnB,GAAoC0D,GAAG,CAACe,YAApE;CACA,SAHD,MAIK,IAAIa,6BAAU,CAACC,aAAX,GAA2B5E,QAA3B,CAAoC6E,aAApC,KAAsD,KAAKpB,QAAL,EAA1D,EACL;CACC,eAAKA,QAAL,GAAgBtE,KAAhB,GAAyBA,KAAK,KAAK,IAAX,GAAmBA,KAAK,CAACE,MAAN,EAAnB,GAAoC0D,GAAG,CAACe,YAAhE;CACA;CACD;CACD;;;iCAGD;CACChE,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAKe,QAAL,EAAb,EAA8BV,GAAG,CAACH,YAAlC;CACA;;;mCAGD;CACC9C,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKY,QAAL,EAAhB,EAAiCV,GAAG,CAACH,YAArC;CACA;;;gCAGD;CACC,aAAO9C,aAAG,CAACgD,QAAJ,CAAa,KAAKW,QAAL,EAAb,EAA8BV,GAAG,CAACH,YAAlC,CAAP;CACA;;;GA9K+BL;;6BAAZQ,qBAEW;6BAFXA,sBAGY;6BAHZA,mBAIS;;;;;;;;;;;;;;;;;;;;;;KCLT+B;;;;CAQpB;4CAEA;CACC,UAAMC,MAAM,GAAGC,MAAM,CAACC,GAAP,CAAWjF,QAAX,CAAoBkF,QAApB,CAA6BC,UAA5C;CACA,UAAMC,QAAQ,GAAI,IAAIC,GAAJ,CAAQL,MAAM,CAACC,GAAP,CAAWjF,QAAX,CAAoBkF,QAA5B,CAAD,CAAwCI,YAAxC,CAAqDC,GAArD,CAAyD,YAAzD,CAAjB;CACA,UAAMJ,UAAU,GAAGJ,MAAM,IAAIK,QAAV,IAAsBN,QAAQ,CAACU,kBAAlD;CAEAR,MAAAA,MAAM,CAACC,GAAP,CAAWjF,QAAX,CAAoByF,IAApB,CAAyB1F,KAAzB,CAA+B2F,WAA/B,CAA2C,cAA3C,EAA2DP,UAAU,GAAG,GAAxE;CAEA,aAAOlJ,QAAQ,CAACkJ,UAAD,CAAf;CACA;;;CAED,oBAAYpE,OAAZ,EACA;CAAA;;CAAA;CACC;;CACA,UAAKiC,iBAAL,CAAuB,oCAAvB;;CAEA,UAAK2C,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBtC,IAAvB,2CAAzB;CACA,UAAKuC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBvC,IAAtB,2CAAxB;CACA,UAAKwC,eAAL,GAAuB,MAAKA,eAAL,CAAqBxC,IAArB,2CAAvB;CACA,UAAKyC,QAAL,GAAgB,MAAKA,QAAL,CAAczC,IAAd,2CAAhB;CAEA,UAAKrD,QAAL,GAAgB2E,6BAAU,CAACC,aAAX,GAA2B5E,QAA3C;CACA,UAAK+F,aAAL,GAAqBhF,OAAO,CAACiF,WAA7B;CAEAxC,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKV,SAAL,EAAX,EAA6B,WAA7B,EAA0C,MAAKgD,iBAA/C;CAZD;CAaC;;;;mCAGD;CACC,aAAOlE,aAAG,CAACC,MAAX,sBAEI,KAAKuE,SAAL,EAFJ;CAKA;;;iCAGD;CACC,aAAO,KAAKjF,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOE,aAAG,CAACC,MAAX;CACA,OAFM,CAAP;CAGA;;;oCAGD;CACC,aAAO;CACNpE,QAAAA,CAAC,EAAEK,cAAI,CAACC,QAAL,CAAckC,aAAG,CAACC,KAAJ,CAAU,KAAKkG,SAAL,EAAV,EAA4B,MAA5B,CAAd,CADG;CAENC,QAAAA,CAAC,EAAEvI,cAAI,CAACC,QAAL,CAAckC,aAAG,CAACC,KAAJ,CAAU,KAAKkG,SAAL,EAAV,EAA4B,KAA5B,CAAd;CAFG,OAAP;CAIA;;;uCAEiBzD,OAClB;CACC,UAAIA,KAAK,CAAC2D,OAAN,IAAiB3D,KAAK,CAAC4D,OAAvB,IAAkC5D,KAAK,CAAC6D,MAA5C,EACA;CACC;CACA;;CAED7C,MAAAA,eAAK,CAACH,IAAN,CAAW,KAAK0C,aAAhB,EAA+B,QAA/B,EAAyC,KAAKD,QAA9C;CACAtC,MAAAA,eAAK,CAACH,IAAN,CAAW,KAAKrD,QAAhB,EAA0B,WAA1B,EAAuC,KAAK4F,gBAA5C;CACApC,MAAAA,eAAK,CAACH,IAAN,CAAW,KAAKrD,QAAhB,EAA0B,SAA1B,EAAqC,KAAK6F,eAA1C;CAEA/F,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAK1C,QAAL,CAAcyF,IAA3B,EAAiC,kCAAjC;CACA,WAAKK,QAAL;CACA,WAAKQ,UAAL;CACA,WAAKV,gBAAL,CAAsBpD,KAAtB;CACA;;;sCAEgBA,OACjB;CACC,UAAIA,KAAK,CAAC+D,MAAN,KAAiB,KAAKN,SAAL,EAArB,EACA;CACC;CACA;;CACD,WAAKO,YAAL,CAAkBhE,KAAK,CAACiE,KAAxB,EAA+BjE,KAAK,CAACkE,KAArC;CACA,WAAKzC,QAAL;CACA;;;uCAGD;CACCT,MAAAA,eAAK,CAACmD,MAAN,CAAa,KAAKZ,aAAlB,EAAiC,QAAjC,EAA2C,KAAKD,QAAhD;CACAtC,MAAAA,eAAK,CAACmD,MAAN,CAAa,KAAK3G,QAAlB,EAA4B,WAA5B,EAAyC,KAAK4F,gBAA9C;CACApC,MAAAA,eAAK,CAACmD,MAAN,CAAa,KAAK3G,QAAlB,EAA4B,SAA5B,EAAuC,KAAK6F,eAA5C;CAEA/F,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAK7C,QAAL,CAAcyF,IAA9B,EAAoC,kCAApC;CACA;;;gCAGD;CACC,WAAKzE,KAAL,CAAWgB,MAAX,CAAkB,YAAlB;CACA;;;qCAGD;CAAA;;CACC,aAAO,KAAKhB,KAAL,CAAWO,QAAX,CAAoB,YAApB,EAAkC,YAAM;CAC9C,YAAMqF,UAAU,GAAG,MAAI,CAACjE,SAAL,GAAiBkE,qBAAjB,EAAnB;;CACA,eAAO;CACNC,UAAAA,KAAK,EAAEF,UAAU,CAACE,KADZ;CAENC,UAAAA,MAAM,EAAEH,UAAU,CAACG,MAFb;CAGN9B,UAAAA,GAAG,EAAE2B,UAAU,CAAC3B,GAHV;CAIN+B,UAAAA,IAAI,EAAEJ,UAAU,CAACI;CAJX,SAAP;CAMA,OARM,CAAP;CASA;CAED;CACD;CACA;CACA;CACA;;;;kCACc1J,GAAW4I,GACxB;CAAA,gCACoC,KAAKe,aAAL,EADpC;CAAA,UACQH,KADR,uBACQA,KADR;CAAA,UACeC,MADf,uBACeA,MADf;CAAA,UACuB9B,GADvB,uBACuBA,GADvB;CAAA,UAC4B+B,IAD5B,uBAC4BA,IAD5B;;CAGC,UAAIE,SAAS,GAAG3K,IAAI,CAACC,GAAL,CAASD,IAAI,CAACD,GAAL,CAAUgB,CAAC,GAAG0J,IAAd,EAAqB,CAArB,CAAT,EAAkCF,KAAlC,CAAhB;CACAI,MAAAA,SAAS,GAAIA,SAAS,GAAGJ,KAAK,GAAGhC,QAAQ,CAACqC,SAAjB,GAA6BrC,QAAQ,CAACsC,wBAAnD,GACTN,KAAK,GAAGhC,QAAQ,CAACqC,SAAjB,GAA6BrC,QAAQ,CAACuC,qBAD7B,GAETH,SAFH;CAKApH,MAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKkG,SAAL,EAAV,EAA4B;CAC3Be,QAAAA,IAAI,YAAKE,SAAL,OADuB;CAE3BjC,QAAAA,GAAG,YAAK1I,IAAI,CAACC,GAAL,CAASD,IAAI,CAACD,GAAL,CAAU4J,CAAC,GAAGjB,GAAd,EAAoB,CAApB,CAAT,EAAiC8B,MAAjC,CAAL;CAFwB,OAA5B;CAIA;;;gCAGD;CAAA;;CACC,aAAO,KAAK/F,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,YAAIzB,aAAG,CAACgD,QAAJ,CAAa,MAAI,CAACmD,SAAL,EAAb,EAA+BnB,QAAQ,CAACwC,UAAxC,CAAJ,EACA;CACC,iBAAO,IAAP;CACA;;CAED,YAAMC,WAAW,GAAG,MAAI,CAAC5E,SAAL,GAAiBkE,qBAAjB,GAAyCC,KAA7D;;CACA,YAAMrK,CAAC,GAAI,MAAI,CAAC+K,YAAL,GAAoBlK,CAApB,GAAwBiK,WAAzB,GAAwCzC,QAAQ,CAACqC,SAA3D;;CACA,YAAMM,YAAY,GAAG,MAAI,CAAC9E,SAAL,GAAiBkE,qBAAjB,GAAyCE,MAA9D;;CACA,YAAMpK,CAAC,GAAG,CAAC,IAAI,MAAI,CAAC6K,YAAL,GAAoBtB,CAApB,GAAwBuB,YAA7B,IAA6C,GAAvD;;CAEA,YAAIC,KAAK,CAACjL,CAAD,CAAL,IAAYiL,KAAK,CAAC/K,CAAD,CAArB,EACA;CACC,iBAAO,IAAP;CACA;;CAED,eAAO,IAAIuC,UAAJ,CAAe;CACrBzC,UAAAA,CAAC,EAAEF,IAAI,CAACC,GAAL,CAASC,CAAT,EAAYqI,QAAQ,CAACsC,wBAArB,CADkB;CAErB1K,UAAAA,CAAC,EAAGD,CAAC,IAAIqI,QAAQ,CAACsC,wBAAf,GAA2C,CAA3C,GAA+CtC,QAAQ,CAAC6C,oBAAT,EAF7B;CAGrBhL,UAAAA,CAAC,EAAEA;CAHkB,SAAf,CAAP;CAKA,OArBM,CAAP;CAsBA;;;8BAEQwC,OACT;CACC,qGAAeA,KAAf;;CAEA,UAAKA,KAAK,KAAK,IAAX,IAAoB2F,QAAQ,CAAC8C,eAAT,CAAyBzI,KAAzB,CAAxB,EACA;CACC;CADD,4BAEmBA,KAAK,CAACI,MAAN,EAFnB;CAAA,YAEQ9C,CAFR,iBAEQA,CAFR;CAAA,YAEWC,CAFX,iBAEWA,CAFX;CAAA,YAEcC,CAFd,iBAEcA,CAFd;;CAIC,YAAMqK,IAAI,GAAItK,CAAC,KAAK,CAAP,GACVoI,QAAQ,CAACuC,qBAAT,GAAiCvC,QAAQ,CAACqC,SAA1C,GAAsD,GAD5C,GAEV1K,CAAC,GAAGqI,QAAQ,CAACqC,SAAb,GAAyB,GAF5B;CAGArH,QAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKkG,SAAL,EAAV,EAA4B,MAA5B,YAAuCe,IAAvC;CAEA,YAAM/B,GAAG,GAAG,MAAMtI,CAAlB;CACAmD,QAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKkG,SAAL,EAAV,EAA4B,KAA5B,YAAsChB,GAAtC;CAEA,aAAKqB,UAAL;CACA,OAdD,MAgBA;CACC,aAAKuB,UAAL;CACA;CACD;;;kCAGD;CACC/H,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAKuD,SAAL,EAAb,EAA+BnB,QAAQ,CAACwC,UAAxC;CACA;;;kCAGD;CACCxH,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKoD,SAAL,EAAhB,EAAkCnB,QAAQ,CAACwC,UAA3C;CACA;;;gCAGD;CACC,aAAQ,KAAK1F,QAAL,OAAoB,IAArB,IAA8BkD,QAAQ,CAAC8C,eAAT,CAAyB,KAAKhG,QAAL,EAAzB,CAArC;CACA;;;qCAEsBzC,OACvB;CACC,aAAQA,KAAK,KAAK,IAAX,KAELA,KAAK,CAACI,MAAN,GAAe7C,CAAf,KAAqBoI,QAAQ,CAAC6C,oBAAT,EAArB,IACGxI,KAAK,CAACI,MAAN,GAAe7C,CAAf,KAAqB,CAHnB,CAAP;CAKA;;;GAhNoC6F;;6BAAjBuC,gCAEgB;6BAFhBA,uBAGO;6BAHPA,sCAIsB;6BAJtBA,mCAKmB;6BALnBA,wBAMQ;;;;;;;;;;;;;;;;;;;;;;KCNRgD;;;CAQpB,oBACA;CAAA;;CAAA;CACC;CACA,UAAK9G,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;;CACA,UAAK8B,iBAAL,CAAuB,kCAAvB;;CAHD;CAIC;;;;iCAGD;CACC,WAAK+E,SAAL;CAEA,aAAO,KAAKC,kBAAL,EAAP;CACA;;;0CAGD;CACC,aAAO,KAAKhH,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOE,aAAG,CAACC,MAAX;CACA,OAFM,CAAP;CAGA;;;iCAGD;CAAA;;CACC,UAAIoG,MAAM,CAACG,WAAX,EACA;CACC,aAAKC,gBAAL;CACA,OAHD,MAKA;CACCC,QAAAA,uBAAO,CAACC,WAAR,GACEC,MADF,CACS,sBADT,EACiC;CAACjK,UAAAA,IAAI,EAAE0J,MAAM,CAACQ;CAAd,SADjC,EAEEC,IAFF,CAEO,UAAAC,MAAM,EAAI;CACf,cAAIA,MAAM,IAAIhJ,cAAI,CAACK,QAAL,CAAc2I,MAAM,CAACC,KAArB,CAAd,EACA;CACCX,YAAAA,MAAM,CAACW,KAAP,GAAe,EAAf;CACAD,YAAAA,MAAM,CAACC,KAAP,CAAaC,KAAb,CAAmB,GAAnB,EAAwBC,OAAxB,CAAgC,UAAAC,IAAI,EAAI;CACvC,kBAAIpN,KAAK,CAAEoN,IAAF,CAAL,IAAiBd,MAAM,CAACW,KAAP,CAAa1M,MAAb,GAAsB+L,MAAM,CAACe,SAAlD,EACA;CACCf,gBAAAA,MAAM,CAACW,KAAP,CAAaK,IAAb,CAAkBF,IAAlB;CACA;CACD,aALD;CAMAd,YAAAA,MAAM,CAACG,WAAP,GAAqB,IAArB;;CAEA,YAAA,MAAI,CAACC,gBAAL;CACA;CACD,SAhBF,EADD;CAmBC;CACD;;;wCAGD;CAAA;;CACCpI,MAAAA,aAAG,CAACiJ,KAAJ,CAAU,KAAKf,kBAAL,EAAV;CACAF,MAAAA,MAAM,CAACW,KAAP,CAAaE,OAAb,CAAqB,UAAAC,IAAI,EAAI;CAC5B,YAAIpN,KAAK,CAACoN,IAAD,CAAT,EACA;CACC,cAAII,UAAU,GAAGvH,aAAG,CAACC,MAAP,uBAEOkH,IAFP,EAGCA,IAHD,CAAd;CAKApF,UAAAA,eAAK,CAACH,IAAN,CAAW2F,UAAX,EAAuB,OAAvB,EAAgC;CAAA,mBAAM,MAAI,CAACC,WAAL,CAAiBzG,KAAjB,CAAN;CAAA,WAAhC;CACA1C,UAAAA,aAAG,CAACoJ,MAAJ,CAAWF,UAAX,EAAuB,MAAI,CAAChB,kBAAL,EAAvB;CACA;CACD,OAXD;CAaA,aAAO,IAAP;CACA;;;iCAEWxF,OACZ;CACC,WAAKH,IAAL,CAAU,UAAV,EAAsB;CAAC5G,QAAAA,GAAG,EAAE+G,KAAK,CAAC2G,aAAN,CAAoBC,OAApB,CAA4BjK;CAAlC,OAAtB;CACA;;;6BAEO1D,KACR;CACC,UAAID,KAAK,CAACC,GAAD,CAAT,EACA;CACC,YAAI4N,GAAG,GAAGvB,MAAM,CAACW,KAAP,CAAaa,OAAb,CAAqB7N,GAArB,CAAV;;CACA,YAAI4N,GAAG,KAAK,CAAC,CAAb,EACA;CACCvB,UAAAA,MAAM,CAACW,KAAP,CAAac,MAAb,CAAoBF,GAApB,EAAyB,CAAzB;CACA;;CACDvB,QAAAA,MAAM,CAACW,KAAP,CAAae,OAAb,CAAqB/N,GAArB;;CACA,YAAIqM,MAAM,CAACW,KAAP,CAAa1M,MAAb,GAAsB+L,MAAM,CAACe,SAAjC,EACA;CACCf,UAAAA,MAAM,CAACW,KAAP,CAAac,MAAb,CAAoBzB,MAAM,CAACe,SAA3B;CACA;;CAED,aAAKX,gBAAL;CACA,aAAKuB,SAAL;CACA;;CAED,aAAO,IAAP;CACA;;;iCAGD;CACC,UAAI3B,MAAM,CAACW,KAAP,CAAa1M,MAAb,GAAsB,CAA1B,EACA;CACC2N,QAAAA,EAAE,CAACC,WAAH,CAAeC,IAAf,CAAoB,SAApB,EAA+B9B,MAAM,CAACQ,gBAAtC,EAAwD,OAAxD,EAAiER,MAAM,CAACW,KAAxE;CACA;;CAED,aAAO,IAAP;CACA;;;GAhHkCnG;;6BAAfwF,4BAEO;6BAFPA,qBAGA;6BAHAA,iBAKD;6BALCA,uBAMU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCFV+B;;;CAKpB,uBAAY9I,OAAZ,EACA;CAAA;;CAAA;CACC;;CACA,UAAKiC,iBAAL,CAAuB,uCAAvB;;CACA,UAAK8G,OAAL,GAAe,uBAAuBnM,cAAI,CAACoM,SAAL,EAAtC;CACA,UAAKC,oBAAL,GAA4BjJ,OAAO,CAACiF,WAApC;CAEA,UAAKiE,UAAL,GAAkB,IAAIlH,GAAJ,EAAlB;;CACA,UAAKkH,UAAL,CAAgBC,cAAhB,CAA+B,IAA/B;;CACA1G,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAK4G,UAAL,CAAgBtH,SAAhB,EAAX,EAAwC,OAAxC,EAAiD,MAAKwH,gBAAL,CAAsB9G,IAAtB,2CAAjD,EARD;;CAWC,UAAK5H,GAAL,GAAW,IAAIsH,GAAJ,EAAX;;CACA,UAAKtH,GAAL,CAAS2O,SAAT,CAAmB,UAAnB,EAA+B,MAAKC,WAAL,CAAiBhH,IAAjB,2CAA/B;;CACA,UAAK5H,GAAL,CAAS2O,SAAT,CAAmB,eAAnB,EAAoC,MAAKE,aAAL,CAAmBjH,IAAnB,2CAApC;;CAEA,UAAKkH,QAAL,GAAgB,IAAIzF,QAAJ,CAAa/D,OAAb,CAAhB;;CACA,UAAKwJ,QAAL,CAAcH,SAAd,CAAwB,UAAxB,EAAoC,MAAKI,gBAAL,CAAsBnH,IAAtB,2CAApC;;CAEA,UAAKoH,MAAL,GAAc,IAAI3C,MAAJ,EAAd;;CACA,UAAK2C,MAAL,CAAYL,SAAZ,CAAsB,UAAtB,EAAkC,MAAKM,cAAL,CAAoBrH,IAApB,2CAAlC;;CAEAG,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKsH,eAAL,EAAX,EAAmC,OAAnC,EAA4C,MAAKC,aAAL,CAAmBvH,IAAnB,2CAA5C;CACAG,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKwH,eAAL,EAAX,EAAmC,OAAnC,EAA4C,MAAKP,aAAL,CAAmBjH,IAAnB,2CAA5C,EAtBD;;CAyBC,UAAKyH,UAAL,GAAkB,MAAKlJ,QAAL,EAAlB;CAzBD;CA0BC;;;;mCAEaY,OACd;CACC,UAAMrD,KAAK,GAAIqD,KAAK,YAAYuI,0BAAlB,GAA+BvI,KAAK,CAACwI,OAAN,GAAgBvI,KAA/C,GAAuD,KAAKb,QAAL,EAArE;;CACA,UAAIzC,KAAK,KAAK,IAAd,EACA;CACC,aAAKsL,MAAL,CAAYQ,OAAZ,CAAoB,KAAKrJ,QAAL,GAAgBvC,MAAhB,EAApB;CACA;;CACD,WAAK6L,QAAL,GAAgBC,KAAhB;CACA;;;mCAGD;CACC,aAAO1J,aAAG,CAACC,MAAX,sBAEI,KAAKuI,UAAL,CAAgBtH,SAAhB,EAFJ;CAKA;;;uCAGD;CACC,aAAOlB,aAAG,CAACC,MAAX,uBAGK,KAAK+I,MAAL,CAAY9H,SAAZ,EAHL,EAIK,KAAKlH,GAAL,CAASkH,SAAT,EAJL,EAMI,KAAK4H,QAAL,CAAc5H,SAAd,EANJ,EAQK,KAAKkI,eAAL,EARL,EASK,KAAKF,eAAL,EATL;CAaA;;;uCAGD;CACC,aAAO,KAAK3J,KAAL,CAAWO,QAAX,CAAoB,cAApB,EAAoC,YAAM;CAChD,eAAOE,aAAG,CAACC,MAAX,uBAEI0J,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAFJ;CAKA,OANM,CAAP;CAOA;;;uCAGD;CACC,aAAO,KAAKrK,KAAL,CAAWO,QAAX,CAAoB,cAApB,EAAoC,YAAM;CAChD,eAAOE,aAAG,CAACC,MAAX,uBAEI0J,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAFJ;CAKA,OANM,CAAP;CAOA;;;2CAGD;CACC,aAAO,KAAKpB,UAAZ;CACA;;;gCAGD;CAAA;;CACC,aAAO,KAAKjJ,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAO+J,uBAAY,CAACC,MAAb,CAAoB;CAC1BC,UAAAA,EAAE,EAAE,MAAI,CAAC1B,OADiB;CAE1BnI,UAAAA,SAAS,EAAE,uCAFe;CAG1B8J,UAAAA,QAAQ,EAAE,IAHgB;CAI1BC,UAAAA,WAAW,EAAE,MAAI,CAACzB,UAAL,CAAgBtH,SAAhB,EAJa;CAK1BgJ,UAAAA,WAAW,EAAE;CACZC,YAAAA,QAAQ,EAAE,IADE;CAEZC,YAAAA,SAAS,EAAE;CAFC,WALa;CAS1BC,UAAAA,OAAO,EAAE,CATiB;CAU1BC,UAAAA,cAAc,EAAE,EAVU;CAW1BjF,UAAAA,KAAK,EAAE,GAXmB;CAY1BkF,UAAAA,SAAS,EAAE,CAAC,EAZc;CAa1BC,UAAAA,UAAU,EAAE,CAAC,GAba;CAc1BC,UAAAA,OAAO,EAAE,MAAI,CAACC,eAAL,EAdiB;CAe1BC,UAAAA,UAAU,EAAE,IAfc;CAgB1BC,UAAAA,eAAe,EAAE,MAAI,CAACrC;CAhBI,SAApB,CAAP;CAkBA,OAnBM,CAAP;CAoBA;;;gCAGD;CAAA;;CACC,aAAO,KAAKhJ,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAO,MAAI,CAACgJ,QAAL,CAAc3I,QAAd,EAAP;CACA,OAFM,CAAP;CAGA;;;iCAEWY,OACZ;CACC,WAAKpD,QAAL,CAAcoD,KAAK,CAACwI,OAAN,GAAgBvI,KAA9B;CACA,WAAKwB,QAAL,CAAczB,KAAd;CACA;;;sCAEgBA,OACjB;CACC,WAAK/G,GAAL,CAAS6Q,OAAT;CACA,WAAKlN,QAAL,CAAcoD,KAAK,CAACwI,OAAN,GAAgBvI,KAA9B;CACA,WAAKwB,QAAL,CAAczB,KAAd;CACA;;;oCAEcA,OACf;CACC,UAAM+J,WAAW,GAAG,IAAIrN,UAAJ,CAAesD,KAAK,CAACwI,OAAN,GAAgBvP,GAA/B,CAApB;CACA,WAAK2D,QAAL,CAAcmN,WAAd;CACA,WAAKtI,QAAL,CAAc,IAAI8G,0BAAJ,CAAc;CAACyB,QAAAA,IAAI,EAAE;CAAC/J,UAAAA,KAAK,EAAE8J;CAAR;CAAP,OAAd,CAAd;CACA;;;qCAGD;CACC,WAAKnN,QAAL,CAAc,KAAK0L,UAAnB;CACA,WAAKI,QAAL,GAAgBC,KAAhB;CACA,WAAKlH,QAAL,CAAc,IAAI8G,0BAAJ,CAAc;CAACyB,QAAAA,IAAI,EAAE;CAAC/J,UAAAA,KAAK,EAAE,KAAKb,QAAL;CAAR;CAAP,OAAd,CAAd;CACA;;;wCAGD;CACC,WAAK6I,MAAL,CAAYvC,gBAAZ;CACA,WAAK4C,UAAL,GAAkB,KAAKlJ,QAAL,EAAlB;CACA,WAAKsJ,QAAL,GAAgBuB,IAAhB;;CACA,UAAI,KAAKvB,QAAL,GAAgBwB,OAAhB,EAAJ,EACA;CACC,aAAKjR,GAAL,CAAS4I,KAAT;CACA;CACD;;;8BAEQlF,OACT;CACC,UAAI,KAAKoF,cAAL,CAAoBpF,KAApB,CAAJ,EACA;CACC,0GAAeA,KAAf;CAEA,aAAKoL,QAAL,CAAcnL,QAAd,CAAuBD,KAAvB;CACA,aAAK1D,GAAL,CAAS2D,QAAT,CAAkBD,KAAlB;CACA,aAAK8K,UAAL,CAAgB7K,QAAhB,CAAyBD,KAAzB;CAEA,aAAKwN,WAAL,CAAiBxN,KAAjB;CACA;CACD;;;iCAEWA,OACZ;CACC,UAAIA,KAAK,KAAK,IAAd,EACA;CACC,YAAI,KAAKoL,QAAL,CAAcqC,QAAd,EAAJ,EACA;CACC,eAAKnR,GAAL,CAAS0G,WAAT;CACA,SAHD,MAKA;CACC,eAAK1G,GAAL,CAASgJ,SAAT;CACA;;CACD,aAAKwF,UAAL,CAAgBxF,SAAhB;CACA;CACD;;;mCAGD;CACC,WAAKhJ,GAAL,CAAS0G,WAAT;CACA,WAAK8H,UAAL,CAAgB9H,WAAhB;CACA;;;gCAGD;CACC,aAAO,KAAK1G,GAAL,CAASmR,QAAT,MAAuB,KAAK3C,UAAL,CAAgB2C,QAAhB,EAA9B;CACA;;;GA7MuCrK;;;;;;;;;;;;KCLpBsK;;;CAKpB;CACA,qBACA;CAAA;;CAAA;CACC;CACA,UAAK7L,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;;CACA,UAAK8B,iBAAL,CAAuB,mCAAvB;;CACAQ,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKV,SAAL,EAAX,EAA6B,OAA7B,EAAsC;CAAA,aAAM,MAAKmK,OAAL,EAAN;CAAA,KAAtC;CAJD;CAKC;;;;iCAGD;CACC,aAAO,KAAK9L,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOE,aAAG,CAACC,MAAX,sBAIK0J,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAJL;CAQA,OATM,CAAP;CAUA;;;gCAGD;CACC,aAAO,KAAKrK,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAO,IAAIrC,UAAJ,CAAe2N,OAAO,CAACE,OAAvB,CAAP;CACA,OAFM,CAAP;CAGA;;;+BAGD;CACC,WAAKtI,SAAL;CACA,WAAKpC,IAAL,CAAU,UAAV,EAAsB;CAACI,QAAAA,KAAK,EAAE,KAAKb,QAAL;CAAR,OAAtB;CACA;;;iCAGD;CACC9B,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAKC,SAAL,EAAb,EAA+BkK,OAAO,CAACjK,YAAvC;CACA;;;mCAGD;CACC9C,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKF,SAAL,EAAhB,EAAkCkK,OAAO,CAACjK,YAA1C;CACA;;;gCAGD;CACC,aAAO9C,aAAG,CAACgD,QAAJ,CAAa,KAAKH,SAAL,EAAb,EAA+BkK,OAAO,CAACjK,YAAvC,CAAP;CACA;;;oCAEczD,OACf;CACC,aAAQA,KAAK,KAAK,IAAX,IAAqB,KAAKyC,QAAL,GAAgBjC,SAAhB,OAAgCR,KAAK,CAACQ,SAAN,EAA5D;CACA;;;GA3DmC2C;;6BAAhBuK,yBAEU;6BAFVA,oBAGK;;CCVnB,SAASG,gBAAT,CAA0BC,MAA1B,EACP;CACC,SAAO,IAAIC,MAAJ,CAAWC,cAAc,CAACF,MAAD,CAAzB,CAAP;CACA;AAED,CAAO,SAASE,cAAT,CAAwBF,MAAxB,EACP;CACC,SAAOA,MAAM,CAACG,MAAP,CAAc7O,OAAd,CAAsB,cAAtB,EAAsC,EAAtC,CAAP;CACA;;CCLM,IAAM8O,eAAe,GAAG,mCAAxB;AACP,CAAO,IAAMC,oBAAoB,GAAG,kDAA7B;CACP,IAAMC,UAAU,GAAGJ,cAAc,CAAC5R,UAAD,CAAjC;AACA,CAAO,IAAMiS,qBAAqB,GAAG,IAAIN,MAAJ,CACpC,+CAA+CK,UAA/C,GAA4D,IADxB,EAC8B,IAD9B,CAA9B;CAKP;CAEA;CACA;CACA;CACA;CACA;;AAEA,CAAe,SAASE,gBAAT,CAA0BpS,SAA1B,EACf;CACC,SAAO,CAAC,CAACA,SAAS,CAACK,IAAV,GAAiBJ,KAAjB,CAAuB+R,eAAvB,CAAT;CACA;;KCToBK;CASpB,yBAAYvO,KAAZ,EACA;CAAA;CACC,SAAKA,KAAL,GAAa;CACZwO,MAAAA,IAAI,EAAE,IAAIzO,UAAJ,CAAe,SAAf,CADM;CAEZ0O,MAAAA,EAAE,EAAE,IAAI1O,UAAJ,CAAe2N,OAAO,CAACE,OAAvB,CAFQ;CAGZc,MAAAA,KAAK,EAAEH,aAAa,CAACI,aAHT;CAIZC,MAAAA,IAAI,EAAEL,aAAa,CAACM;CAJR,KAAb;CAMA,SAAK5O,QAAL,CAAcD,KAAd;CACA;;;;+BAGD;CACC,aAAO,KAAKA,KAAL,CAAWwO,IAAX,CAAgBM,OAAhB,KAA4B,GAA5B,GAAkC,KAAK9O,KAAL,CAAWyO,EAAX,CAAcK,OAAd,EAAlC,GAA4D,GAA5D,GAAkE,KAAKC,QAAL,EAAlE,GAAoF,GAApF,GAA0F,KAAKC,OAAL,EAAjG;CACA;;;;8BAGQhP,OACT;CACC,UAAIK,cAAI,CAACC,QAAL,CAAcN,KAAd,CAAJ,EACA;CACC,YAAIA,KAAK,YAAYuO,aAArB,EACA;CACC,eAAKvO,KAAL,CAAWwO,IAAX,GAAkB,IAAIzO,UAAJ,CAAeC,KAAK,CAACiP,OAAN,EAAf,CAAlB;CACA,eAAKjP,KAAL,CAAWyO,EAAX,GAAgB,IAAI1O,UAAJ,CAAeC,KAAK,CAACkP,KAAN,EAAf,CAAhB;CACA,eAAKlP,KAAL,CAAW0O,KAAX,GAAmB1O,KAAK,CAAC+O,QAAN,EAAnB;CACA,eAAK/O,KAAL,CAAW4O,IAAX,GAAkB5O,KAAK,CAACgP,OAAN,EAAlB;CACA,SAND,MAQA;CACC,cAAI,UAAUhP,KAAd,EACA;CACC,iBAAKA,KAAL,CAAWwO,IAAX,GAAkB,IAAIzO,UAAJ,CAAeC,KAAK,CAACwO,IAArB,CAAlB;CACA;;CACD,cAAI,QAAQxO,KAAZ,EACA;CACC,iBAAKA,KAAL,CAAWyO,EAAX,GAAgB,IAAI1O,UAAJ,CAAeC,KAAK,CAACyO,EAArB,CAAhB;CACA;;CACD,cAAI,WAAWzO,KAAf,EACA;CACC,iBAAKA,KAAL,CAAW0O,KAAX,GAAmBlQ,cAAI,CAACC,QAAL,CAAcuB,KAAK,CAAC0O,KAApB,CAAnB;CACA;;CACD,cAAI,UAAU1O,KAAd,EACA;CACC,iBAAKA,KAAL,CAAW4O,IAAX,GAAkB5O,KAAK,CAAC4O,IAAxB;CACA;CACD;CACD,OA5BD,MA8BK,IAAIvO,cAAI,CAACK,QAAL,CAAcV,KAAd,KAAwBsO,gBAAgB,CAACtO,KAAD,CAA5C,EACL;CACC,aAAKmP,mBAAL,CAAyBnP,KAAzB;CACA;;CAED,aAAO,IAAP;CACA;;;gCAEUd,SACX;CACC,WAAKc,KAAL,CAAWwO,IAAX,CAAgBzN,UAAhB,CAA2B7B,OAA3B;CACA,WAAKc,KAAL,CAAWyO,EAAX,CAAc1N,UAAd,CAAyB7B,OAAzB;CAEA,aAAO,IAAP;CACA;;;yCAEmBc,OACpB;CACC,UAAMoP,WAAW,GAAGpP,KAAK,CAACzD,IAAN,GAAaJ,KAAb,CAAmB+R,eAAnB,CAApB;;CACA,UAAI,CAAC,CAACkB,WAAN,EACA;CACC,aAAKnP,QAAL,CAAc;CAAC2O,UAAAA,IAAI,EAAEQ,WAAW,CAAC,CAAD;CAAlB,SAAd;CACA;;CAED,UAAMC,YAAY,GAAGrP,KAAK,CAACzD,IAAN,GAAaJ,KAAb,CAAmBgS,oBAAnB,CAArB;;CACA,UAAI,CAAC,CAACkB,YAAN,EACA;CACC,aAAKpP,QAAL,CAAc;CAACyO,UAAAA,KAAK,EAAEW,YAAY,CAAC,CAAD;CAApB,SAAd;CACA;;CAGD,UAAMC,YAAY,GAAGtP,KAAK,CAACzD,IAAN,GAAaJ,KAAb,CAAmBkS,qBAAnB,CAArB;;CACA,UAAIiB,YAAY,IAAIA,YAAY,CAAC1S,MAAb,GAAsB,CAA1C,EACA;CACC,aAAKqD,QAAL,CAAc;CAACuO,UAAAA,IAAI,EAAE,IAAIzO,UAAJ,CAAeuP,YAAY,CAAC,CAAD,CAA3B;CAAP,SAAd;CACA,aAAKrP,QAAL,CAAc;CAACwO,UAAAA,EAAE,EAAE,IAAI1O,UAAJ,CAAeuP,YAAY,CAACA,YAAY,CAAC1S,MAAb,GAAsB,CAAvB,CAA3B;CAAL,SAAd;CACA;CACD;;;+BAGD;CACC,aAAO,KAAKoD,KAAL,CAAWwO,IAAlB;CACA;;;6BAGD;CACC,aAAO,KAAKxO,KAAL,CAAWyO,EAAlB;CACA;;;gCAGD;CACC,aAAO,KAAKzO,KAAL,CAAW0O,KAAlB;CACA;;;8BAEQA,OACT;CACC,UAAIrO,cAAI,CAACkP,QAAL,CAAcb,KAAd,CAAJ,EACA;CACC,aAAK1O,KAAL,CAAW0O,KAAX,GAAmBtR,IAAI,CAACC,GAAL,CAASD,IAAI,CAACD,GAAL,CAASuR,KAAT,EAAgB,CAAhB,CAAT,EAA6B,GAA7B,CAAnB;CACA;;CACD,aAAO,IAAP;CACA;;;+BAGD;CACC,aAAO,KAAK1O,KAAL,CAAW4O,IAAlB;CACA;;;6BAEOA,MACR;CACC,UAAIA,IAAI,KAAKL,aAAa,CAACiB,WAAvB,IAAsCZ,IAAI,KAAKL,aAAa,CAACkB,WAAjE,EACA;CACC,aAAKzP,KAAL,CAAW4O,IAAX,GAAkBA,IAAlB;CACA;;CACD,aAAO,IAAP;CACA;;;kCAGD;CAAA;;CACC,qBAAO,CAAC,KAAK5O,KAAL,CAAWwO,IAAX,CAAgBrO,UAAhB,KAA+B,KAAKH,KAAL,CAAWyO,EAAX,CAActO,UAAd,EAAhC,IAA8D,CAArE,uCAA0Eb,wBAAwB,CAAC3B,CAAnG;CACA;;;sCAGD;CACC,UAAM+Q,KAAK,GAAG,KAAK1O,KAAL,CAAW0O,KAAzB;CACA,UAAME,IAAI,GAAG,KAAK5O,KAAL,CAAW4O,IAAxB;CACA,UAAMc,UAAU,GAAG,KAAK1P,KAAL,CAAWwO,IAAX,CAAgB7L,cAAhB,EAAnB;CACA,UAAM7E,QAAQ,GAAG,KAAKkC,KAAL,CAAWyO,EAAX,CAAc9L,cAAd,EAAjB;CAEA,aAAOiM,IAAI,KAAK,QAAT,6BACeF,KADf,kBAC4BgB,UAD5B,kBAC8C5R,QAD9C,yEAEgD4R,UAFhD,kBAEkE5R,QAFlE,WAAP;CAGA;;;gDAGD;CACC,aAAO,uCAAgC,KAAKkC,KAAL,CAAWwO,IAAX,CAAgBtO,MAAhB,EAAhC,kEACiC,KAAKF,KAAL,CAAWyO,EAAX,CAAcvO,MAAd,EADjC,mBAAP;CAEA;;;6BAEcyP,QAAuBC,QACtC;CAAA,UAD6D5Q,IAC7D,uEAD4E,IAC5E;CACC,UAAM6Q,IAAI,GACR9P,UAAU,CAAC+P,OAAX,CAAmBH,MAAM,CAACV,OAAP,EAAnB,EAAqCW,MAAM,CAACX,OAAP,EAArC,KACGlP,UAAU,CAAC+P,OAAX,CAAmBH,MAAM,CAACT,KAAP,EAAnB,EAAmCU,MAAM,CAACV,KAAP,EAAnC,CAFQ,IAIXnP,UAAU,CAAC+P,OAAX,CAAmBH,MAAM,CAACT,KAAP,EAAnB,EAAmCU,MAAM,CAACX,OAAP,EAAnC,KACGlP,UAAU,CAAC+P,OAAX,CAAmBH,MAAM,CAACV,OAAP,EAAnB,EAAqCW,MAAM,CAACV,KAAP,EAArC,CALL;CAOA,UAAMa,GAAG,GAAG/Q,IAAI,GACZ2Q,MAAM,CAACZ,QAAP,OAAsBa,MAAM,CAACb,QAAP,EAAtB,IAA2CY,MAAM,CAACX,OAAP,OAAqBY,MAAM,CAACZ,OAAP,EADpD,GAEb,IAFH;CAIA,aAAQa,IAAI,IAAIE,GAAhB;CACA;;;;;6BA5KmBxB,8BAEC;6BAFDA,8BAGC;6BAHDA,gCAIG;6BAJHA,+BAKE;;CCThB,IAAMyB,WAAW,GAAG,OAApB;AACP,CAAO,IAAMC,YAAY,GAAG,UAArB;;KCJcC;;;;;;;yCA8IpB;CACC,aAAOA,SAAS,CAACrO,KAAV,CAAgBO,QAAhB,CAAyB,SAAzB,EAAoC,YAAM;CAChD,YAAM+N,OAAO,GAAG,EAAhB;CACAD,QAAAA,SAAS,CAACE,cAAV,CAAyB5G,OAAzB,CAAiC,UAAA6G,MAAM,EAAI;CAC1CF,UAAAA,OAAO,CAACxG,IAAR,CAAa;CACZ0C,YAAAA,EAAE,EAAEgE,MAAM,CAAChE,EADC;CAEZuC,YAAAA,IAAI,EAAE,OAFM;CAGZtF,YAAAA,KAAK,EAAE+G,MAAM,CAAC/G,KAAP,CAAagH,GAAb,CAAiB,UAAA7G,IAAI;CAAA,qBAAI,IAAI1J,UAAJ,CAAenC,QAAQ,CAAC6L,IAAD,CAAvB,CAAJ;CAAA,aAArB;CAHK,WAAb;CAKA,SAND;CAQA,eAAO0G,OAAP;CACA,OAXM,CAAP;CAYA;;;6CAGD;CACC,aAAO,KAAKtO,KAAL,CAAWO,QAAX,CAAoB,SAApB,EAA+B,YAAM;CAC3C,YAAMiO,MAAM,GAAG;CACdhE,UAAAA,EAAE,EAAE,gBADU;CAEd/C,UAAAA,KAAK,EAAE;CAFO,SAAf;CAIA,YAAMiH,OAAO,GAAG,IAAIxQ,UAAJ,CAAeY,aAAG,CAACC,KAAJ,CAAUC,QAAQ,CAACC,eAAnB,EAAoC,WAApC,EAAiDvE,IAAjD,EAAf,CAAhB;CACA8T,QAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAewQ,OAAf,CAAlB;;CAEA,YAAIA,OAAO,CAACnQ,MAAR,GAAiB7C,CAAjB,IAAsB,EAA1B,EACA;CACC,cAAMiT,YAAY,GAAID,OAAO,CAACnQ,MAAR,GAAiB5C,CAAjB,GAAqB,EAAtB,GAClBJ,IAAI,CAACqT,IAAL,CAAUF,OAAO,CAACnQ,MAAR,GAAiB5C,CAAjB,GAAqB,GAArB,GAA2B,CAArC,CADkB,GAElBJ,IAAI,CAACsT,KAAL,CAAWH,OAAO,CAACnQ,MAAR,GAAiB5C,CAAjB,GAAqB,GAArB,GAA2B,CAAtC,CAFH;CAGA,cAAMmT,WAAW,GAAG,IAAIH,YAAxB;CACA,cAAMI,YAAY,GAAGL,OAAO,CAACnQ,MAAR,GAAiB5C,CAAjB,IAAsBgT,YAAY,GAAG,CAArC,CAArB;CACA,cAAMK,WAAW,GAAG,CAAC,MAAMN,OAAO,CAACnQ,MAAR,GAAiB5C,CAAxB,KAA8BmT,WAAW,GAAG,CAA5C,CAApB;;CACA,eAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIN,YAArB,EAAmCM,CAAC,EAApC,EACA;CACCT,YAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAewQ,OAAf,EAAwBQ,MAAxB,CAA+BH,YAAY,GAAGE,CAA9C,CAAlB;CACA;;CACD,eAAK,IAAIE,EAAE,GAAG,CAAd,EAAiBA,EAAE,IAAIL,WAAvB,EAAoCK,EAAE,EAAtC,EACA;CACCX,YAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAewQ,OAAf,EAAwBU,OAAxB,CAAgCJ,WAAW,GAAGG,EAA9C,CAAlB;CACA;;CAED,cAAME,YAAY,GAAG,EAArB;CACA,cAAMC,YAAY,GAAG,EAArB;CACA,cAAMC,WAAW,GAAG,IAAIrR,UAAJ,CAAemQ,SAAS,CAACmB,YAAzB,CAApB;CACAhB,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAeqR,WAAf,CAAlB;CAEAf,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAeqR,WAAW,CAACL,MAAZ,CAAmBG,YAAnB,EAAiCI,QAAjC,CAA0CH,YAA1C,CAAf,CAAlB;CACAd,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAeqR,WAAW,CAACL,MAAZ,CAAmBG,YAAnB,EAAiCI,QAAjC,CAA0CH,YAA1C,CAAf,CAAlB;CACAC,UAAAA,WAAW,CAACH,OAAZ,CAAoBC,YAAY,GAAG,CAAnC,EAAsCK,UAAtC,CAAiDJ,YAAY,GAAG,CAAhE;CAEAd,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAeqR,WAAW,CAACH,OAAZ,CAAoBC,YAApB,EAAkCK,UAAlC,CAA6CJ,YAA7C,CAAf,CAAlB;CACAd,UAAAA,MAAM,CAAC/G,KAAP,CAAa,EAAb,IAAmB,IAAIvJ,UAAJ,CAAeqR,WAAW,CAACH,OAAZ,CAAoBC,YAApB,EAAkCK,UAAlC,CAA6CJ,YAA7C,CAAf,CAAnB;CACAC,UAAAA,WAAW,CAACL,MAAZ,CAAmBG,YAAY,GAAG,CAAlC,EAAqCI,QAArC,CAA8CH,YAAY,GAAG,CAA7D;CAEAd,UAAAA,MAAM,CAAC/G,KAAP,CAAa,EAAb,IAAmB,IAAIvJ,UAAJ,CAAeqR,WAAf,EAA4BI,SAA5B,CAAsC,GAAtC,CAAnB;CACA,SA/BD,MAiCA;CACC,cAAMhQ,MAAM,GAAG,CAAC,KAAK+O,OAAO,CAACnQ,MAAR,GAAiB5C,CAAvB,IAA4B,CAA3C;CACA,cAAMiU,OAAO,GAAG,CAAClB,OAAO,CAACnQ,MAAR,GAAiB5C,CAAjB,GAAqB,EAAtB,IAA4B,CAA5C;CACA,cAAMkU,MAAM,GAAG,CAAC,KAAKnB,OAAO,CAACnQ,MAAR,GAAiB7C,CAAvB,IAA4B,CAA3C;CACA,cAAMoU,OAAO,GAAG,CAACpB,OAAO,CAACnQ,MAAR,GAAiB7C,CAAjB,GAAqB,EAAtB,IAA4B,CAA5C;CAEA8S,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACQ,MAAR,CAAeU,OAAf,EAAwBH,QAAxB,CAAiCI,MAAjC,CAAf,CAAlB;CACArB,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACQ,MAAR,CAAeU,OAAf,EAAwBH,QAAxB,CAAiCI,MAAjC,CAAf,CAAlB;CACArB,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACQ,MAAR,CAAeU,OAAf,EAAwBH,QAAxB,CAAiCI,MAAjC,CAAf,CAAlB;CACAnB,UAAAA,OAAO,CAACU,OAAR,CAAgBQ,OAAO,GAAG,CAA1B,EAA6BF,UAA7B,CAAwCG,MAAM,GAAG,CAAjD;CAEArB,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACgB,UAAR,CAAmBI,OAAnB,EAA4BV,OAA5B,CAAoCzP,MAApC,CAAf,CAAlB;CACA6O,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACgB,UAAR,CAAmBI,OAAnB,EAA4BV,OAA5B,CAAoCzP,MAApC,CAAf,CAAlB;CACA6O,UAAAA,MAAM,CAAC/G,KAAP,CAAa,EAAb,IAAmB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACgB,UAAR,CAAmBI,OAAnB,EAA4BV,OAA5B,CAAoCzP,MAApC,CAAf,CAAnB;CACA+O,UAAAA,OAAO,CAACe,QAAR,CAAiBK,OAAO,GAAG,CAA3B,EAA8BZ,MAA9B,CAAqCvP,MAAM,GAAG,CAA9C;CAEA6O,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACiB,SAAR,CAAkB,EAAlB,CAAf,CAAlB;CACAnB,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACiB,SAAR,CAAkB,CAAC,EAAnB,CAAf,CAAlB;CACAnB,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACiB,SAAR,CAAkB,GAAlB,CAAf,CAAlB;CACAnB,UAAAA,MAAM,CAAC/G,KAAP,CAAa,CAAb,IAAkB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACiB,SAAR,CAAkB,EAAlB,CAAf,CAAlB;CACAnB,UAAAA,MAAM,CAAC/G,KAAP,CAAa,EAAb,IAAmB,IAAIvJ,UAAJ,CAAewQ,OAAO,CAACiB,SAAR,CAAkB,EAAlB,CAAf,CAAnB;CACA;;CACD,eAAOnB,MAAP;CACA,OAhEM,CAAP;CAiEA;;;8CAGD;CACC,aAAO,KAAKxO,KAAL,CAAWO,QAAX,CAAoB,eAApB,EAAqC,YAAM;CACjD,YAAMiO,MAAM,GAAG;CACdhE,UAAAA,EAAE,EAAE,eADU;CAEd/C,UAAAA,KAAK,EAAE;CAFO,SAAf;CAIA,YAAMsI,KAAK,GAAG,IAAI7R,UAAJ,CAAe,SAAf,CAAd;CAEAsQ,QAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAe6R,KAAf,CAAlB;CACAvB,QAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAe6R,KAAK,CAACb,MAAN,CAAa,KAAb,CAAf,CAAlB;CACAV,QAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAe6R,KAAK,CAACb,MAAN,CAAa,KAAb,CAAf,CAAlB;CACAV,QAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAe6R,KAAK,CAACb,MAAN,CAAa,KAAb,CAAf,CAAlB;CACAV,QAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAe6R,KAAK,CAACb,MAAN,CAAa,KAAb,CAAf,CAAlB;CACAV,QAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAe6R,KAAK,CAACb,MAAN,CAAa,KAAb,CAAf,CAAlB;CACAV,QAAAA,MAAM,CAAC/G,KAAP,CAAaK,IAAb,CAAkB,IAAI5J,UAAJ,CAAe6R,KAAK,CAACb,MAAN,CAAa,IAAb,CAAf,CAAlB;CAEA,eAAOV,MAAP;CACA,OAhBM,CAAP;CAiBA;;;+CAEgCzO,SACjC;CACC,UAAM0H,KAAK,GAAG,EAAd;CACA,UAAMuI,KAAK,GAAG,CACb,CAAC,CAAD,EAAI,CAAJ,CADa,EAEb,CAAC,CAAD,EAAI,CAAJ,CAFa,EAGb,CAAC,CAAD,EAAI,EAAJ,CAHa,EAIb,CAAC,CAAD,EAAI,CAAJ,CAJa,EAKb,CAAC,CAAD,EAAI,CAAJ,CALa,EAMb,CAAC,CAAD,EAAI,CAAJ,CANa,EAOb,CAAC,EAAD,EAAK,CAAL,CAPa,EAQb,CAAC,CAAD,EAAI,EAAJ,CARa,CAAd;CAUAA,MAAAA,KAAK,CAACrI,OAAN,CAAc,UAAAsI,IAAI,EAAI;CACrBxI,QAAAA,KAAK,CAACK,IAAN,CAAW,IAAI4E,aAAJ,CAAkB;CAC5BC,UAAAA,IAAI,EAAE,IAAIzO,UAAJ,CAAe6B,OAAO,CAAC0H,KAAR,CAAcwI,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAxB,CAAf,CADsB;CAE5BrD,UAAAA,EAAE,EAAE,IAAI1O,UAAJ,CAAe6B,OAAO,CAAC0H,KAAR,CAAcwI,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAxB,CAAf,CAFwB;CAG5BpD,UAAAA,KAAK,EAAEH,aAAa,CAACI,aAHO;CAI5BC,UAAAA,IAAI,EAAEL,aAAa,CAACM;CAJQ,SAAlB,CAAX;CAMA,OAPD;CASA,aAAO;CACND,QAAAA,IAAI,EAAEqB,YADA;CAEN3G,QAAAA,KAAK,EAAEA;CAFD,OAAP;CAIA;;;;;6BAjRmB4G,2BAEU;6BAFVA,oBAIL,IAAIpO,eAAK,CAACC,WAAV;6BAJKmO,6BAKQ,CAC3B;CACC7D,EAAAA,EAAE,EAAE,QADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAD2B,EAQ3B;CACC+C,EAAAA,EAAE,EAAE,YADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAR2B,EAe3B;CACC+C,EAAAA,EAAE,EAAE,KADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAf2B,EAsB3B;CACC+C,EAAAA,EAAE,EAAE,cADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAtB2B,EA6B3B;CACC+C,EAAAA,EAAE,EAAE,UADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CA7B2B,EAoC3B;CACC+C,EAAAA,EAAE,EAAE,SADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CApC2B,EA2C3B;CACC+C,EAAAA,EAAE,EAAE,cADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CA3C2B,EAkD3B;CACC+C,EAAAA,EAAE,EAAE,YADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAlD2B,EAyD3B;CACC+C,EAAAA,EAAE,EAAE,WADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAzD2B,EAgE3B;CACC+C,EAAAA,EAAE,EAAE,SADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAhE2B,EAuE3B;CACC+C,EAAAA,EAAE,EAAE,OADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAvE2B,EA8E3B;CACC+C,EAAAA,EAAE,EAAE,KADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CA9E2B,EAqF3B;CACC+C,EAAAA,EAAE,EAAE,QADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CArF2B,EA4F3B;CACC+C,EAAAA,EAAE,EAAE,aADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CA5F2B,EAmG3B;CACC+C,EAAAA,EAAE,EAAE,YADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAnG2B,EA0G3B;CACC+C,EAAAA,EAAE,EAAE,UADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CA1G2B,EAiH3B;CACC+C,EAAAA,EAAE,EAAE,KADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAjH2B,EAwH3B;CACC+C,EAAAA,EAAE,EAAE,QADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CAxH2B,EA+H3B;CACC+C,EAAAA,EAAE,EAAE,SADL;CAEC/C,EAAAA,KAAK,EAAE,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EACiD,SADjD,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAEiD,SAFjD;CAFR,CA/H2B;;;;;;;;;;;;;;;;;;;;;;KCARyI;;;CASpB,kBAAYnQ,OAAZ,EACA;CAAA;;CAAA;CACC;CACA,UAAKC,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;;CACA,UAAK8B,iBAAL,CAAuB,kCAAvB;;CAEA,UAAKwI,EAAL,GAAUzK,OAAO,CAACyK,EAAlB;CACA,UAAKuC,IAAL,GAAYhN,OAAO,CAACgN,IAAR,IAAgBoB,WAA5B;CACA,UAAK1G,KAAL,GAAa1H,OAAO,CAAC0H,KAArB;CACA,UAAK0I,UAAL,GAAkB,IAAlB;CARD;CASC;;;;6BAGD;CACC,aAAO,KAAK3F,EAAZ;CACA;;;yCAGD;CACC,UAAMzK,OAAO,GAAI,KAAKgN,IAAL,KAAcqB,YAAf,GACb;CAACrB,QAAAA,IAAI,EAAEqB,YAAP;CAAqB3G,QAAAA,KAAK,EAAE,KAAKA;CAAjC,OADa,GAEb4G,SAAS,CAAC+B,yBAAV,CAAoC;CAAC3I,QAAAA,KAAK,EAAE,KAAKA;CAAb,OAApC,CAFH;CAIA,aAAO,IAAIyI,MAAJ,CAAWnQ,OAAX,CAAP;CACA;;;iCAGD;CAAA;;CACC,aAAO,KAAKC,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOE,aAAG,CAACC,MAAX,sBAEI,MAAI,CAAC+G,KAAL,CAAWgH,GAAX,CAAe,UAAC7G,IAAD,EAAU;CAC1B,iBAAO,MAAI,CAACyI,aAAL,CAAmBzI,IAAI,CAACqF,OAAL,EAAnB,CAAP;CACA,SAFC,CAFJ;CAOA,OARM,CAAP;CASA;;;mCAEa7P,MACd;CAAA;;CACC,aAAO,KAAK4C,KAAL,CAAWO,QAAX,CAAoBnD,IAApB,EAA0B,YAAM;CACtC,YAAMqE,KAAK,GAAG,MAAI,CAAC6O,aAAL,CAAmBlT,IAAnB,CAAd;;CACA,YAAM2B,KAAK,GAAGP,cAAI,CAACK,QAAL,CAAc4C,KAAd,IAAuBA,KAAvB,GAA+BA,KAAK,CAACX,cAAN,EAA7C;CACA,YAAM8G,IAAI,GAAGnH,aAAG,CAACC,MAAP,uBAGa3B,KAHb,EAIK3B,IAJL,CAAV;CAOAoF,QAAAA,eAAK,CAACH,IAAN,CAAWuF,IAAX,EAAiB,OAAjB,EAA0B,MAAI,CAACK,WAAL,CAAiB5F,IAAjB,CAAsB,MAAtB,CAA1B;CAEA,eAAOuF,IAAP;CACA,OAbM,CAAP;CAcA;;;mCAEaxK,MACd;CACC,aAAO,KAAKqK,KAAL,CAAW8I,IAAX,CAAgB,UAAA3I,IAAI;CAAA,eAAIxK,IAAI,KAAKwK,IAAI,CAACqF,OAAL,EAAb;CAAA,OAApB,KAAoD,IAA3D;CACA;;;mCAEa9O,OACd;CACC,UAAIA,KAAK,KAAK,IAAd,EACA;CACC,eAAO,KAAP;CACA;;CACD,aAAO,KAAKsJ,KAAL,CAAW+I,IAAX,CAAgB,UAAA5I,IAAI,EAAI;CAC9B,YAAIA,IAAI,YAAY1J,UAAhB,IAA8BC,KAAK,YAAYD,UAAnD,EACA;CACC,iBAAOA,UAAU,CAAC+P,OAAX,CAAmBrG,IAAnB,EAAyB,IAAI1J,UAAJ,CAAeC,KAAf,EAAsBe,UAAtB,CAAiC,CAAjC,CAAzB,CAAP;CACA,SAHD,MAIK,IAAI0I,IAAI,YAAY8E,aAAhB,IAAiCvO,KAAK,YAAYuO,aAAtD,EACL;CACC,iBAAOA,aAAa,CAACuB,OAAd,CAAsBrG,IAAtB,EAA4BzJ,KAA5B,EAAmC,KAAnC,CAAP;CACA;;CACD,eAAO,KAAP;CACA,OAVM,CAAP;CAWA;;;iCAEWqD,OACZ;CACC,WAAKiP,aAAL,CAAmBjP,KAAK,CAAC2G,aAAN,CAAoBC,OAApB,CAA4BhL,IAA/C;CAEA,UAAIe,KAAK,GAAG,IAAZ;;CACA,UAAI,KAAKgS,UAAL,KAAoB,IAAxB,EACA;CACChS,QAAAA,KAAK,GAAG,KAAKgS,UAAL,YAA2BzD,aAA3B,GACL,IAAIA,aAAJ,CAAkB,KAAKyD,UAAvB,CADK,GAEL,IAAIjS,UAAJ,CAAe,KAAKiS,UAApB,CAFH;CAGA;;CAED,WAAK9O,IAAL,CAAU,UAAV,EAAsB;CAACI,QAAAA,KAAK,EAAEtD;CAAR,OAAtB;CACA;;;mCAEaf,MACd;CAAA;;CACC,WAAK+S,UAAL,GAAkB,KAAKG,aAAL,CAAmBlT,IAAnB,CAAlB;CAEA,WAAKqK,KAAL,CAAWE,OAAX,CAAmB,UAACC,IAAD,EAAU;CAC5B,YAAM8I,QAAQ,GAAG9I,IAAI,CAACqF,OAAL,EAAjB;;CACA,YAAI7P,IAAI,KAAKsT,QAAb,EACA;CACC5R,UAAAA,aAAG,CAAC4C,QAAJ,CAAa,MAAI,CAAC2O,aAAL,CAAmBK,QAAnB,CAAb,EAA2CR,MAAM,CAACtO,YAAlD;CACA,SAHD,MAKA;CACC9C,UAAAA,aAAG,CAAC+C,WAAJ,CAAgB,MAAI,CAACwO,aAAL,CAAmBK,QAAnB,CAAhB,EAA8CR,MAAM,CAACtO,YAArD;CACA;CACD,OAVD;CAWA;;;oCAEczD,OACf;CACC,UAAIA,KAAK,KAAK,IAAd,EACA;CACC,YAAIA,KAAK,YAAYuO,aAArB,EACA;CACC,eAAK+D,aAAL,CACC,IAAI/D,aAAJ,CAAkBvO,KAAlB,EACEwS,QADF,CACWjE,aAAa,CAACI,aADzB,EAEE8D,OAFF,CAEUlE,aAAa,CAACM,YAFxB,EAGEC,OAHF,EADD;CAMA,SARD,MAUA;CACC,eAAKwD,aAAL,CACC,IAAIvS,UAAJ,CAAeC,KAAf,EACEe,UADF,CACa,CADb,EAEE+N,OAFF,EADD;CAKA;CACD;CACD;;;mCAGD;CAAA;;CACC,WAAKxF,KAAL,CAAWE,OAAX,CAAmB,UAAAC,IAAI,EAAI;CAC1B9I,QAAAA,aAAG,CAAC+C,WAAJ,CAAgB,MAAI,CAACwO,aAAL,CAAmBzI,IAAI,CAACqF,OAAL,EAAnB,CAAhB,EAAoDiD,MAAM,CAACtO,YAA3D;CACA,OAFD;CAGA;;;gCAGD;CAAA;;CACC,aAAO,KAAK6F,KAAL,CAAW+I,IAAX,CAAgB,UAAA5I,IAAI,EAAI;CAC9B,eAAO9I,aAAG,CAACgD,QAAJ,CAAa,MAAI,CAACuO,aAAL,CAAmBzI,IAAI,CAACqF,OAAL,EAAnB,CAAb,EAAiDiD,MAAM,CAACtO,YAAxD,CAAP;CACA,OAFM,CAAP;CAGA;;;GA9JkCN;;6BAAf4O,wBAOU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCPVW;;;CAapB,4BAAY9Q,OAAZ,EACA;CAAA;;CAAA;CACC;CADD,sFANI,EAMJ;CAAA,uFALmC,IAKnC;CAEC,UAAKC,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;;CACA,UAAK8B,iBAAL,CAAuB,4CAAvB;;CACA,UAAK8G,OAAL,GAAe,mBAAmBnM,cAAI,CAACoM,SAAL,EAAlC;CACA,UAAKC,oBAAL,GAA4BjJ,OAAO,CAACiF,WAApC;CAEA,UAAK8L,aAAL,GAAqB,MAAKA,aAAL,CAAmBzO,IAAnB,2CAArB;CACAG,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAK0O,aAAL,EAAX,EAAiC,OAAjC,EAA0C,YAAM;CAC/C,YAAK7G,QAAL,GAAgB8G,MAAhB;CACA,KAFD;CAGA,UAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0B5O,IAA1B,2CAA5B;CACAf,IAAAA,6BAAY,CAAC8H,SAAb,CAAuB,qDAAvB,EAA8E,MAAK6H,oBAAnF;CAZD;CAaC;;;;yCAGD;CAAA;;CACC,WAAKC,SAAL,CAAe7C,SAAS,CAAC8C,qBAAV,EAAf;CACA9C,MAAAA,SAAS,CAAC+C,iBAAV,GAA8B3C,GAA9B,CAAkC,UAAC7G,IAAD,EAAU;CAC3C,QAAA,MAAI,CAACsJ,SAAL,CAAetJ,IAAf;CACA,OAFD;CAGA;;;+BAES7H,SACV;CACC,WAAKC,KAAL,CAAWgB,MAAX,CAAkB,aAAlB;;CACA,UAAI,CAACqQ,MAAM,CAACC,IAAP,CAAY,KAAKhD,OAAjB,EAA0BvT,MAA3B,IAAqC,EAAEgF,OAAO,CAACyK,EAAR,IAAc,KAAK8D,OAArB,CAAzC,EACA;CACC,aAAKA,OAAL,CAAavO,OAAO,CAACyK,EAArB,IAA2BzK,OAA3B;CACA;CACD;;;yCAGD;CACC,aAAO8Q,gBAAgB,CAACU,cAAxB;CACA;;;mCAGD;CACC,aAAO,KAAKC,iBAAL,MAA4B,KAAKC,gBAAL,GAAwBC,KAAxB,EAAnC;CACA;;;uCAGD;CACC,aAAO,KAAKC,aAAL,CAAmB,KAAKC,WAAL,EAAnB,CAAP;CACA;;;wCAGD;CACC,aAAOP,MAAM,CAACC,IAAP,CAAY,KAAKhD,OAAjB,EAA0BvT,MAA1B,GACJ,KAAK4W,aAAL,CAAmBN,MAAM,CAACC,IAAP,CAAY,KAAKhD,OAAjB,EAA0B,CAA1B,CAAnB,CADI,GAEJ,IAFH;CAGA;;;mCAEa9D,IACd;CAAA;;CACC,UAAIA,EAAE,IAAI,KAAK8D,OAAf,EACA;CACC,eAAO,KAAKtO,KAAL,CAAWO,QAAX,CAAoBiK,EAApB,EAAwB;CAAA,iBAAM,IAAI0F,MAAJ,CAAW,MAAI,CAAC5B,OAAL,CAAa9D,EAAb,CAAX,CAAN;CAAA,SAAxB,CAAP;CACA,OAHD,MAKA;CACC,eAAO,IAAP;CACA;CACD;;;0CAEoBrM,OACrB;CACC,UAAIA,KAAK,KAAK,IAAd,EACA;CACC,eAAO,IAAP;CACA;;CAED,WAAK,IAAIqM,GAAT,IAAe,KAAK8D,OAApB,EACA;CACC,YAAME,MAAM,GAAG,KAAKmD,aAAL,CAAmBnH,GAAnB,CAAf;;CACA,YAAIgE,MAAM,IAAIrQ,KAAK,YAAYD,UAA/B,EACA;CACC,cAAIsQ,MAAM,CAACqD,aAAP,CAAqB1T,KAArB,CAAJ,EACA;CACC,mBAAOqQ,MAAP;CACA;CACD,SAND,MAOK,IAAIA,MAAM,IAAIrQ,KAAK,YAAYuO,aAA/B,EACL;CACC,cAAI8B,MAAM,CAACsD,iBAAP,GAA2BD,aAA3B,CAAyC1T,KAAzC,CAAJ,EACA;CACC,mBAAOqQ,MAAP;CACA;CACD;CACD;;CACD,aAAO,IAAP;CACA;;;iCAGD;CAAA;;CACC,aAAO,KAAKxO,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAOE,aAAG,CAACC,MAAX,sBAIM0J,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAJN,EAOsD,MAAI,CAAC0G,aAAL,EAPtD;CAUA,OAXM,CAAP;CAYA;;;qCAGD;CACC,aAAO,KAAK/Q,KAAL,CAAWO,QAAX,CAAoB,YAApB,EAAkC,YAAM;CAC9C,eAAOE,aAAG,CAACC,MAAX,uBACG0J,aAAG,CAACC,UAAJ,CAAe,kCAAf,CADH;CAGA,OAJM,CAAP;CAKA;;;yCAGD;CAAA;;CACC,aAAO,KAAKrK,KAAL,CAAWO,QAAX,CAAoB,gBAApB,EAAsC,YAAM;CAClD,eAAO,MAAI,CAACoB,SAAL,GAAiByB,aAAjB,CAA+B,sCAA/B,CAAP;CACA,OAFM,CAAP;CAGA;;;gCAGD;CAAA;;CACC;CACA,aAAO,KAAKpD,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAO+J,uBAAY,CAACC,MAAb,CAAoB;CAC1BC,UAAAA,EAAE,EAAE,MAAI,CAAC1B,OADiB;CAE1BnI,UAAAA,SAAS,EAAE,eAFe;CAG1B8J,UAAAA,QAAQ,EAAE,IAHgB;CAI1BC,UAAAA,WAAW,EAAE,MAAI,CAACqG,aAAL,EAJa;CAK1BpG,UAAAA,WAAW,EAAE;CACZC,YAAAA,QAAQ,EAAE,IADE;CAEZC,YAAAA,SAAS,EAAE;CAFC,WALa;CAS1B/E,UAAAA,KAAK,EAAE,GATmB;CAU1BmF,UAAAA,UAAU,EAAE,CAAC,GAVa;CAW1BC,UAAAA,OAAO,EAAE,MAAI,CAAC6G,cAAL,EAXiB;CAY1B3G,UAAAA,UAAU,EAAE,IAZc;CAa1BC,UAAAA,eAAe,EAAE,MAAI,CAACrC;CAbI,SAApB,CAAP;CAeA,OAhBM,CAAP;CAiBA;;;sCAGD;CAAA;;CACC,aAAO,KAAKhJ,KAAL,CAAWO,QAAX,CAAoB,aAApB,EAAmC,YAAM;CAC/C,YAAMyR,OAAO,GAAGvR,aAAG,CAACC,MAAP,uBAET0J,aAAG,CAACC,UAAJ,CAAe,yCAAf,CAFS,CAAb;CAMA,YAAM4H,YAAY,GAAGD,OAAO,CAAC5O,aAAR,CAAsB,6CAAtB,CAArB;;CACA,aAAK,IAAM8O,QAAX,IAAuB,MAAI,CAAC5D,OAA5B,EACA;CACC,cAAM6D,MAAM,GAAG,MAAI,CAACC,eAAL,CAAqBF,QAArB,CAAf;;CACA,cAAIA,QAAQ,KAAK,MAAI,CAACN,WAAL,EAAjB,EACA;CACC9S,YAAAA,aAAG,CAAC4C,QAAJ,CAAayQ,MAAb,EAAqBtB,gBAAgB,CAACjP,YAAtC;CACA,YAAA,MAAI,CAACyQ,QAAL,GAAgBH,QAAhB;CACA;;CACD1P,UAAAA,eAAK,CAACH,IAAN,CAAW8P,MAAX,EAAmB,OAAnB,EAA4B,MAAI,CAACrB,aAAjC;CACAhS,UAAAA,aAAG,CAACoJ,MAAJ,CAAWiK,MAAX,EAAmBF,YAAnB;CACA;;CAED,eAAOD,OAAP;CACA,OArBM,CAAP;CAsBA;;;qCAEeE,UAChB;CAAA;;CACC,aAAO,KAAKlS,KAAL,CAAWO,QAAX,CAAoB2R,QAAQ,GAAG,QAA/B,EAAyC,YAAM;CACrD,eAAOzR,aAAG,CAACC,MAAX,uBAC+DwR,QAD/D,EAGG,MAAI,CAAC5D,OAAL,CAAa4D,QAAb,EAAuBzK,KAAvB,CAA6BgH,GAA7B,CAAiC,UAAC7G,IAAD,EAAU;CAC1C,iBAAOnH,aAAG,CAACC,MAAX,uBAEsBlC,cAAI,CAACK,QAAL,CAAc+I,IAAd,IAAsBA,IAAtB,GAA6BA,IAAI,CAAC9G,cAAL,EAFnD;CAIA,SALD,CAHH;CAYA,OAbM,CAAP;CAcA;;;mCAEaU,OACd;CACC,WAAK0I,QAAL,GAAgBC,KAAhB;CACA,WAAKsG,aAAL,CAAmBjP,KAAK,CAAC2G,aAAN,CAAoBC,OAApB,CAA4BoC,EAA/C;CACA,WAAKnJ,IAAL,CAAU,UAAV,EAAsB;CAAC6Q,QAAAA,QAAQ,EAAE,KAAKN,WAAL;CAAX,OAAtB;CACA;;;0CAEoBpQ,OACrB;CACC,UAAIA,KAAK,CAACwI,OAAN,GAAgBkI,QAAhB,KAA6B,KAAKG,QAAtC,EACA;CACC,aAAK5B,aAAL,CAAmBjP,KAAK,CAACwI,OAAN,GAAgBkI,QAAnC;CACA,aAAK7Q,IAAL,CAAU,UAAV,EAAsBG,KAAtB;CACA;CACD;;;mCAEa0Q,UAEd;CACC,UACCA,QAAQ,KAAK,IAAb,IACGA,QAAQ,KAAK,KAAKG,QAFtB,EAIA;CACCxB,QAAAA,gBAAgB,CAACU,cAAjB,GAAkCW,QAAlC;CACA,aAAKG,QAAL,GAAgBH,QAAhB;;CACA,aAAK,IAAM1H,IAAX,IAAiB,KAAK8D,OAAtB,EACA;CACCxP,UAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKuQ,eAAL,CAAqB5H,IAArB,CAAhB,EAA0CqG,gBAAgB,CAACjP,YAA3D;;CACA,cAAI4I,IAAE,KAAK0H,QAAX,EACA;CACCpT,YAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAK0Q,eAAL,CAAqB5H,IAArB,CAAb,EAAuCqG,gBAAgB,CAACjP,YAAxD;CACA;CACD;CACD;CACD;;;mCAGD;CACC,WAAK,IAAMsQ,QAAX,IAAuB,KAAK5D,OAA5B,EACA;CACCxP,QAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKuQ,eAAL,CAAqBF,QAArB,CAAhB,EAAgDrB,gBAAgB,CAACjP,YAAjE;CACA;CACD;;;GAzP4CN;;6BAAzBuP,oCAE4B;6BAF5BA,kCAWU;;;;;;;;;;;;KCjBVyB;;;CAEpB,iBAAYvS,OAAZ,EACA;CAAA;;CAAA;CACC;CACA,UAAKC,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;;CACA,UAAK8B,iBAAL,CAAuB,iCAAvB;;CACAQ,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKV,SAAL,EAAX,EAA6B,OAA7B,EAAsC;CAAA,aAAM,MAAKmK,OAAL,EAAN;CAAA,KAAtC;CAEA,QAAMyG,IAAI,GAAG7J,EAAE,CAAC8J,EAAH,CAAMC,IAAN,CAAWC,cAAX,CAA0B;CACtCC,MAAAA,eAAe,EAAE;CAChBtH,QAAAA,eAAe,EAAEtL,OAAO,CAACiF,WADT;CAEhB8F,QAAAA,OAAO,EAAE;CAFO;CADqB,KAA1B,CAAb;CAMAyH,IAAAA,IAAI,CAACK,IAAL,CAAU,MAAKjR,SAAL,EAAV;CAZD;CAaC;;;;iCAGD;CACC,aAAO,KAAK3B,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOE,aAAG,CAACC,MAAX,sBAGgB0J,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAHhB;CASA,OAVM,CAAP;CAWA;;;+BAGD;CACC,WAAKhJ,IAAL,CAAU,SAAV;CACA;;;GApCiCC;;;;;;;;;;;;KCAduR;;;CAEpB,qBACA;CAAA;;CAAA;CACC;CACA,UAAK7S,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;;CACA,UAAK8B,iBAAL,CAAuB,mCAAvB;;CACAQ,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKV,SAAL,EAAX,EAA6B,OAA7B,EAAsC;CAAA,aAAM,MAAKmK,OAAL,EAAN;CAAA,KAAtC;CAJD;CAKC;;;;iCAGD;CACC,aAAO,KAAK9L,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOE,aAAG,CAACC,MAAX,sBACU0J,aAAG,CAACC,UAAJ,CAAe,mCAAf,CADV;CAIA,OALM,CAAP;CAMA;;;+BAGD;CACC,WAAKhJ,IAAL,CAAU,UAAV,EAAsB;CAACI,QAAAA,KAAK,EAAE;CAAR,OAAtB;CACA;;;GAvBmCH;;;;;;;;;;;;;;;;;;;;;;KCShBwR;;;CAEpB,oBAAY/S,OAAZ,EACA;CAAA;;CAAA;CACC;;CACA,UAAKiC,iBAAL,CAAuB,oCAAvB;;CAEA,UAAK+Q,KAAL,GAAa,IAAIT,KAAJ,CAAUvS,OAAV,CAAb;;CACA,UAAKgT,KAAL,CAAW3J,SAAX,CAAqB,SAArB,EAAgC,YAAM;CACrC,YAAK/H,IAAL,CAAU,SAAV;CACA,KAFD;;CAIA,UAAK2R,OAAL,GAAe,IAAIH,OAAJ,EAAf;;CACA,UAAKG,OAAL,CAAa5J,SAAb,CAAuB,UAAvB,EAAmC,UAAC5H,KAAD,EAAW;CAC7C,YAAKL,WAAL;;CACA,YAAK/C,QAAL,CAAcoD,KAAK,CAACwI,OAAN,GAAgBvI,KAA9B,EAF6C;;;CAK7C,YAAKwB,QAAL,CAAczB,KAAd;CACA,KAND;;CAQA,UAAKyR,mBAAL,GAA2B,IAAI/C,MAAJ,CAAW7B,SAAS,CAAC6E,sBAAV,EAAX,CAA3B;;CACA,UAAKD,mBAAL,CAAyB7J,SAAzB,CAAmC,UAAnC,EAA+C,UAAC5H,KAAD,EAAW;CACzD,YAAKgN,MAAL,CAAYrN,WAAZ;;CACA,YAAKgS,kBAAL,CAAwB3R,KAAxB;CACA,KAHD;;CAKA,UAAK4R,WAAL,GAAmB,IAAIvK,WAAJ,CAAgB9I,OAAhB,CAAnB;;CACA,UAAKqT,WAAL,CAAiBhK,SAAjB,CAA2B,UAA3B,EAAuC,UAAC5H,KAAD,EAAW;CACjD,YAAKgN,MAAL,CAAYrN,WAAZ;;CACA,YAAK8R,mBAAL,CAAyB9R,WAAzB;;CAEA,UAAMM,KAAK,GAAGD,KAAK,CAACwI,OAAN,GAAgBvI,KAA9B;;CACA,UAAI,MAAK+M,MAAL,CAAYqD,aAAZ,CAA0BpQ,KAA1B,CAAJ,EACA;CACC,cAAK+M,MAAL,CAAY6E,cAAZ,CAA2B5R,KAA3B;;CACA,cAAK2R,WAAL,CAAiBjS,WAAjB;CACA,OAJD,MAKK,IAAI,MAAK8R,mBAAL,CAAyBpB,aAAzB,CAAuCpQ,KAAvC,CAAJ,EACL;CACC,cAAKwR,mBAAL,CAAyBI,cAAzB,CAAwC5R,KAAxC;;CACA,cAAK2R,WAAL,CAAiBjS,WAAjB;CACA;;CAED,YAAK8B,QAAL,CAAczB,KAAd;CACA,KAjBD;;CAmBA,UAAK8M,OAAL,GAAe,IAAIuC,gBAAJ,CAAqB9Q,OAArB,CAAf;;CACA,UAAKuO,OAAL,CAAalF,SAAb,CAAuB,UAAvB,EAAmC,UAAC5H,KAAD,EAAW;CAC7C,YAAK8R,SAAL,CAAe,MAAKhF,OAAL,CAAaqD,aAAb,CAA2BnQ,KAAK,CAACwI,OAAN,GAAgBkI,QAA3C,CAAf;CACA,KAFD;;CAGA,UAAK5D,OAAL,CAAaiF,iBAAb;;CACA,QAAM/E,MAAM,GAAG,MAAKF,OAAL,CAAakF,eAAb,EAAf;;CACA,QAAIhF,MAAJ,EACA;CACC,YAAK8E,SAAL,CAAe9E,MAAf;CACA;;CArDF;CAsDC;;;;mCAGD;CACC1P,MAAAA,aAAG,CAACoJ,MAAJ,CAAW,KAAK6K,KAAL,CAAWpR,SAAX,EAAX,EAAmC,KAAK2M,OAAL,CAAamF,iBAAb,EAAnC;CACA3U,MAAAA,aAAG,CAAC4U,OAAJ,CAAY,KAAKV,OAAL,CAAarR,SAAb,EAAZ,EAAsC,KAAKsR,mBAAL,CAAyBtR,SAAzB,EAAtC;CAEA,aAAOlB,aAAG,CAACC,MAAX,sBAGK,KAAK4N,OAAL,CAAa3M,SAAb,EAHL,EAKI,KAAKgS,kBAAL,EALJ,EAOK,KAAKV,mBAAL,CAAyBtR,SAAzB,EAPL,EAQK,KAAKyR,WAAL,CAAiBzR,SAAjB,EARL;CAYA;;;sCAGD;CAAA;;CACC,aAAO,KAAK3B,KAAL,CAAWO,QAAX,CAAoB,aAApB,EAAmC,YAAM;CAC/C,eAAO,MAAI,CAACoB,SAAL,GAAiByB,aAAjB,CAA+B,wCAA/B,CAAP;CACA,OAFM,CAAP;CAGA;;;0CAGD;CACC,aAAO,KAAKpD,KAAL,CAAWO,QAAX,CAAoB,iBAApB,EAAuC,YAAM;CACnD,eAAOE,aAAG,CAACC,MAAX;CACA,OAFM,CAAP;CAGA;;;+BAES8N,QACV;CAAA;;CACC,WAAKA,MAAL,GAAcA,MAAd;CACA,WAAKA,MAAL,CAAYrN,WAAZ;;CACA,UAAI,KAAKP,QAAL,OAAoB,IAApB,IAA4B,KAAK4N,MAAL,CAAYqD,aAAZ,CAA0B,KAAKjR,QAAL,EAA1B,CAAhC,EACA;CACC,aAAKO,WAAL;CACA,aAAKqN,MAAL,CAAY6E,cAAZ,CAA2B,KAAKzS,QAAL,EAA3B;CACA,OAJD,MAMA;CACC,aAAKO,WAAL;CACA,aAAKiS,WAAL,CAAiBhV,QAAjB,CAA0B,KAAKwC,QAAL,EAA1B;CACA;;CACD,WAAK4N,MAAL,CAAYpF,SAAZ,CAAsB,UAAtB,EAAkC,UAAC5H,KAAD,EAAW;CAC5C,QAAA,MAAI,CAACyR,mBAAL,CAAyB9R,WAAzB;;CACA,QAAA,MAAI,CAACgS,kBAAL,CAAwB3R,KAAxB;CACA,OAHD;CAKA1C,MAAAA,aAAG,CAACiJ,KAAJ,CAAU,KAAK4L,kBAAL,EAAV;CACA7U,MAAAA,aAAG,CAACoJ,MAAJ,CAAWsG,MAAM,CAAC7M,SAAP,EAAX,EAA+B,KAAKgS,kBAAL,EAA/B;CAEA,WAAKtS,IAAL,CAAU,gBAAV,EAA4B;CAACmN,QAAAA,MAAM,EAAEA;CAAT,OAA5B;CACA;;;iCAGD;CACC,aAAO,KAAKA,MAAZ;CACA;;;4CAGD;CACC,aAAO,KAAKF,OAAZ;CACA;;;wCAEkB9M,OACnB;CACC,WAAK4R,WAAL,CAAiBhV,QAAjB,CAA0BoD,KAAK,CAACwI,OAAN,GAAgBvI,KAA1C;CACA,WAAK2R,WAAL,CAAiBjS,WAAjB;CACA,WAAK8B,QAAL,CAAczB,KAAd;CACA;;;8BAEQA,OACT;CACC,WAAKxB,KAAL,CAAWoB,GAAX,CAAe,OAAf,EAAwBI,KAAK,CAACwI,OAAN,GAAgBvI,KAAxC;CACA,WAAKJ,IAAL,CAAU,UAAV,EAAsBG,KAAtB;CACA;;;gCAGD;CAAA;;CACC,aAAO,KAAKxB,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAO,MAAI,CAAC6S,WAAL,CAAiBxS,QAAjB,EAAP;CACA,OAFM,CAAP;CAGA;;;8BAEQzC,OACT;CACC,UAAI,KAAKoF,cAAL,CAAoBpF,KAApB,CAAJ,EACA;CACC,uGAAeA,KAAf;CACA,aAAKiV,WAAL,CAAiBhV,QAAjB,CAA0BD,KAA1B;CAEA,YAAMyV,YAAY,GACjB,KAAKtF,OAAL,CAAakD,iBAAb,KACG,KAAKlD,OAAL,CAAaqD,aAAb,CAA2B,KAAKrD,OAAL,CAAakD,iBAAb,EAA3B,CADH,GAEG,KAAKlD,OAAL,CAAauF,oBAAb,CAAkC1V,KAAlC,CAHJ;;CAIA,YAAIyV,YAAY,KAAK,IAArB,EACA;CACC,eAAKN,SAAL,CAAeM,YAAf;CACA,eAAKtF,OAAL,CAAamC,aAAb,CAA2BmD,YAAY,CAAClC,KAAb,EAA3B;CACA;;CAED,YAAIvT,KAAK,KAAK,IAAV,IAAkB,KAAK8U,mBAAL,CAAyBpB,aAAzB,CAAuC1T,KAAvC,CAAtB,EACA;CACC,eAAKgD,WAAL;CACA,eAAK8R,mBAAL,CAAyBI,cAAzB,CAAwClV,KAAxC;CACA;CACD;CACD;;;mCAGD;CACC,WAAKqQ,MAAL,CAAYrN,WAAZ;CACA,WAAK8R,mBAAL,CAAyB9R,WAAzB;CACA,WAAKiS,WAAL,CAAiBjS,WAAjB;CACA;;;gCAGD;CACC,aAAO,KAAKqN,MAAL,CAAY5C,QAAZ,MAA0B,KAAKqH,mBAAL,CAAyBrH,QAAzB,EAA1B,IAAiE,KAAKwH,WAAL,CAAiBxH,QAAjB,EAAxE;CACA;;;GAtLoCrK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCNjBuS;;;CAKpB,mBAAY/T,OAAZ,EACA;CAAA;;CAAA;CACC;;CACA,UAAKiC,iBAAL,CAAuB,mCAAvB;;CAEA,UAAK+R,cAAL,GAAuBvV,cAAI,CAACC,QAAL,CAAcsB,OAAd,KAA0BiU,OAAO,CAACC,GAAR,CAAYlU,OAAZ,EAAqB,gBAArB,CAA3B,GACnBA,OAAO,CAACgU,cADW,GAEnBD,OAAO,CAACI,eAFX;CAIA,UAAKlV,QAAL,GAAgB2E,6BAAU,CAACC,aAAX,GAA2B5E,QAA3C;CAEA,UAAK2F,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBtC,IAAvB,2CAAzB;CACA,UAAKuC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBvC,IAAtB,2CAAxB;CACA,UAAKwC,eAAL,GAAuB,MAAKA,eAAL,CAAqBxC,IAArB,2CAAvB;CACAG,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKV,SAAL,EAAX,EAA6B,WAA7B,EAA0C,MAAKgD,iBAA/C;CAbD;CAcC;;;;mCAGD;CACC,UAAMwN,MAAM,GAAG1R,aAAG,CAACC,MAAP,sBAER,KAAKuE,SAAL,EAFQ,EAGR,KAAKkP,cAAL,EAHQ,CAAZ;CAMA,WAAKC,qBAAL,CAA2B,KAAKL,cAAhC;CAEA,aAAO5B,MAAP;CACA;;;uCAEiB3Q,OAClB;CACC,UAAIA,KAAK,CAAC2D,OAAN,IAAiB3D,KAAK,CAAC4D,OAAvB,IAAkC5D,KAAK,CAAC6D,MAA5C,EACA;CACC;CACA;;CAED7C,MAAAA,eAAK,CAACH,IAAN,CAAW,KAAKrD,QAAhB,EAA0B,WAA1B,EAAuC,KAAK4F,gBAA5C;CACApC,MAAAA,eAAK,CAACH,IAAN,CAAW,KAAKrD,QAAhB,EAA0B,SAA1B,EAAqC,KAAK6F,eAA1C;CAEA/F,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAK1C,QAAL,CAAcyF,IAA3B,EAAiC,kCAAjC;CAEA,WAAKG,gBAAL,CAAsBpD,KAAtB;CACA;;;sCAEgBA,OACjB;CACC,UAAIA,KAAK,CAAC+D,MAAN,KAAiB,KAAKN,SAAL,EAArB,EACA;CACC;CACA;;CACD,WAAKO,YAAL,CAAkBhE,KAAK,CAACiE,KAAxB;CACA,WAAKxC,QAAL;CACA;;;uCAGD;CACCT,MAAAA,eAAK,CAACmD,MAAN,CAAa,KAAK3G,QAAlB,EAA4B,WAA5B,EAAyC,KAAK4F,gBAA9C;CACApC,MAAAA,eAAK,CAACmD,MAAN,CAAa,KAAK3G,QAAlB,EAA4B,SAA5B,EAAuC,KAAK6F,eAA5C;CAEA/F,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAK7C,QAAL,CAAcyF,IAA9B,EAAoC,kCAApC;CACA;CAED;CACD;CACA;CACA;;;;kCACcnI,GACb;CACC,UAAM+X,OAAO,GAAG9Y,IAAI,CAACD,GAAL,CAASC,IAAI,CAACC,GAAL,CAAUc,CAAC,GAAG,KAAK2J,aAAL,GAAqBD,IAAnC,EAA0C,KAAKC,aAAL,GAAqBH,KAA/D,CAAT,EAAgF,CAAhF,CAAhB;CACAhH,MAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKkG,SAAL,EAAV,EAA4B;CAC3Be,QAAAA,IAAI,YAAKqO,OAAL;CADuB,OAA5B;CAGA;;;2CAEqBhX,SACtB;CACCA,MAAAA,OAAO,GAAG9B,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACD,GAAL,CAAS,CAAT,EAAY+B,OAAZ,CAAZ,CAAV;CACAyB,MAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKkG,SAAL,EAAV,EAA4B;CAC3Be,QAAAA,IAAI,YAAK,MAAO3I,OAAO,GAAG,GAAtB;CADuB,OAA5B;CAGA;;;qCAGD;CAAA;;CACC,aAAO,KAAK2C,KAAL,CAAWO,QAAX,CAAoB,YAApB,EAAkC,YAAM;CAC9C,YAAMqF,UAAU,GAAG,MAAI,CAACjE,SAAL,GAAiBkE,qBAAjB,EAAnB;;CACA,eAAO;CACNC,UAAAA,KAAK,EAAEF,UAAU,CAACE,KADZ;CAENE,UAAAA,IAAI,EAAEJ,UAAU,CAACI;CAFX,SAAP;CAIA,OANM,CAAP;CAOA;;;sCAGD;CACC,aAAO,KAAKhG,KAAL,CAAWO,QAAX,CAAoB,aAApB,EAAmC,YAAM;CAC/C,eAAOE,aAAG,CAACC,MAAX;CAGA,OAJM,CAAP;CAKA;;;iCAGD;CACC,aAAO,KAAKV,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOE,aAAG,CAACC,MAAX;CAMA,OAPM,CAAP;CAQA;;;uCAGD;CAAA;;CACC,aAAO,KAAKV,KAAL,CAAWO,QAAX,CAAoB,SAApB,EAA+B,YAAM;CAC3C,eAAO,IAAIrC,UAAJ,CAAe4V,OAAO,CAAClR,aAAvB,EAAsC1D,UAAtC,CAAiD,MAAI,CAAC6U,cAAtD,CAAP;CACA,OAFM,CAAP;CAGA;;;gCAGD;CAAA;;CACC,aAAO,KAAK/T,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,YAAM+T,UAAU,GAAG3X,cAAI,CAACC,QAAL,CAAckC,aAAG,CAACC,KAAJ,CAAU,MAAI,CAACkG,SAAL,EAAV,EAA4B,MAA5B,CAAd,CAAnB;CACA,YAAMsB,WAAW,GAAG5J,cAAI,CAACC,QAAL,CAAc,MAAI,CAAC+E,SAAL,GAAiBkE,qBAAjB,GAAyCC,KAAvD,CAApB;CAEA,eAAO,MAAI,CAACyO,eAAL,GAAuBrV,UAAvB,CAAmC,IAAIoV,UAAU,GAAG/N,WAApD,CAAP;CACA,OALM,CAAP;CAMA;;;8BAEQpI,OACT;CACC,UAAMqW,UAAU,GAAIrW,KAAK,KAAK,IAAX,GAAmBA,KAAnB,GAA2B,KAAKoW,eAAL,EAA9C;CACA,oGAAeC,UAAf;;CAEA,UAAIrW,KAAK,KAAK,IAAd,EACA;CACCW,QAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKoV,cAAL,EAAV,EAAiC;CAACM,UAAAA,UAAU,EAAED,UAAU,CAACE,wBAAX;CAAb,SAAjC;CACA,OAHD,MAKA;CACC5V,QAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKoV,cAAL,EAAV,EAAiC;CAACM,UAAAA,UAAU,EAAE;CAAb,SAAjC;CACA;;CACD,WAAKL,qBAAL,CAA2BI,UAAU,CAAClW,UAAX,EAA3B;CACA;;;GAvJmCiD;;6BAAhBuS,0BAEY;6BAFZA,4BAGc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCLda;;;CAMpB,kBACA;CAAA;;CAAA;CACC;;CACA,UAAK3S,iBAAL,CAAuB,gCAAvB;;CAEA,UAAK4S,IAAL,GAAY,EAAZ;CACA,UAAK5U,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;CACA,UAAK2U,QAAL,GAAgB,IAAhB;CACA,UAAKC,KAAL,GAAa,KAAb;CAEA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAc1S,IAAd,2CAAhB;CATD;CAUC;;;;iCAEWwS,UACZ;CACC,WAAKA,QAAL,GAAgBA,QAAhB;CAEA,aAAO,IAAP;CACA;;;4BAEMG,KACP;CACC,WAAKF,KAAL,GAAaE,GAAb;CACA,WAAKH,QAAL,GAAgB,KAAhB;CAEA,aAAO,IAAP;CACA;;;+BAESrK,IAAYyK,OAAexN,OACrC;CACC,UAAMyN,GAAG,GAAG,IAAIC,GAAJ,CAAQ;CACnB3K,QAAAA,EAAE,EAAEA,EADe;CAEnByK,QAAAA,KAAK,EAAEA,KAFY;CAGnBxN,QAAAA,KAAK,EAAEjJ,cAAI,CAAC6B,OAAL,CAAaoH,KAAb,IAAsBA,KAAtB,GAA8B,CAACA,KAAD;CAHlB,OAAR,CAAZ;CAKA,WAAKmN,IAAL,CAAU9M,IAAV,CAAeoN,GAAf;CACA,WAAKE,UAAL,CAAgBF,GAAhB;CACA,WAAKlV,KAAL,CAAWgB,MAAX,CAAkB,QAAlB;CAEA,aAAO,IAAP;CACA;;;gCAEUwJ,IAAYyK,OAAexN,OACtC;CACC,UAAMyN,GAAG,GAAG,IAAIC,GAAJ,CAAQ;CACnB3K,QAAAA,EAAE,EAAEA,EADe;CAEnByK,QAAAA,KAAK,EAAEA,KAFY;CAGnBxN,QAAAA,KAAK,EAAEjJ,cAAI,CAAC6B,OAAL,CAAaoH,KAAb,KAAuB,CAACA,KAAD;CAHX,OAAR,CAAZ;CAKA,WAAKmN,IAAL,CAAUpM,OAAV,CAAkB0M,GAAlB;CACA,WAAKE,UAAL,CAAgBF,GAAhB;CACA,WAAKlV,KAAL,CAAWgB,MAAX,CAAkB,QAAlB;CAEA,aAAO,IAAP;CACA;;;gCAEUkU,KACX;CACCA,MAAAA,GAAG,CAAC9L,SAAJ,CAAc,UAAd,EAA0B,KAAK2L,QAA/B;CACAG,MAAAA,GAAG,CAAC9L,SAAJ,CAAc,QAAd,EAAwB,KAAK2L,QAA7B;CACAG,MAAAA,GAAG,CAAC9L,SAAJ,CAAc,QAAd,EAAwB,KAAK2L,QAA7B;CACA;;;8BAEQvT,OACT;CACC,WAAKH,IAAL,CAAU,UAAV,EAAsBG,KAAtB;CACA;;;6BAEOgJ,IACR;CACC,UAAI,CAAC,KAAKqK,QAAV,EACA;CACC,aAAKD,IAAL,CAAUjN,OAAV,CAAkB,UAACuN,GAAD,EAAS;CAC1BA,UAAAA,GAAG,CAACG,IAAJ;CACA,SAFD;CAGA;;CAED,UAAMH,GAAG,GAAG,KAAKI,UAAL,CAAgB9K,EAAhB,CAAZ;;CACA,UAAI0K,GAAJ,EACA;CACCA,QAAAA,GAAG,CAACzJ,IAAJ;CACA;;CAED,aAAO,IAAP;CACA;;;gCAEUjB,IACX;CACC,aAAO,KAAKoK,IAAL,CAAUrE,IAAV,CAAe,UAAC2E,GAAD,EAAS;CAC9B,eAAOA,GAAG,CAAC1K,EAAJ,KAAWA,EAAlB;CACA,OAFM,CAAP;CAGA;;;iCAGD;CAAA;;CACC,aAAO,KAAKxK,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,YAAMgV,UAAU,GAAG,MAAI,CAACT,KAAL,GAAa,mCAAb,GAAmD,EAAtE;CACA,YAAM3C,MAAM,GAAG1R,aAAG,CAACC,MAAP,sBAAuD6U,UAAvD,CAAZ;;CAEA,YAAI,MAAI,CAACT,KAAT,EACA;CACC,cAAMU,IAAI,GAAG/U,aAAG,CAACC,MAAP,sBAAV;CAGA,cAAMwK,OAAO,GAAGzK,aAAG,CAACC,MAAP,sBAAb;;CAIA,UAAA,MAAI,CAACkU,IAAL,CAAUjN,OAAV,CAAkB,UAAAuN,GAAG,EAAI;CACxBpW,YAAAA,aAAG,CAACoJ,MAAJ,CAAWgN,GAAG,CAACO,QAAJ,EAAX,EAA2BD,IAA3B;CACA1W,YAAAA,aAAG,CAACoJ,MAAJ,CAAWgN,GAAG,CAACvT,SAAJ,EAAX,EAA4BuJ,OAA5B;CACA,WAHD;;CAKApM,UAAAA,aAAG,CAACoJ,MAAJ,CAAWsN,IAAX,EAAiBrD,MAAjB;CACArT,UAAAA,aAAG,CAACoJ,MAAJ,CAAWgD,OAAX,EAAoBiH,MAApB;CACA,SAhBD,MAkBA;CACC,UAAA,MAAI,CAACyC,IAAL,CAAUjN,OAAV,CAAkB,UAAAuN,GAAG,EAAI;CACxB,gBAAMQ,SAAS,GAAGjV,aAAG,CAACC,MAAP,uBACZwU,GAAG,CAACO,QAAJ,EADY,EACKP,GAAG,CAACvT,SAAJ,EADL,CAAf;CAGA7C,YAAAA,aAAG,CAACoJ,MAAJ,CAAWwN,SAAX,EAAsBvD,MAAtB;CACA,WALD;CAMA,SA7ByC;;;CAgC1C,QAAA,MAAI,CAACyC,IAAL,CAAUjN,OAAV,CAAkB,UAAAuN,GAAG,EAAI;CACxB1S,UAAAA,eAAK,CAACH,IAAN,CAAW6S,GAAG,CAACO,QAAJ,EAAX,EAA2B,OAA3B,EAAoC,YAAM;CACzC,gBAAI,CAAC,MAAI,CAACZ,QAAV,EACA;CACC,cAAA,MAAI,CAACD,IAAL,CAAUjN,OAAV,CAAkB,UAACuN,GAAD,EAAS;CAC1BA,gBAAAA,GAAG,CAACG,IAAJ;CACA,eAFD;CAGA;;CAEDH,YAAAA,GAAG,CAAClE,MAAJ;CACA,WATD;CAUA,SAXD;;CAaA,eAAOmB,MAAP;CACA,OA9CM,CAAP;CA+CA;;;GApJgC7Q;KA6JrB6T,GAAb;CAAA;;CAQC,eAAYpV,OAAZ,EACA;CAAA;;CAAA;CACC;CAEA,WAAKyK,EAAL,GAAUzK,OAAO,CAACyK,EAAlB;CACA,WAAKyK,KAAL,GAAalV,OAAO,CAACkV,KAArB;CACA,WAAKxN,KAAL,GAAa1H,OAAO,CAAC0H,KAArB;CACA,WAAKzH,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;CAND;CAOC;;CAhBF;CAAA;CAAA,4BAmBC;CACC,aAAO,KAAKsK,EAAZ;CACA;CArBF;CAAA;CAAA,+BAwBC;CAAA;;CACC,aAAO,KAAKxK,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAOE,aAAG,CAACC,MAAX,uBAG+D,MAAI,CAACuU,KAHpE;CAMA,OAPM,CAAP;CAQA;CAjCF;CAAA;CAAA,gCAoCC;CAAA;;CACC,aAAO,KAAKjV,KAAL,CAAWO,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOE,aAAG,CAACC,MAAX,qBAEI,MAAI,CAAC+G,KAAL,CAAWgH,GAAX,CAAe,UAAA7G,IAAI;CAAA,iBAAIA,IAAI,CAACjG,SAAL,EAAJ;CAAA,SAAnB,CAFJ;CAKA,OANM,CAAP;CAOA;CA5CF;CAAA;CAAA,6BA+CC;CACC7C,MAAAA,aAAG,CAAC6W,WAAJ,CAAgB,KAAKhU,SAAL,EAAhB,EAAkCwT,GAAG,CAACS,UAAtC;CACA9W,MAAAA,aAAG,CAAC6W,WAAJ,CAAgB,KAAKF,QAAL,EAAhB,EAAiCN,GAAG,CAACS,UAArC;CACA,WAAKvU,IAAL,CAAU,UAAV,EAAsB;CAAC6T,QAAAA,GAAG,EAAE,KAAKD;CAAX,OAAtB;CAEA,aAAO,IAAP;CACA;CArDF;CAAA;CAAA,2BAwDC;CACCnW,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAKC,SAAL,EAAb,EAA+BwT,GAAG,CAACS,UAAnC;CACA9W,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAK+T,QAAL,EAAb,EAA8BN,GAAG,CAACS,UAAlC;CACA,WAAKvU,IAAL,CAAU,QAAV,EAAoB;CAAC6T,QAAAA,GAAG,EAAE,KAAKD;CAAX,OAApB;CAEA,aAAO,IAAP;CACA;CA9DF;CAAA;CAAA,2BAiEC;CACCnW,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKF,SAAL,EAAhB,EAAkCwT,GAAG,CAACS,UAAtC;CACA9W,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAK4T,QAAL,EAAhB,EAAiCN,GAAG,CAACS,UAArC;CACA,WAAKvU,IAAL,CAAU,QAAV,EAAoB;CAAC6T,QAAAA,GAAG,EAAE,KAAKD;CAAX,OAApB;CAEA,aAAO,IAAP;CACA;CAvEF;CAAA;CAAA,EAAyB3T,6BAAzB;6BAAa6T,mBAMgB;;;;;;;;;;;;KC7JRU;;;CAIpB,iBAAY9V,OAAZ,EACA;CAAA;;CAAA;CACC,uGAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,qCAAvB;;CACA,UAAK7B,QAAL,GAAgB,OAAhB;CACA,UAAKG,YAAL,GAAoB,SAApB;CACA,UAAKK,SAAL,GAAiB,SAAjB;CAEA,UAAKmV,QAAL,GAAgB,IAAIhD,QAAJ,CAAa/S,OAAb,CAAhB;;CACA,UAAK+V,QAAL,CAAc1M,SAAd,CAAwB,UAAxB,EAAoC,MAAK2M,gBAAL,CAAsB1T,IAAtB,2CAApC;;CACA,UAAKyT,QAAL,CAAc1M,SAAd,CAAwB,SAAxB,EAAmC,MAAK4M,OAAL,CAAa3T,IAAb,2CAAnC;;CAEA,UAAKhF,OAAL,GAAe,IAAIyW,OAAJ,EAAf;;CACA,UAAKzW,OAAL,CAAa+L,SAAb,CAAuB,UAAvB,EAAmC,MAAK6M,eAAL,CAAqB5T,IAArB,2CAAnC;;CAEA,UAAKqM,OAAL,GAAe,IAAI7C,OAAJ,EAAf;;CACA,UAAK6C,OAAL,CAAatF,SAAb,CAAuB,UAAvB,EAAmC,MAAK8M,eAAL,CAAqB7T,IAArB,2CAAnC;;CAEA,UAAKuS,IAAL,GAAY,IAAID,IAAJ,GAAWwB,SAAX,CAAqB,SAArB,EAAgC/L,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAAhC,EAAmF,MAAKhN,OAAxF,CAAZ;CAjBD;CAkBC;;;;iCAEWc,OACZ;CACC,aACCA,KAAK,KAAK,IAAV,IACGA,KAAK,KAAK,MADb,IAEGA,KAAK,KAAK,kBAHd;CAKA;;;oCAGD;CACC,aAAO,IAAID,UAAJ,CAAe,kBAAf,CAAP;CACA;;;mCAGD;CACC,aAAOuC,aAAG,CAACC,MAAX,sBAEI,KAAKoV,QAAL,CAAcnU,SAAd,EAFJ,EAGI,KAAK+M,OAAL,CAAa/M,SAAb,EAHJ,EAII,KAAKiT,IAAL,CAAUjT,SAAV,EAJJ;CAOA;;;sCAEgBH,OACjB;CACC,WAAKkN,OAAL,CAAavN,WAAb;CAEA,UAAMM,KAAK,GAAGD,KAAK,CAACwI,OAAN,GAAgBvI,KAA9B;;CACA,UAAIA,KAAK,KAAK,IAAd,EACA;CACCA,QAAAA,KAAK,CAACvC,UAAN,CAAiB,KAAK7B,OAAL,CAAauD,QAAb,GAAwBtC,UAAxB,EAAjB;CACA;;CACD,WAAKjB,OAAL,CAAae,QAAb,CAAsBqD,KAAtB;CAEA,WAAKwB,QAAL;CACA;;;uCAGD;CACC,WAAKA,QAAL;CACA;;;qCAEezB,OAChB;CACC,WAAKsU,QAAL,CAAc1X,QAAd,CAAuBoD,KAAK,CAACwI,OAAN,GAAgBvI,KAAvC;CACA,WAAKsU,gBAAL,CAAsBvU,KAAtB;CAEA,WAAKsU,QAAL,CAAc3U,WAAd;CACA,WAAKuN,OAAL,CAAajL,SAAb;CACA;;;mCAGD;CACC,WAAKqS,QAAL,CAAc3U,WAAd;CACA,WAAKuN,OAAL,CAAavN,WAAb;CACA;;;8BAEQhD,OACT;CACC,UAAMiY,QAAQ,GAAIjY,KAAK,KAAK,IAAX,GAAmB,IAAID,UAAJ,CAAeC,KAAf,CAAnB,GAA2C,IAA5D;CAEA,WAAK2X,QAAL,CAAc1X,QAAd,CAAuBgY,QAAvB;CACA,WAAK/Y,OAAL,CAAae,QAAb,CAAsBgY,QAAtB,EAJD;;CAOC,UAAI,KAAK1H,OAAL,CAAa2H,cAAb,CAA4BD,QAA5B,CAAJ,EACA;CACC,aAAK1H,OAAL,CAAajL,SAAb;CACA,aAAKqS,QAAL,CAAc3U,WAAd;CACA;;CAED,UAAIhD,KAAK,KAAK,IAAV,IAAkBiY,QAAQ,CAAC9X,UAAT,KAAwB,CAA9C,EACA;CACC,aAAKsW,IAAL,CAAU0B,OAAV,CAAkB,SAAlB;CACA;CACD;;;gCAGD;CAAA;;CACC,aAAO,KAAKtW,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,YAAMpC,KAAK,GAAG,MAAI,CAACuQ,OAAL,CAAa9C,QAAb,KAA0B,MAAI,CAAC8C,OAAL,CAAa9N,QAAb,EAA1B,GAAoD,MAAI,CAACkV,QAAL,CAAclV,QAAd,EAAlE;CAEA,eAAQzC,KAAK,KAAK,IAAX,GACJ,IADI,GAEJA,KAAK,CAACe,UAAN,CAAiB,MAAI,CAAC7B,OAAL,CAAauD,QAAb,GAAwBtC,UAAxB,EAAjB,CAFH;CAGA,OANM,CAAP;CAOA;;;GAjHiCwB;;6BAAd+V,sBAES;;KCZTU;;;CAEpB,sBAAYxW,OAAZ,EACA;CAAA;;CAAA;CACC,4GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,0CAAvB;;CACA,UAAK7B,QAAL,GAAgB,OAAhB;CACA,UAAKG,YAAL,GAAoB,eAApB;CACA,UAAKK,SAAL,GAAiB,gBAAjB;CACA,UAAKP,WAAL,GAAmB,QAAnB;CAND;CAOC;;;GAVsCyV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCSnBW;;;CAapB,oBAAYzW,OAAZ,EACA;CAAA;;CAAA;CACC;CADD,0FAHe,EAGf;;CAEC,UAAKiC,iBAAL,CAAuB,oCAAvB;;CACA,UAAK8G,OAAL,GAAe,oBAAoBnM,cAAI,CAACoM,SAAL,EAAnC;CACA,UAAKC,oBAAL,GAA4BjJ,OAAO,CAACiF,WAApC;CAEA,UAAKyR,eAAL,GAAuB,IAAI5N,WAAJ,CAAgB9I,OAAhB,CAAvB;;CACA,UAAK0W,eAAL,CAAqBrN,SAArB,CAA+B,UAA/B,EAA2C,UAAC5H,KAAD,EAAW;CACrD,YAAKkV,aAAL,CAAmBlV,KAAK,CAACwI,OAAN,GAAgBvI,KAAnC,EAA0C,IAA1C;CACA,KAFD;;CAIA,UAAKkV,aAAL,GAAqB,IAAI9N,WAAJ,CAAgB9I,OAAhB,CAArB;;CACA,UAAK4W,aAAL,CAAmBvN,SAAnB,CAA6B,UAA7B,EAAyC,UAAC5H,KAAD,EAAW;CACnD,YAAKkV,aAAL,CAAmB,IAAnB,EAAyBlV,KAAK,CAACwI,OAAN,GAAgBvI,KAAzC;CACA,KAFD;;CAIAe,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKuU,cAAL,EAAX,EAAkC,OAAlC,EAA2C,MAAKC,WAAL,CAAiBxU,IAAjB,2CAA3C;CACAG,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKyU,eAAL,EAAX,EAAmC,OAAnC,EAA4C,MAAKC,QAAL,CAAc1U,IAAd,2CAA5C;CACAG,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAK2U,mBAAL,EAAX,EAAuC,OAAvC,EAAgD,MAAKC,YAAL,CAAkB5U,IAAlB,2CAAhD;CACAG,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAK6U,aAAL,EAAX,EAAiC,OAAjC,EAA0C,MAAKC,MAAL,CAAY9U,IAAZ,2CAA1C;CAEA,UAAKmM,MAAL,GAAc,IAAd;CArBD;CAsBC;;;;mCAEa4I,WAAwBC,SACtC;CACC,UAAID,SAAS,KAAK,IAAd,IAAsBC,OAAO,KAAK,IAAtC,EACA;CACC;CACA;;CAED,UAAM7C,UAAU,GAAG,KAAK5T,QAAL,MAAmB,IAAI8L,aAAJ,EAAtC;CACA,UAAM4K,cAAc,GAAGF,SAAS,IAAI5C,UAAU,CAACpH,OAAX,EAAb,IAAsC,IAAIV,aAAJ,EAAD,CAAsBU,OAAtB,EAA5D;CACA,UAAMmK,YAAY,GAAGF,OAAO,IAAI7C,UAAU,CAACnH,KAAX,EAAX,IAAkC,IAAIX,aAAJ,EAAD,CAAsBW,KAAtB,EAAtD;CACAmH,MAAAA,UAAU,CAACpW,QAAX,CAAoB;CACnBuO,QAAAA,IAAI,EAAE2K,cADa;CAEnB1K,QAAAA,EAAE,EAAE2K;CAFe,OAApB;CAKA,WAAKnZ,QAAL,CAAcoW,UAAd;CACA,WAAKhG,MAAL,CAAYrN,WAAZ;CACA,WAAK8B,QAAL;CACA;;;mCAGD;CACC,WAAKiH,QAAL,GAAgB8G,MAAhB;CACA;;;8BAEQxP,OACT;CACC;CACA,UAAI,CAACgV,QAAQ,CAACgB,cAAT,CAAwBhW,KAAK,CAAC+D,MAA9B,CAAL,EACA;CACC;CACA;;CAED,UAAMpH,KAAK,GAAG,KAAKyC,QAAL,EAAd;;CACA,UAAIzC,KAAK,KAAK,IAAd,EACA;CACCA,QAAAA,KAAK,CAACC,QAAN,CAAe;CACdyO,UAAAA,KAAK,EAAG,CAAC1O,KAAK,CAAC+O,QAAN,KAAmB,KAAKuK,WAAzB,IAAwC;CADlC,SAAf;CAGA,aAAKrZ,QAAL,CAAcD,KAAd;CACA,aAAK8E,QAAL;CACA;;CACD,WAAKiH,QAAL,GAAgBC,KAAhB;CACA;;;kCAEY3I,OACb;CACC;CACA,UAAI,CAACgV,QAAQ,CAACgB,cAAT,CAAwBhW,KAAK,CAAC+D,MAA9B,CAAL,EACA;CACC;CACA;;CAED,UAAMpH,KAAK,GAAG,KAAKyC,QAAL,EAAd;;CACA,UAAIzC,KAAK,KAAK,IAAd,EACA;CACC,YAAIA,KAAK,CAACgP,OAAN,OAAoBT,aAAa,CAACkB,WAAtC,EACA;CACCzP,UAAAA,KAAK,CAACC,QAAN,CAAe;CAAC2O,YAAAA,IAAI,EAAEL,aAAa,CAACiB;CAArB,WAAf;CACA6I,UAAAA,QAAQ,CAACkB,aAAT,CAAuB,KAAKZ,eAAL,EAAvB;CACA,SAJD,MAMA;CACC3Y,UAAAA,KAAK,CAACC,QAAN,CAAe;CAAC2O,YAAAA,IAAI,EAAEL,aAAa,CAACkB;CAArB,WAAf;CACA4I,UAAAA,QAAQ,CAACmB,YAAT,CAAsB,KAAKb,eAAL,EAAtB;CACA;;CACD,aAAK1Y,QAAL,CAAcD,KAAd;CACA,aAAK8E,QAAL;CACA;;CACD,WAAKiH,QAAL,GAAgBC,KAAhB;CACA;;;4BAEM3I,OACP;CACC;CACA,UAAI,CAACgV,QAAQ,CAACgB,cAAT,CAAwBhW,KAAK,CAAC+D,MAA9B,CAAL,EACA;CACC;CACA;;CAED,UAAMpH,KAAK,GAAG,KAAKyC,QAAL,EAAd;;CACA,UAAIzC,KAAK,KAAK,IAAd,EACA;CACCA,QAAAA,KAAK,CAACC,QAAN,CAAe;CACdwO,UAAAA,EAAE,EAAEzO,KAAK,CAACiP,OAAN,EADU;CAEdT,UAAAA,IAAI,EAAExO,KAAK,CAACkP,KAAN;CAFQ,SAAf;CAIA,aAAKjP,QAAL,CAAcD,KAAd;CACA,aAAK8E,QAAL;CACA;;CACD,WAAKiH,QAAL,GAAgBC,KAAhB;CACA;;;gDAkBD;CACC,UAAMhM,KAAK,GAAG,KAAKyC,QAAL,EAAd;;CACA,UAAIzC,KAAK,KAAK,IAAd,EACA;CACC,YAAM0O,KAAK,GAAG1O,KAAK,CAAC+O,QAAN,EAAd;CACA,YAAM0K,OAAO,GAAG,KAAKnB,eAAL,CAAqBoB,mBAArB,EAAhB;CACA,YAAMC,KAAK,GAAG,KAAKnB,aAAL,CAAmBkB,mBAAnB,EAAd;CACA,YAAME,SAAS,GAAG5Z,KAAK,CAACiP,OAAN,EAAlB;CACA,YAAM4K,OAAO,GAAG7Z,KAAK,CAACkP,KAAN,EAAhB;;CACA,YAAIlP,KAAK,CAACgP,OAAN,OAAoBT,aAAa,CAACkB,WAAtC,EACA;CACC,cAAIf,KAAK,KAAK,GAAV,IAAiBA,KAAK,KAAK,EAA/B,EACA;CACC,gBAAMoL,MAAM,GAAG/Z,UAAU,CAACga,SAAX,CAAqBH,SAArB,EAAgCC,OAAhC,EAAyCxU,WAAzC,GAAuDnF,MAAvD,EAAf;CACAuZ,YAAAA,OAAO,CAACjV,YAAR,CAAqBsV,MAArB,EAA6B,aAA7B;CACAH,YAAAA,KAAK,CAACnV,YAAN,CAAmBsV,MAAnB,EAA2B,aAA3B;CACA,WALD,MAMK,IAAIpL,KAAK,IAAI,GAAT,IAAgBA,KAAK,IAAI,GAA7B,EACL;CACC+K,YAAAA,OAAO,CAACjV,YAAR,CAAqBoV,SAAS,CAACvU,WAAV,GAAwBnF,MAAxB,EAArB,EAAuD,aAAvD;CACAyZ,YAAAA,KAAK,CAACnV,YAAN,CAAmBqV,OAAO,CAACxU,WAAR,GAAsBnF,MAAtB,EAAnB,EAAmD,aAAnD;CACA,WAJI,MAML;CACCuZ,YAAAA,OAAO,CAACjV,YAAR,CAAqBqV,OAAO,CAACxU,WAAR,GAAsBnF,MAAtB,EAArB,EAAqD,aAArD;CACAyZ,YAAAA,KAAK,CAACnV,YAAN,CAAmBoV,SAAS,CAACvU,WAAV,GAAwBnF,MAAxB,EAAnB,EAAqD,aAArD;CACA;CACD,SAlBD,MAmBK,IAAIF,KAAK,CAACgP,OAAN,OAAoBT,aAAa,CAACiB,WAAtC,EACL;CACCiK,UAAAA,OAAO,CAACjV,YAAR,CAAqBqV,OAAO,CAACxU,WAAR,GAAsBnF,MAAtB,EAArB,EAAqD,aAArD;CACAyZ,UAAAA,KAAK,CAACnV,YAAN,CAAmBqV,OAAO,CAACxU,WAAR,GAAsBnF,MAAtB,EAAnB,EAAmD,aAAnD;CACA;CACD;CACD;;;gCAGD;CAAA;;CACC,aAAO,KAAK2B,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAO+J,uBAAY,CAACC,MAAb,CAAoB;CAC1BC,UAAAA,EAAE,EAAE,MAAI,CAAC1B,OADiB;CAE1BnI,UAAAA,SAAS,EAAE,8CAFe;CAG1B8J,UAAAA,QAAQ,EAAE,IAHgB;CAI1BC,UAAAA,WAAW,EAAE,MAAI,CAACkM,cAAL,EAJa;CAK1BjM,UAAAA,WAAW,EAAE;CACZC,YAAAA,QAAQ,EAAE,IADE;CAEZC,YAAAA,SAAS,EAAE;CAFC,WALa;CAS1BI,UAAAA,UAAU,EAAE,EATc;CAU1B4B,UAAAA,KAAK,EAAE;CAACsL,YAAAA,MAAM,EAAE,CAAC;CAAV,WAVmB;CAW1BrN,UAAAA,OAAO,EAAE,CAXiB;CAY1BC,UAAAA,cAAc,EAAE,CAZU;CAa1BG,UAAAA,OAAO,EAAE,MAAI,CAACC,eAAL,EAbiB;CAc1BC,UAAAA,UAAU,EAAE,IAdc;CAe1BC,UAAAA,eAAe,EAAE,MAAI,CAACrC;CAfI,SAApB,CAAP;CAiBA,OAlBM,CAAP;CAmBA;;;uCAGD;CAAA;;CACC,aAAO,KAAKhJ,KAAL,CAAWO,QAAX,CAAoB,gBAApB,EAAsC,YAAM;CAClD,eAAOE,aAAG,CAACC,MAAX,sBAEI,MAAI,CAACoW,eAAL,EAFJ,EAGI,MAAI,CAACI,aAAL,EAHJ;CAMA,OAPM,CAAP;CAQA;;;mCAGD;CACC,UAAI,KAAK1I,MAAT,EACA;CACC1P,QAAAA,aAAG,CAACiJ,KAAJ,CAAU,KAAK4L,kBAAL,EAAV;CACA7U,QAAAA,aAAG,CAACoJ,MAAJ,CAAW,KAAKsG,MAAL,CAAY7M,SAAZ,EAAX,EAAoC,KAAKgS,kBAAL,EAApC;CACA;;CACD,aAAOlT,aAAG,CAACC,MAAX,uBAEI,KAAKiT,kBAAL,EAFJ,EAIuD,KAAK8C,eAAL,CAAqB9U,SAArB,EAJvD,EAKK,KAAKiV,cAAL,EALL,EAMqD,KAAKD,aAAL,CAAmBhV,SAAnB,EANrD,EASK,KAAKqV,mBAAL,EATL;CAaA;;;0CAGD;CACC;CACA,aAAO,KAAKrV,SAAL,GAAiByB,aAAjB,CAA+B,4CAA/B,CAAP;CACA;;;0CAGD;CACC,aAAO,KAAKpD,KAAL,CAAWO,QAAX,CAAoB,iBAApB,EAAuC,YAAM;CACnD,eAAOE,aAAG,CAACC,MAAX;CACA,OAFM,CAAP;CAGA;;;sCAGD;CACC,aAAO,KAAKV,KAAL,CAAWO,QAAX,CAAoB,aAApB,EAAmC,YAAM;CAC/C,eAAOE,aAAG,CAACC,MAAX;CACA,OAFM,CAAP;CAGA;;;2CAGD;CACC,aAAO,KAAKV,KAAL,CAAWO,QAAX,CAAoB,kBAApB,EAAwC,YAAM;CACpD,eAAOE,aAAG,CAACC,MAAX,uBAGW0J,aAAG,CAACC,UAAJ,CAAe,0CAAf,CAHX;CAKA,OANM,CAAP;CAOA;;;uCAGD;CACC,aAAO,KAAKrK,KAAL,CAAWO,QAAX,CAAoB,cAApB,EAAoC,YAAM;CAChD,eAAOE,aAAG,CAACC,MAAX,uBAGW0J,aAAG,CAACC,UAAJ,CAAe,qCAAf,CAHX;CAKA,OANM,CAAP;CAOA;;;qCAGD;CACC,aAAO,KAAKrK,KAAL,CAAWO,QAAX,CAAoB,YAApB,EAAkC,YAAM;CAC9C,eAAOE,aAAG,CAACC,MAAX,qBAGW0J,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAHX;CAKA,OANM,CAAP;CAOA;;;+BAESmE,QACV;CAAA;;CACC,WAAKA,MAAL,GAAcA,MAAd;CACA,WAAKA,MAAL,CAAYrN,WAAZ;CACA,WAAKqN,MAAL,CAAYpF,SAAZ,CAAsB,UAAtB,EAAkC,UAAC5H,KAAD,EAAW;CAC5C,QAAA,MAAI,CAACpD,QAAL,CAAcoD,KAAK,CAACwI,OAAN,GAAgBvI,KAA9B;;CACA,QAAA,MAAI,CAAC2W,sBAAL;;CACA,QAAA,MAAI,CAACnV,QAAL,CAAczB,KAAd;CACA,OAJD;CAMA1C,MAAAA,aAAG,CAACiJ,KAAJ,CAAU,KAAK4L,kBAAL,EAAV;CACA7U,MAAAA,aAAG,CAACoJ,MAAJ,CAAWsG,MAAM,CAAC7M,SAAP,EAAX,EAA+B,KAAKgS,kBAAL,EAA/B;CACA;;;iCAGD;CACC,aAAO,KAAKnF,MAAZ;CACA;;;gCAGD;CAAA;;CACC,aAAO,KAAKxO,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,YACC,MAAI,CAACkW,eAAL,CAAqB7V,QAArB,OAAoC,IAApC,IACG,MAAI,CAAC+V,aAAL,CAAmB/V,QAAnB,OAAkC,IAFtC,EAIA;CACC,iBAAO,IAAP;CACA;;CAED,YAAIyX,MAAM,GAAG,MAAI,CAACvB,eAAL,GAAuB1O,OAAvB,CAA+BiQ,MAA5C;;CACAA,QAAAA,MAAM,GAAGA,MAAM,GAAG1b,cAAI,CAACC,QAAL,CAAcyb,MAAd,CAAH,GAA2B,CAA1C;CACA,YAAMtL,IAAI,GAAG,MAAI,CAACiK,mBAAL,GAA2B5O,OAA3B,CAAmC2E,IAAnC,IAA2CL,aAAa,CAACkB,WAAtE;CAEA,eAAO,IAAIlB,aAAJ,CAAkB;CACxBC,UAAAA,IAAI,EAAE,MAAI,CAAC8J,eAAL,CAAqB7V,QAArB,EADkB;CAExBgM,UAAAA,EAAE,EAAE,MAAI,CAAC+J,aAAL,CAAmB/V,QAAnB,EAFoB;CAGxBiM,UAAAA,KAAK,EAAEwL,MAHiB;CAIxBtL,UAAAA,IAAI,EAAEA;CAJkB,SAAlB,CAAP;CAMA,OAnBM,CAAP;CAoBA;;;8BAEQ5O,OACT;CACC,qGAAeA,KAAf;;CAEA,UAAIA,KAAK,KAAK,IAAd,EACA;CACC,aAAKsY,eAAL,CAAqBrY,QAArB,CAA8B,IAA9B;CACA,aAAKuY,aAAL,CAAmBvY,QAAnB,CAA4B,IAA5B;CAEA,aAAK+C,WAAL;CAEArC,QAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKuZ,kBAAL,EAAV,EAAqC,YAArC,EAAoD,IAAI5L,aAAJ,EAAD,CAAoB5L,cAApB,EAAnD;CAEA0V,QAAAA,QAAQ,CAACkB,aAAT,CAAuB,KAAKZ,eAAL,EAAvB;CACAN,QAAAA,QAAQ,CAACkB,aAAT,CAAuB,KAAKV,mBAAL,EAAvB;CACAR,QAAAA,QAAQ,CAACkB,aAAT,CAAuB,KAAKR,aAAL,EAAvB;CACA,OAZD,MAcA;CACC;CACA,aAAKT,eAAL,CAAqBrY,QAArB,CAA8BD,KAAK,CAACiP,OAAN,EAA9B;CACA,aAAKuJ,aAAL,CAAmBvY,QAAnB,CAA4BD,KAAK,CAACkP,KAAN,EAA5B;CACA,aAAKkL,wBAAL;CAEA,aAAKzB,eAAL,GAAuB1O,OAAvB,CAA+BiQ,MAA/B,GAAwCla,KAAK,CAAC+O,QAAN,EAAxC;CACA,aAAK8J,mBAAL,GAA2B5O,OAA3B,CAAmC2E,IAAnC,GAA0C5O,KAAK,CAACgP,OAAN,EAA1C;CAEArO,QAAAA,aAAG,CAACC,KAAJ,CAAU,KAAK+X,eAAL,EAAV,EAAkC,WAAlC,mBAAyD3Y,KAAK,CAAC+O,QAAN,EAAzD;CACApO,QAAAA,aAAG,CAACC,KAAJ,CAAU,KAAKuZ,kBAAL,EAAV,EAAqC,YAArC,EAAmD,KAAK1X,QAAL,GAAgBE,cAAhB,EAAnD;CAEA0V,QAAAA,QAAQ,CAACmB,YAAT,CAAsB,KAAKX,mBAAL,EAAtB;CACAR,QAAAA,QAAQ,CAACmB,YAAT,CAAsB,KAAKT,aAAL,EAAtB;;CACA,YAAI/Y,KAAK,CAACgP,OAAN,OAAoBT,aAAa,CAACiB,WAAtC,EACA;CACC6I,UAAAA,QAAQ,CAACkB,aAAT,CAAuB,KAAKZ,eAAL,EAAvB;CACA,eAAKE,mBAAL,GAA2BtT,SAA3B,GAAuC0G,aAAG,CAACC,UAAJ,CAAe,wCAAf,CAAvC;CACA,SAJD,MAMA;CACCmM,UAAAA,QAAQ,CAACmB,YAAT,CAAsB,KAAKb,eAAL,EAAtB;CACA,eAAKE,mBAAL,GAA2BtT,SAA3B,GAAuC0G,aAAG,CAACC,UAAJ,CAAe,wCAAf,CAAvC;CACA;;CAED,aAAK5G,SAAL;CACA;CACD;;;8BAEQjC,OACT;CACC,WAAKxB,KAAL,CAAWgB,MAAX,CAAkB,OAAlB;CACA,WAAKK,IAAL,CAAU,UAAV,EAAsB;CAACmX,QAAAA,QAAQ,EAAE,KAAK5X,QAAL;CAAX,OAAtB;CACA;;;iCAGD;CACC,UAAMzC,KAAK,GAAG,KAAKyC,QAAL,EAAd;;CACA,UAAI,KAAK4N,MAAL,CAAYqD,aAAZ,CAA0B1T,KAA1B,CAAJ,EACA;CACC,aAAKqQ,MAAL,CAAY6E,cAAZ,CAA2BlV,KAA3B;CACA,aAAKia,sBAAL;CACA,OAJD,MAMA;CACC,aAAK5J,MAAL,CAAYrN,WAAZ;CACA,aAAKsX,oBAAL;CACA;CACD;;;mCAGD;CACC,WAAKjK,MAAL,CAAYrN,WAAZ;CACA,WAAKiX,sBAAL;CACA;;;4CAGD;CACCtZ,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAK4W,kBAAL,EAAb,EAAwC9B,QAAQ,CAAC5U,YAAjD;CACA;;;8CAGD;CACC,WAAK6U,eAAL,CAAqBtV,WAArB;CACA,WAAKwV,aAAL,CAAmBxV,WAAnB;CACArC,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKyW,kBAAL,EAAhB,EAA2C9B,QAAQ,CAAC5U,YAApD;CACA;;;mCAjSoByD,QACrB;CACCvG,MAAAA,aAAG,CAAC4C,QAAJ,CAAa2D,MAAb,EAAqBmR,QAAQ,CAACkC,aAA9B;CACA;;;kCAEmBrT,QACpB;CACCvG,MAAAA,aAAG,CAAC+C,WAAJ,CAAgBwD,MAAhB,EAAwBmR,QAAQ,CAACkC,aAAjC;CACA;;;oCAEqBrT,QACtB;CACC,aAAO,CAACvG,aAAG,CAACgD,QAAJ,CAAauD,MAAb,EAAqBmR,QAAQ,CAACkC,aAA9B,CAAR;CACA;;;GAhJoCnX;;6BAAjBiV,2BAEG;;KCIHmC;;;CAEpB,mBAAY5Y,OAAZ,EACA;CAAA;;CAAA;CACC,yGAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,uCAAvB;;CACA,UAAK7B,QAAL,GAAgB,CAAC,kBAAD,EAAqB,kBAArB,CAAhB;CACA,UAAKG,YAAL,GAAoB,MAApB;CACA,UAAKK,SAAL,GAAiB,MAAjB;CAEA,UAAKiY,aAAL,GAAqB,IAArB;CAEA,UAAKJ,QAAL,GAAgB,IAAIhC,QAAJ,CAAazW,OAAb,CAAhB;;CACA,UAAKyY,QAAL,CAAcpP,SAAd,CAAwB,UAAxB,EAAoC,MAAKyP,gBAAL,CAAsBxW,IAAtB,2CAApC;;CACA,UAAKuS,IAAL,CAAUkE,UAAV,CAAqB,UAArB,EAAiC1O,aAAG,CAACC,UAAJ,CAAe,kCAAf,CAAjC,EAAqF,MAAKmO,QAA1F;;CAEA,UAAKO,iBAAL,CAAuB,MAAKjD,QAAL,CAAckD,SAAd,EAAvB;;CACA,UAAKlD,QAAL,CAAc1M,SAAd,CAAwB,gBAAxB,EAA0C,UAAC5H,KAAD,EAAW;CACpD,YAAKuX,iBAAL,CAAuBvX,KAAK,CAACwI,OAAN,GAAgBwE,MAAvC;CACA,KAFD;;CAIA,UAAKoG,IAAL,CAAUxL,SAAV,CAAoB,UAApB,EAAgC,MAAK6P,YAAL,CAAkB5W,IAAlB,2CAAhC;;CAlBD;CAmBC;;;;uCAEiBmM,QAClB;CAAA;;CACC,UAAM0K,cAAc,GAAG1K,MAAM,CAACsD,iBAAP,EAAvB;CACA,WAAK0G,QAAL,CAAclF,SAAd,CAAwB4F,cAAxB;CACAA,MAAAA,cAAc,CAAC9P,SAAf,CAAyB,UAAzB,EAAqC,YAAM;CAC1C,QAAA,MAAI,CAACwP,aAAL,GAAqB,MAAI,CAACJ,QAA1B;;CACA,QAAA,MAAI,CAACvV,QAAL;CACA,OAHD;CAKA,UAAM9E,KAAK,GAAG,KAAKyC,QAAL,EAAd;;CACA,UAAIzC,KAAK,KAAK,IAAV,IAAkBA,KAAK,YAAYuO,aAAvC,EACA;CACC,YAAI,KAAK8L,QAAL,CAAcQ,SAAd,GAA0BnH,aAA1B,CAAwC1T,KAAxC,CAAJ,EACA;CACC,eAAK2X,QAAL,CAAckD,SAAd,GAA0B7X,WAA1B;CACA,eAAKqX,QAAL,CAAcQ,SAAd,GAA0B3F,cAA1B,CAAyClV,KAAzC;CACA,eAAKqa,QAAL,CAAcJ,sBAAd;CACA;CACD;CACD;;;sCAEgB5W,OACjB;CACC,WAAKoX,aAAL,GAAqB,KAAK9C,QAA1B;CACA,WAAK0C,QAAL,CAAcrX,WAAd;CAEA,4GAAuBK,KAAvB;CACA;;;sCAEgBA,OACjB;CACC,WAAKoX,aAAL,GAAqB,KAAKJ,QAA1B;CACA,WAAK1C,QAAL,CAAc3U,WAAd;CAEA,UAAMgY,SAAS,GAAG3X,KAAK,CAACwI,OAAN,GAAgBwO,QAAlC;;CACA,UAAIW,SAAS,KAAK,IAAlB,EACA;CACC,aAAK9b,OAAL,CAAae,QAAb,CACC+a,SAAS,CAACja,UAAV,CAAqB,KAAK7B,OAAL,CAAauD,QAAb,GAAwBtC,UAAxB,EAArB,CADD;CAGA;;CAED,WAAK2E,QAAL;CACA;;;8CAGD;CACC,WAAKA,QAAL;CACA;;;oCAGD;CACC,WAAKuV,QAAL,CAActO,QAAd,GAAyBC,KAAzB;CACA;;;mCAGD;CACC,WAAK2L,QAAL,CAAc3U,WAAd;CACA,WAAKqX,QAAL,CAAcrX,WAAd;CACA,WAAKuN,OAAL,CAAavN,WAAb;CACA;;;8BAEQhD,OACT;CACC,WAAK2X,QAAL,CAAc1X,QAAd,CAAuB,IAAvB;CACA,WAAKoa,QAAL,CAAcpa,QAAd,CAAuB,IAAvB;CACA,WAAK+C,WAAL;CAEA,WAAKyX,aAAL,GAAqB,IAArB;;CAEA,UAAIpa,cAAI,CAAC4a,MAAL,CAAYjb,KAAZ,CAAJ,EACA,CADA,MAIK,IACJ/D,WAAW,CAAC+D,KAAD,CAAX,IACG3D,KAAK,CAAC2D,KAAD,CADR,IAEGvD,WAAW,CAACuD,KAAD,CAFd,IAGGpB,QAAQ,CAACoB,KAAD,CAJP,EAML;CACC,sGAAeA,KAAf;CAEA,aAAKya,aAAL,GAAqB,KAAK9C,QAA1B;CACA,OAVI,MAWA,IAAIrJ,gBAAgB,CAACtO,KAAD,CAApB,EACL;CACC,aAAKya,aAAL,GAAqB,KAAKJ,QAA1B;CAEA,YAAMa,aAAa,GAAG,IAAI3M,aAAJ,CAAkBvO,KAAlB,CAAtB;CACA,aAAKqa,QAAL,CAAcpa,QAAd,CAAuBib,aAAvB;CACA,aAAKhc,OAAL,CAAae,QAAb,CAAsBib,aAAtB;CAEA,YAAM/K,OAAO,GAAG,KAAKwH,QAAL,CAAcwD,oBAAd,EAAhB;CACA,YAAM1F,YAAY,GAAGtF,OAAO,CAACkD,iBAAR,KAClBlD,OAAO,CAACqD,aAAR,CAAsBrD,OAAO,CAACkD,iBAAR,EAAtB,CADkB,GAElBlD,OAAO,CAACuF,oBAAR,CAA6BwF,aAA7B,CAFH;;CAGA,YAAIzF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAKkC,QAAL,CAAckD,SAAd,EAA9C,EACA;CACC,eAAKlD,QAAL,CAAcxC,SAAd,CAAwBM,YAAxB;CACA,eAAKmF,iBAAL,CAAuBnF,YAAvB;CACA;;CAED,aAAKgB,IAAL,CAAU0B,OAAV,CAAkB,UAAlB;;CACA,YAAI+C,aAAa,CAAC/a,UAAd,KAA6B,CAAjC,EACA;CACC,eAAKsW,IAAL,CAAU0B,OAAV,CAAkB,SAAlB;CACA;CACD;CACD;;;gCAGD;CAAA;;CACC,aAAO,KAAKtW,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,YAAI,MAAI,CAACqY,aAAL,KAAuB,IAA3B,EACA;CACC,iBAAO,IAAP;CACA,SAHD,MAIK,IAAI,MAAI,CAACA,aAAL,KAAuB,MAAI,CAACJ,QAAhC,EACL;CACC,cAAMW,SAAS,GAAG,MAAI,CAACX,QAAL,CAAc5X,QAAd,EAAlB;;CACA,iBAAQuY,SAAS,KAAK,IAAf,GACJA,SADI,GAEJA,SAAS,CAACja,UAAV,CAAqB,MAAI,CAAC7B,OAAL,CAAauD,QAAb,GAAwBtC,UAAxB,EAArB,CAFH;CAGA,SANI,MAQL;CACC;CACA;CACD,OAhBM,CAAP;CAiBA;;;GA1JmCuX;;CCd9B,IAAM0D,cAAc,GAAG,uCAAvB;AAEP,CAAe,SAASC,eAAT,CAAyBC,OAAzB,EACf;CACC,MAAI,CAAC,CAACA,OAAO,CAAC/e,IAAR,GAAeJ,KAAf,CAAqBif,cAArB,CAAN,EACA;CACC,WAAO,IAAP;CACA;;CAED,SAAO,CAAC,CAACE,OAAO,CAAC/e,IAAR,GAAeJ,KAAf,CAAqBof,qBAAqB,EAA1C,CAAT;CACA;;CAED,SAASA,qBAAT,GACA;CACC,MAAMC,eAAe,GAAGxN,cAAc,CAACoN,cAAD,CAAtC;CACA,MAAMK,qBAAqB,GAAGzN,cAAc,CAACE,eAAD,CAA5C;CACA,SAAO,IAAIH,MAAJ,YAAe0N,qBAAf,cAAwCD,eAAxC,EAAP;CACA;;KCJoBE;CAIpB,wBAAY1b,KAAZ,EACA;CAAA;CACC;CACA,SAAKA,KAAL,GAAaN,0BAAb;CACA,SAAKO,QAAL,CAAcD,KAAd;CACA;;;;+BAGD;CACC,+BACG,KAAKA,KAAL,CAAWL,GAAX,CAAeP,OAAf,CAAuB,UAAvB,EAAmC,EAAnC,CADH,cAC6C,KAAKY,KAAL,CAAWJ,IADxD,cACgE,KAAKI,KAAL,CAAWH,UAD3E;CAGA;;;8BAEQG,OACT;CACC,UAAIK,cAAI,CAACC,QAAL,CAAcN,KAAd,CAAJ,EACA;CACC,YAAIA,KAAK,YAAY0b,YAArB,EACA;CACC;CACA,eAAK1b,KAAL,CAAWL,GAAX,GAAiBK,KAAK,CAAC2b,MAAN,EAAjB;CACA,eAAK3b,KAAL,CAAW4b,KAAX,GAAmB5b,KAAK,CAAC6b,QAAN,EAAnB;CACA,eAAK7b,KAAL,CAAW8b,MAAX,GAAoB9b,KAAK,CAAC+b,SAAN,EAApB;CACA,eAAK/b,KAAL,CAAWgc,QAAX,GAAsBhc,KAAK,CAACic,WAAN,EAAtB;CACA,eAAKjc,KAAL,CAAWJ,IAAX,GAAkBI,KAAK,CAACkc,OAAN,EAAlB;CACA,eAAKlc,KAAL,CAAWH,UAAX,GAAwBG,KAAK,CAACmc,aAAN,EAAxB;CACA,SATD,MAWA;CACC,eAAKnc,KAAL,iCAAiB,KAAKA,KAAtB,EAAgCA,KAAhC;CACA;CACD;;CAED,UAAIK,cAAI,CAACK,QAAL,CAAcV,KAAd,KAAwBqb,eAAe,CAACrb,KAAD,CAA3C,EACA;CACC,aAAKoc,aAAL,CAAmBpc,KAAnB;CACA;;CAED,aAAO,IAAP;CACA;;;mCAEaqc,QACd;CACC;CACA,UAAMza,OAAO,GAAGlC,0BAAhB;CAEA,UAAM4c,SAAS,GAAGD,MAAM,CAAC9f,IAAP,GAAcJ,KAAd,CAAoB0R,gBAAgB,CAACuN,cAAD,CAApC,CAAlB;;CACA,UAAI,CAAC,CAACkB,SAAN,EACA;CACC1a,QAAAA,OAAO,CAACjC,GAAR,GAAc2c,SAAS,CAAC,CAAD,CAAvB;CAEA1a,QAAAA,OAAO,CAAChC,IAAR,GAAe0c,SAAS,CAAC,CAAD,CAAT,CAAanS,OAAb,CAAqB,MAArB,MAAiC,CAAC,CAAlC,GACZ5K,kBADY,GAEZ,MAFH;CAKAqC,QAAAA,OAAO,CAAC/B,UAAR,GAAqByc,SAAS,CAAC,CAAD,CAAT,CAAanS,OAAb,CAAqB,OAArB,MAAkC,CAAC,CAAnC,GAClB3K,wBADkB,GAElB,OAFH;CAIA;;CAED,UAAM+c,cAAc,GAAGF,MAAM,CAAC9f,IAAP,GAAcJ,KAAd,CAAoB0R,gBAAgB,CAACQ,qBAAD,CAApC,CAAvB;;CACA,UAAG,CAAC,CAACgO,MAAM,CAAC9f,IAAP,GAAcJ,KAAd,CAAoB0R,gBAAgB,CAACK,eAAD,CAApC,CAAF,IAA4D,CAAC,CAACqO,cAAjE,EACA;CACC3a,QAAAA,OAAO,CAAC9B,OAAR,GAAkB,IAAIC,UAAJ,CAAewc,cAAc,CAAC,CAAD,CAA7B,CAAlB;CACA;;CAED,WAAKtc,QAAL,CAAc2B,OAAd;CACA;;;gCAEU1C,SACX;CACC;CAEA,aAAO,IAAP;CACA;;;4BAEMc,OACP;CACC,WAAKC,QAAL,CAAc;CAACN,QAAAA,GAAG,EAAEK;CAAN,OAAd;CACA,aAAO,IAAP;CACA;;;8BAEQA,OACT;CACC,WAAKC,QAAL,CAAc;CAAC2b,QAAAA,KAAK,EAAE5b;CAAR,OAAd;CACA,aAAO,IAAP;CACA;;;+BAESA,OACV;CACC,WAAKC,QAAL,CAAc;CAAC6b,QAAAA,MAAM,EAAE9b;CAAT,OAAd;CACA,aAAO,IAAP;CACA;;;iCAEWA,OACZ;CACC,WAAKC,QAAL,CAAc;CAAC+b,QAAAA,QAAQ,EAAEhc;CAAX,OAAd;CACA,aAAO,IAAP;CACA;;;6BAEOA,OACR;CACC,WAAKC,QAAL,CAAc;CAACL,QAAAA,IAAI,EAAEI;CAAP,OAAd;CACA,aAAO,IAAP;CACA;;;mCAEaA,OACd;CACC,WAAKC,QAAL,CAAc;CAACJ,QAAAA,UAAU,EAAEG;CAAb,OAAd;CACA,aAAO,IAAP;CACA;;;gCAEUA,OACX;CACC,WAAKC,QAAL,CAAc;CAACH,QAAAA,OAAO,EAAEE;CAAV,OAAd;CACA,aAAO,IAAP;CACA;;;8BAGD;CACC,aAAO,KAAKA,KAAL,CAAWL,GAAlB;CACA;;;gCAGD;CACC,aAAO,KAAKK,KAAL,CAAW4b,KAAlB;CACA;;;iCAGD;CACC,aAAO,KAAK5b,KAAL,CAAW8b,MAAlB;CACA;;;mCAGD;CACC,aAAO,KAAK9b,KAAL,CAAWgc,QAAlB;CACA;;;+BAGD;CACC,aAAO,KAAKhc,KAAL,CAAWJ,IAAlB;CACA;;;qCAGD;CAAA,UADc4c,QACd,uEADkC,KAClC;CACC,aAAOA,QAAQ,GACZ,KAAKxc,KAAL,CAAWH,UAAX,KAA0B,OADd,GAEZ,KAAKG,KAAL,CAAWH,UAFd;CAGA;;;kCAGD;CACC,aAAO,KAAKG,KAAL,CAAWF,OAAlB;CACA;;;kCAGD;CACC;CACA,aAAO,CAAP;CACA;;;sCAGD;CACC,UAAIc,KAAK,GAAG,EAAZ;;CACA,UAAI,KAAKZ,KAAL,CAAWF,OAAX,KAAuB,IAA3B,EACA;CACCc,QAAAA,KAAK,6BAAsB,KAAKZ,KAAL,CAAWF,OAAX,CAAmB6C,cAAnB,EAAtB,cAA6D,KAAK3C,KAAL,CAAWF,OAAX,CAAmB6C,cAAnB,EAA7D,MAAL;CACA,OALF;;;CAAA,wBAQwC,KAAK3C,KAR7C;CAAA,UAQQL,GARR,eAQQA,GARR;CAAA,UAQaic,KARb,eAQaA,KARb;CAAA,UAQoBhc,IARpB,eAQoBA,IARpB;CAAA,UAQ0BC,UAR1B,eAQ0BA,UAR1B;CASC,UAAM4c,SAAS,sBAAe7c,IAAf,cAAuBC,UAAvB,CAAf;;CACA,UAAIF,GAAG,KAAK,IAAZ,EACA;CACCiB,QAAAA,KAAK,GAAGA,KAAK,CAAChE,MAAN,GAAgBgE,KAAK,GAAG,GAAxB,GAA+B,EAAvC;;CACA,YAAGgb,KAAK,KAAK,IAAb,EACA;CACChb,UAAAA,KAAK,qCAA8BjB,GAA9B,yBAAgDic,KAAhD,oBAA+Da,SAA/D,MAAL;CACA7b,UAAAA,KAAK,6BAAsBjB,GAAtB,yBAAwCic,KAAxC,oBAAuDa,SAAvD,MAAL;CACA;;CACD7b,QAAAA,KAAK,mBAAYjB,GAAZ,gBAAqB8c,SAArB,CAAL;CACA;;CAED,aAAO7b,KAAP;CACA;;;gDAGD;CACC;CACA,aAAO,EAAP;CACA;;;8CAGD;CACC,aAAO,CACN;CAAC3B,QAAAA,IAAI,EAAEgN,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAAP;CAAuDlM,QAAAA,KAAK,EAAE;CAA9D,OADM,EAEN;CAACf,QAAAA,IAAI,EAAEgN,aAAG,CAACC,UAAJ,CAAe,+BAAf,CAAP;CAAwDlM,QAAAA,KAAK,EAAE;CAA/D,OAFM,CAAP;CAIA;;;8CAE+BA,OAChC;CACC,aAAOA,KAAK,GAAG,OAAH,GAAa,QAAzB;CACA;;;;;;;;;;;;;;;KCzNmB0c;;;CASpB,iBAAY9a,OAAZ,EACA;CAAA;;CAAA;CACC;;CACA,UAAKiC,iBAAL,CAAuB,iCAAvB;;CACA,UAAKjC,OAAL,GAAeA,OAAf,CAHD;;CAMC,QAAM+a,UAAU,GAAGnX,6BAAU,CAACC,aAAX,EAAnB;CACA,UAAKmX,QAAL,GAAgB,IAAID,UAAU,CAACpS,EAAX,CAAcsS,OAAd,CAAsBxI,EAAtB,CAAyByI,KAAzB,CAA+BJ,KAAnC,CAAyC;CACxDrQ,MAAAA,EAAE,EAAE,4BAA4B7N,cAAI,CAACoM,SAAL,GAAiB/F,WAAjB,EADwB;CAExDrC,MAAAA,SAAS,EAAE,oCAF6C;CAGxDua,MAAAA,WAAW,EAAE,IAH2C;CAIxDC,MAAAA,WAAW,EAAE,IAJ2C;CAKxD;CACAC,MAAAA,eAAe,EAAE,IANuC;CAOxDC,MAAAA,UAAU,EAAE,IAP4C;CAQxDC,MAAAA,UAAU,EAAE;CAACxV,QAAAA,KAAK,EAAE;CAAR,OAR4C;CASxDyV,MAAAA,YAAY,EAAE;CACblU,QAAAA,MAAM,EAAE,mBADK;CAEbmU,QAAAA,KAAK,EAAE,MAAKzb,OAAL,CAAayb,KAAb,CAAmBhR;CAFb,OAT0C;CAaxDxF,MAAAA,WAAW,EAAE,MAAKjF,OAAL,CAAaiF;CAb8B,KAAzC,CAAhB;;CAeA,UAAK+V,QAAL,CAAc3R,SAAd,CAAwB,QAAxB,EAAkC,MAAKqS,aAAL,CAAmBpZ,IAAnB,2CAAlC;;CAEA,UAAKqZ,SAAL,GAAiB,IAAIhT,EAAE,CAACsS,OAAH,CAAWxI,EAAX,CAAcyI,KAAd,CAAoBU,QAAxB,CAAiC;CACjD;CACAnR,MAAAA,EAAE,EAAE,iCAAiC7N,cAAI,CAACoM,SAAL,GAAiB/F,WAAjB,EAFY;CAGjD;CACA;CACAiS,MAAAA,KAAK,EAAE7K,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAL0C;CAMjD1J,MAAAA,SAAS,EAAE,mCANsC;CAOjD;CACA8G,MAAAA,KAAK,EAAEoS,YAAY,CAAC+B,sBAAb,EAR0C;CASjD3Y,MAAAA,QAAQ,EAAE,MAAK4Y,YAAL,CAAkBxZ,IAAlB,2CATuC;CAUjD2C,MAAAA,WAAW,EAAE,MAAKjF,OAAL,CAAaiF;CAVuB,KAAjC,CAAjB;CAaA,UAAK8W,eAAL,GAAuB,IAAIpT,EAAE,CAACsS,OAAH,CAAWxI,EAAX,CAAcyI,KAAd,CAAoBc,QAAxB,CAAiC;CACvD;CACAvR,MAAAA,EAAE,EAAE,mCAAmC7N,cAAI,CAACoM,SAAL,GAAiB/F,WAAjB,EAFgB;CAGvDrC,MAAAA,SAAS,EAAE,yCAH4C;CAIvD;CACA;CACAkU,MAAAA,QAAQ,EAAE,KAN6C;CAOvDmH,MAAAA,OAAO,EAAE,IAP8C;CAQvD;CACAvU,MAAAA,KAAK,EAAE,CACN;CAACrK,QAAAA,IAAI,EAAEgN,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAAP;CAAuDlM,QAAAA,KAAK,EAAE;CAA9D,OADM,CATgD;CAYvD8E,MAAAA,QAAQ,EAAE,MAAKgZ,kBAAL,CAAwB5Z,IAAxB;CAZ6C,KAAjC,CAAvB;CArCD;CAmDC;;;;mCAGD;CACC,aAAO5B,aAAG,CAACC,MAAX,sBAEI,KAAKqa,QAAL,CAAcpZ,SAAd,EAFJ,EAGI,KAAK+Z,SAAL,CAAe/Z,SAAf,EAHJ,EAII,KAAKma,eAAL,CAAqBna,SAArB,EAJJ;CAOA;;;mCAEaH,OACd;CACC,UAAMrD,KAAK,GAAG,KAAKyC,QAAL,MAAmB,IAAIiZ,YAAJ,EAAjC;;CACA,UAAIrY,KAAK,CAACwI,OAAN,GAAgB7L,KAAhB,CAAsB+d,GAA1B,EACA;CACC/d,QAAAA,KAAK,CAACge,MAAN,CAAa3a,KAAK,CAACwI,OAAN,GAAgB7L,KAAhB,CAAsB+d,GAAnC;CACA/d,QAAAA,KAAK,CAACie,SAAN,CAAgB5a,KAAK,CAACwI,OAAN,GAAgB7L,KAAhB,CAAsBqM,EAAtC;;CACA,YAAIhJ,KAAK,CAACwI,OAAN,GAAgB7L,KAAhB,CAAsBke,KAA1B,EACA;CACCle,UAAAA,KAAK,CAACme,QAAN,CAAe9a,KAAK,CAACwI,OAAN,GAAgB7L,KAAhB,CAAsBke,KAArC;CACAle,UAAAA,KAAK,CAACoe,WAAN,CAAkB/a,KAAK,CAACwI,OAAN,GAAgB7L,KAAhB,CAAsBqe,IAAxC;CACA;CACD,OATD,MAWA;CACCre,QAAAA,KAAK,CAACge,MAAN,CAAa,IAAb;CACAhe,QAAAA,KAAK,CAACie,SAAN,CAAgB,IAAhB;CACAje,QAAAA,KAAK,CAACme,QAAN,CAAe,IAAf;CACAne,QAAAA,KAAK,CAACoe,WAAN,CAAkB,IAAlB;CACA;;CAED,WAAKne,QAAL,CAAcD,KAAd;CACA,WAAK8E,QAAL;CAEA,WAAKwZ,QAAL,CAActe,KAAd;CACA;;;8BAEQA,OACT;CACC,UAAMY,KAAK,GAAG,KAAKgB,OAAL,CAAa2c,SAA3B;CACA,UAAMlB,KAAK,GAAG,KAAKzb,OAAL,CAAayb,KAA3B;CAEA,UAAImB,QAAJ;;CACA,UACC5d,KAAK,CAAC4d,QAAN,KAAmBnB,KAAK,CAACmB,QAAzB,IACG5d,KAAK,CAAC4d,QAAN,KAAmBnB,KAAK,CAACoB,oBAAN,CAA2BpB,KAAK,CAACmB,QAAjC,CAFvB,EAIA;CACCA,QAAAA,QAAQ,GAAG,UAAX;CACA,OAND,MAOK,IAAI,CAAC5d,KAAK,CAAC8d,aAAN,EAAL,EACL;CACCF,QAAAA,QAAQ,GAAGjU,EAAE,CAACsS,OAAH,CAAW8B,KAAX,CAAiBC,IAAjB,CACVhe,KAAK,CAAC4d,QAAN,CAAejV,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CADU,EAEV,GAFU,EAGV3I,KAAK,CAACie,eAAN,CAAsBje,KAAK,CAACke,OAAN,GAAgB,CAAhB,CAAtB,CAHU,CAAX;CAKA,OAPI,MASL;CACCN,QAAAA,QAAQ,GAAG5d,KAAK,CAAC4d,QAAN,CAAejV,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAX;CACA;;CAED,UAAM8D,IAAI,mCAAKmR,QAAL,EAAgB,EAAhB,CAAV;CACAnR,MAAAA,IAAI,CAACmR,QAAD,CAAJ,CAAenS,EAAf,GAAoBrM,KAAK,CAAC+b,SAAN,MAAqB,CAAC,CAA1C;CACA1O,MAAAA,IAAI,CAACmR,QAAD,CAAJ,CAAeH,IAAf,GAAsBre,KAAK,CAACic,WAAN,MAAuB,CAAC,CAA9C;CAEAjT,MAAAA,uBAAO,CAACC,WAAR,GACEC,MADF,CAEE,6BAFF,EAGE;CACCmU,QAAAA,KAAK,EAAE,KAAKzb,OAAL,CAAayb,KAAb,CAAmBhR,EAD3B;CAECgB,QAAAA,IAAI,EAAEA;CAFP,OAHF;CAQA;;;kCAEYzN,MACb;CACC,UAAIS,cAAI,CAACK,QAAL,CAAcd,IAAd,CAAJ,EACA;CACC,YAAMI,KAAK,GAAG,KAAKyC,QAAL,MAAmB,IAAIiZ,YAAJ,EAAjC;CACA1b,QAAAA,KAAK,CAAC+e,OAAN,CAAcnf,IAAd;CACA,aAAKK,QAAL,CAAcD,KAAd;CACA,aAAK8E,QAAL;CACA;CACD;;;wCAEkBzB,OACnB;CACC,UAAIA,KAAK,YAAYuI,0BAArB,EACA;CACC,YAAM5L,KAAK,GAAG,KAAKyC,QAAL,MAAmB,IAAIiZ,YAAJ,EAAjC;CACA1b,QAAAA,KAAK,CAACgf,aAAN,CACCtD,YAAY,CAACuD,wBAAb,CAAsC,KAAKtB,eAAL,CAAqBlb,QAArB,EAAtC,CADD;CAGA,aAAKxC,QAAL,CAAcD,KAAd;CACA,aAAK8E,QAAL;CACA;CACD;;;8BAEQzB,OACT;CACC,WAAKxB,KAAL,CAAWgB,MAAX,CAAkB,OAAlB;CACA,WAAKK,IAAL,CAAU,UAAV,EAAsB;CAACmK,QAAAA,IAAI,EAAE;CAAC6R,UAAAA,KAAK,EAAE,KAAKzc,QAAL;CAAR;CAAP,OAAtB;CACA;;;gCAGD;CAAA;;CACC;CACA,aAAO,KAAKZ,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,YAAM+c,QAAQ,GAAG,MAAI,CAACvC,QAAL,CAAcna,QAAd,EAAjB;;CACA,YAAM9C,GAAG,GAAGwf,QAAQ,CAACpB,GAArB;;CACA,YAAIpe,GAAG,KAAK,IAAZ,EACA;CACC,iBAAO,IAAP;CACA,SAHD,MAKA;CACC,cAAMK,KAAK,GAAG,IAAI0b,YAAJ,CAAiB;CAC9B/b,YAAAA,GAAG,EAAEA,GADyB;CAE9Bmc,YAAAA,MAAM,EAAEqD,QAAQ,CAAC9S;CAFa,WAAjB,CAAd;;CAIA,cAAI8S,QAAQ,CAACjB,KAAb,EACA;CACCle,YAAAA,KAAK,CAACme,QAAN,CAAegB,QAAQ,CAACjB,KAAxB;CACAle,YAAAA,KAAK,CAACoe,WAAN,CAAkBe,QAAQ,CAACnD,QAA3B;CACA;;CACD,cAAMpc,IAAI,GAAG,MAAI,CAAC2d,SAAL,CAAe9a,QAAf,EAAb;;CACA,cAAI7C,IAAI,KAAK,IAAb,EACA;CACCI,YAAAA,KAAK,CAAC+e,OAAN,CAAcnf,IAAd;CACA;;CAEDI,UAAAA,KAAK,CAACgf,aAAN,CAAoBtD,YAAY,CAACuD,wBAAb,CAAsC,MAAI,CAACtB,eAAL,CAAqBlb,QAArB,EAAtC,CAApB,EAhBD;;CAoBC,iBAAOzC,KAAP;CACA;CACD,OA9BM,CAAP;CA+BA;;;8BAEQA,OACT;CACC,UAAI,KAAKoF,cAAL,CAAoBpF,KAApB,CAAJ,EACA;CACC;CACA,oGAAeA,KAAf;;CAEA,YAAIA,KAAK,KAAK,IAAd,EACA;CACC,eAAK4c,QAAL,CAAc3c,QAAd,CAAuB;CAAC8d,YAAAA,GAAG,EAAE;CAAN,WAAvB,EAAkC,IAAlC,EADD;CAGC,SAJD,MAMA;CACC,cAAI/d,KAAK,CAAC2b,MAAN,OAAmB,IAAvB,EACA;CACC,iBAAKrW,SAAL;CACA;;CAED,cAAM8Z,aAAa,GAAG;CACrBxQ,YAAAA,IAAI,EAAE,OADe;CAErBmP,YAAAA,GAAG,EAAE/d,KAAK,CAAC2b,MAAN,EAFgB;CAGrBtP,YAAAA,EAAE,EAAErM,KAAK,CAAC+b,SAAN;CAHiB,WAAtB;;CAKA,cAAI/b,KAAK,CAAC6b,QAAN,EAAJ,EACA;CACCuD,YAAAA,aAAa,CAAClB,KAAd,GAAsBle,KAAK,CAAC6b,QAAN,EAAtB;CACAuD,YAAAA,aAAa,CAACf,IAAd,GAAqBre,KAAK,CAACic,WAAN,EAArB;CACA;;CACD,eAAKW,QAAL,CAAc3c,QAAd,CAAuBmf,aAAvB,EAAsC,IAAtC;CACA,eAAK7B,SAAL,CAAetd,QAAf,CAAwBD,KAAK,CAACkc,OAAN,EAAxB,EAAyC,IAAzC;CACA,eAAKyB,eAAL,CAAqB1d,QAArB,CAA8B,CAACD,KAAK,CAACmc,aAAN,CAAoB,IAApB,CAAD,CAA9B;CACA;CACD;CACD;;;iCAGD;CACCxb,MAAAA,aAAG,CAAC4C,QAAJ,CAAa,KAAKqZ,QAAL,CAAcpZ,SAAd,EAAb,EAAwCkZ,KAAK,CAACjZ,YAA9C;CACA;;;mCAGD;CACC9C,MAAAA,aAAG,CAAC+C,WAAJ,CAAgB,KAAKkZ,QAAL,CAAcpZ,SAAd,EAAhB,EAA2CkZ,KAAK,CAACjZ,YAAjD;CACA;;;GA3PiCL;;;;;;;;;;;;KCMdic;;;CAQpB,cAAYzd,OAAZ,EACA;CAAA;;CAAA;CACC,oGAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,kCAAvB;;CACA,UAAKyb,kBAAL,GAA0B,MAAKnd,YAA/B;CACA,UAAKA,YAAL,GAAoB,CACnB,MAAKmd,kBADc,EAEnBD,EAAE,CAACE,UAFgB,EAGnBF,EAAE,CAACG,aAHgB,EAInBH,EAAE,CAACI,cAJgB,EAKnBJ,EAAE,CAACK,WALgB,EAMnBL,EAAE,CAACM,iBANgB,CAApB;CAQA,UAAKC,eAAL,GAAuB,MAAKpd,SAA5B;CACA,UAAKA,SAAL,GAAiB,YAAjB;CAEA,UAAK0c,KAAL,GAAa,IAAIxC,KAAJ,CAAU9a,OAAV,CAAb;;CACA,UAAKsd,KAAL,CAAWjU,SAAX,CAAqB,UAArB,EAAiC,MAAKqS,aAAL,CAAmBpZ,IAAnB,2CAAjC;;CAEA,UAAKpE,OAAL,GAAe,IAAI6U,QAAJ,CAAa/S,OAAb,CAAf;;CACA,UAAK9B,OAAL,CAAamL,SAAb,CAAuB,UAAvB,EAAmC,MAAK4U,eAAL,CAAqB3b,IAArB,2CAAnC;;CACA,UAAK4b,cAAL,GAAsB,IAAInK,OAAJ,CAAY;CAACC,MAAAA,cAAc,EAAE;CAAjB,KAAZ,CAAtB;;CACA,UAAKkK,cAAL,CAAoB7U,SAApB,CAA8B,UAA9B,EAA0C,MAAK8U,sBAAL,CAA4B7b,IAA5B,2CAA1C;;CAEA,UAAK8b,SAAL,GAAiB,IAAIxJ,IAAJ,GAAWwB,SAAX,CAChB,SADgB,EAEhB/L,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAFgB,EAGhB,CAAC,MAAKpM,OAAN,EAAe,MAAKggB,cAApB,CAHgB,CAAjB;CAMA,UAAKG,OAAL,GAAe,IAAIzJ,IAAJ,GACb0J,MADa,CACN,IADM,EAEblI,SAFa,CAGb,OAHa,EAIb/L,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAJa,EAKb,CAAC,MAAKyL,QAAN,EAAgB,MAAKpH,OAArB,EAA8B,MAAKkG,IAAnC,CALa,EAObuB,SAPa,CAQb,OARa,EASb/L,aAAG,CAACC,UAAJ,CAAe,8BAAf,CATa,EAUb,CAAC,MAAKgT,KAAN,EAAa,MAAKc,SAAlB,CAVa,CAAf;CA7BD;CAyCC;;;;mCAGD;CACC,aAAO1d,aAAG,CAACC,MAAX,sBAEI,KAAK0d,OAAL,CAAazc,SAAb,EAFJ;CAKA;;;sCAEgBH,OACjB;CACC,WAAK6b,KAAL,CAAWlc,WAAX;CACA,WAAKlD,OAAL,CAAakD,WAAb;CAEA,uGAAuBK,KAAvB;CACA;;;sCAEgBA,OACjB;CACC,WAAK6b,KAAL,CAAWlc,WAAX;CACA,WAAKlD,OAAL,CAAakD,WAAb;CAEA,uGAAuBK,KAAvB;CACA;;;qCAGD;CACC;CACA,WAAKL,WAAL;CAEA,WAAKyX,aAAL,GAAqB,KAAKyE,KAA1B;CACA,WAAKA,KAAL,CAAW5Z,SAAX;CAEA,WAAKR,QAAL;CACA;;;qCAEezB,OAChB;CACC,UAAM8c,YAAY,GAAG9c,KAAK,CAACwI,OAAN,GAAgBvI,KAArC;;CACA,UAAI6c,YAAY,KAAK,IAArB,EACA;CACCA,QAAAA,YAAY,CAACpf,UAAb,CAAwB,KAAK+e,cAAL,CAAoBrd,QAApB,GAA+BtC,UAA/B,EAAxB;CACA;;CACD,WAAK2f,cAAL,CAAoB7f,QAApB,CAA6BkgB,YAA7B;CAEA,UAAMC,UAAU,GAAG,KAAKlB,KAAL,CAAWzc,QAAX,EAAnB;;CACA,UAAI2d,UAAU,KAAK,IAAnB,EACA;CACC,aAAKlB,KAAL,CAAWjf,QAAX,CAAoBmgB,UAAU,CAACC,UAAX,CAAsBF,YAAtB,CAApB;CACA,aAAK1F,aAAL,GAAqB,KAAKyE,KAA1B;CACA,aAAKA,KAAL,CAAW5Z,SAAX;CACA,aAAKqS,QAAL,CAAc3U,WAAd;CACA,aAAKqX,QAAL,CAAcrX,WAAd;CACA;;CAED,WAAK8B,QAAL;CACA;;;8CAGD;CACC,WAAKA,QAAL;CACA;;;mCAGD;CACC;CACA,WAAKoa,KAAL,CAAWlc,WAAX;CACA;CAED;CACD;CACA;;;;uCACmBhD,OAClB;CACC,WAAK6B,KAAL,CAAWgB,MAAX,CAAkB,OAAlB;CACA,WAAK5C,QAAL,CAAcD,KAAd;CACA;;;8BAEQA,OACT;CACC,WAAKkf,KAAL,CAAWjf,QAAX,CAAoB,IAApB;CACA,WAAKggB,OAAL,CAAa9H,OAAb,CAAqB,OAArB;;CAEA,UAAI9X,cAAI,CAAC4a,MAAL,CAAYjb,KAAZ,CAAJ,EACA;CACC,iGAAeA,KAAf;CACA,OAHD,MAIK,IAAIK,cAAI,CAACK,QAAL,CAAcV,KAAd,CAAJ,EACL;CACC,iGAAeA,KAAf;CACA,OAHI,MAIA,IAAI,KAAKsf,kBAAL,IAA2Btf,KAA3B,IAAoCK,cAAI,CAACK,QAAL,CAAcV,KAAK,CAAC,KAAKsf,kBAAN,CAAnB,CAAxC,EACL;CACC,iGAAetf,KAAK,CAAC,KAAKsf,kBAAN,CAApB;CACA,OAHI,MAIA,IAAIjf,cAAI,CAACC,QAAL,CAAcN,KAAd,CAAJ,EACL;CACC;CACA,YAAMsgB,OAAO,GAAG,IAAI5E,YAAJ,EAAhB;;CACA,YAAI2D,EAAE,CAACE,UAAH,IAAiBvf,KAArB,EACA;CACCsgB,UAAAA,OAAO,CAACtC,MAAR,CAAehe,KAAK,CAACqf,EAAE,CAACE,UAAJ,CAAL,CAAqBngB,OAArB,CAA6B,YAA7B,EAA2C,EAA3C,EAA+CA,OAA/C,CAAuD,SAAvD,EAAkE,EAAlE,CAAf;CACA;;CACD,YAAIigB,EAAE,CAACG,aAAH,IAAoBxf,KAAxB,EACA;CACCsgB,UAAAA,OAAO,CAACnC,QAAR,CAAiBne,KAAK,CAACqf,EAAE,CAACG,aAAJ,CAAL,CAAwBpgB,OAAxB,CAAgC,YAAhC,EAA8C,EAA9C,EAAkDA,OAAlD,CAA0D,SAA1D,EAAqE,EAArE,CAAjB;CACA;;CACD,YAAIigB,EAAE,CAACK,WAAH,IAAkB1f,KAAtB,EACA;CACCsgB,UAAAA,OAAO,CAACvB,OAAR,CAAgB/e,KAAK,CAACqf,EAAE,CAACK,WAAJ,CAArB;CACA;;CACD,YAAIL,EAAE,CAACM,iBAAH,IAAwB3f,KAA5B,EACA;CACCsgB,UAAAA,OAAO,CAACtB,aAAR,CAAsBhf,KAAK,CAACqf,EAAE,CAACM,iBAAJ,CAA3B;CACA;;CACD,YAAIN,EAAE,CAACI,cAAH,IAAqBzf,KAAzB,EACA;CACCsgB,UAAAA,OAAO,CAACD,UAAR,CAAmB,IAAItgB,UAAJ,CAAeC,KAAK,CAACqf,EAAE,CAACI,cAAJ,CAApB,CAAnB;CACA;;CAED,aAAKP,KAAL,CAAWjf,QAAX,CAAoBqgB,OAApB;CACA,aAAKL,OAAL,CAAa9H,OAAb,CAAqB,OAArB;CACA,aAAKsC,aAAL,GAAqB,KAAKyE,KAA1B;;CAEA,YAAIG,EAAE,CAACI,cAAH,IAAqBzf,KAAzB,EACA;CACC,cAAMmgB,YAAY,GAAG,IAAIpgB,UAAJ,CAAeC,KAAK,CAACqf,EAAE,CAACI,cAAJ,CAApB,CAArB;CACA,eAAK3f,OAAL,CAAaG,QAAb,CAAsBkgB,YAAtB;CACA,eAAKL,cAAL,CAAoB7f,QAApB,CAA6BkgB,YAA7B;CACA,eAAKH,SAAL,CAAe7H,OAAf,CAAuB,SAAvB;CACA;CACD;CACD;;;;gCAID;CAAA;;CACC,aAAO,KAAKtW,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,YAAI,MAAI,CAACqY,aAAL,KAAuB,MAAI,CAACyE,KAAhC,EACA;CACC,cAAMkB,UAAU,GAAG,MAAI,CAAClB,KAAL,CAAWzc,QAAX,EAAnB;;CACA,cAAM0d,YAAY,GAAG,MAAI,CAACrgB,OAAL,CAAa2C,QAAb,EAArB;;CACA,cAAI2d,UAAU,KAAK,IAAf,IAAuB,MAAI,CAACtgB,OAAL,CAAa2N,QAAb,EAAvB,IAAkD0S,YAAY,KAAK,IAAvE,EACA;CACCA,YAAAA,YAAY,CAACpf,UAAb,CAAwB,MAAI,CAAC+e,cAAL,CAAoBrd,QAApB,GAA+BtC,UAA/B,EAAxB;CACAigB,YAAAA,UAAU,CAACC,UAAX,CAAsBF,YAAtB;CACA;;CAED,iBAAOC,UAAP;CACA,SAXD,MAaA;CACC;CACA;CACD,OAjBM,CAAP;CAkBA;;;oCAGD;CACC,UAAMpgB,KAAK,GAAG,KAAKyC,QAAL,EAAd;;CACA,UAAIzC,KAAK,KAAK,IAAV,IAAkBA,KAAK,YAAYD,UAAnC,IAAiDC,KAAK,YAAYuO,aAAtE,EACA;CACC,eAAO,CAAC,KAAKqR,eAAN,CAAP;CACA;;CAED,aAAO,CAAC,KAAKpd,SAAN,CAAP;CACA;;;;gCAID;CAAA;;CACC,UAAI,KAAKC,QAAL,OAAoB,IAAxB,EACA;CAAA;;CACC;CACA,4DACE,KAAK6c,kBADP,EAC4B,IAD5B,qCAEED,EAAE,CAACE,UAFL,EAEkB,IAFlB,qCAGEF,EAAE,CAACG,aAHL,EAGqB,IAHrB,qCAIEH,EAAE,CAACI,cAJL,EAIsB,IAJtB,qCAKEJ,EAAE,CAACK,WALL,EAKmB,IALnB,qCAMEL,EAAE,CAACM,iBANL,EAMyB,IANzB;CAQA;;CAED,UAAM3f,KAAK,GAAG,KAAKyC,QAAL,EAAd;CACA,UAAIa,KAAK,GAAG,IAAZ;CACA,UAAI4b,KAAK,GAAG,IAAZ;CACA,UAAIqB,OAAO,GAAG,IAAd;CACA,UAAIzgB,OAAO,GAAG,IAAd,CAlBD;;CAoBC,UAAIF,IAAI,GAAG,IAAX,CApBD;;CAsBC,UAAIC,UAAU,GAAG,IAAjB;;CACA,UAAIG,KAAK,YAAYD,UAAjB,IAA+BC,KAAK,YAAYuO,aAApD,EACA;CACC;CACAjL,QAAAA,KAAK,GAAGtD,KAAK,CAAC2C,cAAN,EAAR;CACA,OAJD,MAMA;CACCuc,QAAAA,KAAK,GAAGlf,KAAK,CAAC2b,MAAN,oBAAyB3b,KAAK,CAAC2b,MAAN,EAAzB,UAA8C,EAAtD;CACA4E,QAAAA,OAAO,GAAGvgB,KAAK,CAAC6b,QAAN,oBAA2B7b,KAAK,CAAC6b,QAAN,EAA3B,UAAkD,EAA5D;CACA/b,QAAAA,OAAO,GAAGE,KAAK,CAACwgB,UAAN,KAAqBxgB,KAAK,CAACwgB,UAAN,GAAmB7d,cAAnB,EAArB,GAA2D,kBAArE;CACA/C,QAAAA,IAAI,GAAGI,KAAK,CAACkc,OAAN,EAAP;CACArc,QAAAA,UAAU,GAAGG,KAAK,CAACmc,aAAN,EAAb;CACA;;CAED,4DACE,KAAKmD,kBADP,EAC4Bhc,KAD5B,sCAEE+b,EAAE,CAACE,UAFL,EAEkBL,KAFlB,sCAGEG,EAAE,CAACG,aAHL,EAGqBe,OAHrB,sCAIElB,EAAE,CAACI,cAJL,EAIsB3f,OAJtB,sCAKEuf,EAAE,CAACK,WALL,EAKmB9f,IALnB,sCAMEyf,EAAE,CAACM,iBANL,EAMyB9f,UANzB;CAQA;;;GA3Q8B2a;;6BAAX6E,kBAEQ;6BAFRA,qBAGW;6BAHXA,sBAIY;6BAJZA,mBAKS;6BALTA,yBAMe;;KCnBfoB;;;CAEpB,uBAAY7e,OAAZ,EACA;CAAA;;CAAA;CACC,6GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,2CAAvB;;CACA,UAAK7B,QAAL,GAAgB,cAAhB;CACA,UAAKG,YAAL,GAAoB,gBAApB;CACA,UAAKK,SAAL,GAAiB,gBAAjB;CALD;CAMC;;;GATuCkV;;KCApBgJ;;;CAEpB,4BAAY9e,OAAZ,EACA;CAAA;;CAAA;CACC,kHAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,gDAAvB;;CACA,UAAK7B,QAAL,GAAgB,cAAhB;CACA,UAAKG,YAAL,GAAoB,uBAApB;CACA,UAAKK,SAAL,GAAiB,uBAAjB;CACA,UAAKP,WAAL,GAAmB,QAAnB;CAND;CAOC;;;GAV4CyV;;KCAzBiJ;;;CAEpB,wBAAY/e,OAAZ,EACA;CAAA;;CAAA;CACC,8GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,4CAAvB;;CACA,UAAK7B,QAAL,GAAgB,CAAC,kBAAD,EAAqB,kBAArB,CAAhB;CACA,UAAKG,YAAL,GAAoB,YAApB;CACA,UAAKK,SAAL,GAAiB,aAAjB;CACA,UAAKP,WAAL,GAAmB,QAAnB;CAND;CAOC;;;GAVwCuY;;KCErBoG;;;CAEpB,wBAAYhf,OAAZ,EACA;CAAA;;CAAA;CACC,8GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,4CAAvB;;CACA,UAAK7B,QAAL,GAAgB,CAAC,kBAAD,EAAqB,kBAArB,CAAhB;CACA,UAAKG,YAAL,GAAoB,aAApB;CACA,UAAKK,SAAL,GAAiB,aAAjB;CACA,UAAKP,WAAL,GAAmB,QAAnB;CAEA,QAAM4e,YAAY,GAAG,MAAKpe,QAAL,MAAmB,IAAI1C,UAAJ,EAAxC;;CACA,UAAKb,OAAL,CAAae,QAAb,CAAsB4gB,YAAY,CAAC9f,UAAb,CAAwB,GAAxB,CAAtB;;CACA,UAAK0V,IAAL,CAAU0B,OAAV,CAAkB,SAAlB;;CAVD;CAWC;;;GAdwCqC;;KCDrBsG;;;CAEpB,yBAAYlf,OAAZ,EACA;CAAA;;CAAA;CACC,+GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,6CAAvB;;CACA,UAAK7B,QAAL,GAAgB,CAAC,kBAAD,EAAqB,kBAArB,CAAhB;CACA,UAAKG,YAAL,GAAoB,cAApB;CACA,UAAKK,SAAL,GAAiB,cAAjB;CACA,UAAKP,WAAL,GAAmB,SAAnB;CAEA,QAAM4e,YAAY,GAAG,MAAKpe,QAAL,MAAmB,IAAI1C,UAAJ,EAAxC;;CACA,UAAKb,OAAL,CAAae,QAAb,CAAsB4gB,YAAY,CAAC9f,UAAb,CAAwB,GAAxB,CAAtB;;CACA,UAAK0V,IAAL,CAAU0B,OAAV,CAAkB,SAAlB;;CAVD;CAWC;;;GAdyCqC;;KCDtBuG;;;CAEpB,uBAAYnf,OAAZ,EACA;CAAA;;CAAA;CACC,6GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,2CAAvB;;CACA,UAAK7B,QAAL,GAAgB,OAAhB;CACA,UAAKG,YAAL,GAAoB,gBAApB;CACA,UAAKK,SAAL,GAAiB,gBAAjB;CALD;CAMC;;;GATuCkV;;KCApBsJ;;;CAEpB,4BAAYpf,OAAZ,EACA;CAAA;;CAAA;CACC,kHAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,gDAAvB;;CACA,UAAK7B,QAAL,GAAgB,OAAhB;CACA,UAAKG,YAAL,GAAoB,uBAApB;CACA,UAAKK,SAAL,GAAiB,uBAAjB;CACA,UAAKP,WAAL,GAAmB,QAAnB;CAND;CAOC;;;GAV4CyV;;KCAzBuJ;;;CAEpB,gCAAYrf,OAAZ,EACA;CAAA;;CAAA;CACC,sHAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,oDAAvB;;CACA,UAAK7B,QAAL,GAAgB,OAAhB;CACA,UAAKG,YAAL,GAAoB,4BAApB;CACA,UAAKK,SAAL,GAAiB,4BAAjB;CALD;CAMC;;;GATgDkV;;KCA7BwJ;;;CAEpB,qCAAYtf,OAAZ,EACA;CAAA;;CAAA;CACC,2HAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,yDAAvB;;CACA,UAAK7B,QAAL,GAAgB,OAAhB;CACA,UAAKG,YAAL,GAAoB,mCAApB;CACA,UAAKK,SAAL,GAAiB,mCAAjB;CACA,UAAKP,WAAL,GAAmB,QAAnB;CAND;CAOC;;;GAVqDyV;;KCAlCyJ;;;CAEpB,yBAAYvf,OAAZ,EACA;CAAA;;CAAA;CACC,+GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,6CAAvB;;CACA,UAAK7B,QAAL,GAAgB,kBAAhB;CACA,UAAKG,YAAL,GAAoB,mBAApB;CACA,UAAKK,SAAL,GAAiB,aAAjB;CALD;CAMC;;;GATyCkV;;KCAtB0J;;;CAEpB,8BAAYxf,OAAZ,EACA;CAAA;;CAAA;CACC,oHAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,kDAAvB;;CACA,UAAK7B,QAAL,GAAgB,kBAAhB;CACA,UAAKG,YAAL,GAAoB,0BAApB;CACA,UAAKK,SAAL,GAAiB,oBAAjB;CACA,UAAKP,WAAL,GAAmB,QAAnB;CAND;CAOC;;;GAV8CyV;;KCA3B2J;;;CAEpB,0BAAYzf,OAAZ,EACA;CAAA;;CAAA;CACC,gHAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,8CAAvB;;CACA,UAAK7B,QAAL,GAAgB,kBAAhB;CACA,UAAKG,YAAL,GAAoB,oBAApB;CACA,UAAKK,SAAL,GAAiB,oBAAjB;CALD;CAMC;;;GAT0CkV;;KCAvB4J;;;CAEpB,qBAAY1f,OAAZ,EACA;CAAA;;CAAA;CACC,2GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,yCAAvB;;CACA,UAAK7B,QAAL,GAAgB,MAAhB;CACA,UAAKC,WAAL,GAAmB,SAAnB;CACA,UAAKE,YAAL,GAAoB,cAApB;CACA,UAAKK,SAAL,GAAiB,cAAjB;CAND;CAOC;;;GAVqCkV;;KCAlB6J;;;CAEpB,2BAAY3f,OAAZ,EACA;CAAA;;CAAA;CACC,iHAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,+CAAvB;;CACA,UAAK7B,QAAL,GAAgB,MAAhB;CACA,UAAKC,WAAL,GAAmB,QAAnB;CACA,UAAKE,YAAL,GAAoB,eAApB;CACA,UAAKK,SAAL,GAAiB,eAAjB;CAND;CAOC;;;GAV2CkV;;KCCxB8J;;;CAOpB,uBAAY5f,OAAZ,EACA;CAAA;;CAAA;CACC,6GAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,2CAAvB;;CACA,UAAK7B,QAAL,GAAgB,kBAAhB,CAHD;;CAKC,UAAKG,YAAL,GAAoB,CACnBqf,WAAW,CAACC,kBADO,EAEnBD,WAAW,CAACE,eAFO,EAGnBF,WAAW,CAACG,eAHO,EAInBH,WAAW,CAACI,SAJO,CAApB;CAMA,UAAKpf,SAAL,GAAiB,gBAAjB,CAXD;;CAAA;CAYC;;;;gCAGD;CAAA;;CACC,UAAI,KAAKC,QAAL,OAAoB,IAAxB,EACA;CAAA;;CACC,4DACE+e,WAAW,CAACC,kBADd,EACmC,IADnC,qCAEED,WAAW,CAACE,eAFd,EAEgC,IAFhC,qCAGEF,WAAW,CAACG,eAHd,EAGgC,IAHhC,qCAIEH,WAAW,CAACI,SAJd,EAI0B,IAJ1B;CAMA;;CAED,UAAM5hB,KAAK,GAAG,KAAKyC,QAAL,EAAd;CACA,UAAMof,aAAa,GAAG7hB,KAAK,CAACqF,WAAN,GAAoB4L,OAApB,CAA4B,EAA5B,CAAtB;CACA,UAAM6Q,UAAU,GAAG,IAAI/hB,UAAJ,CAAeC,KAAf,EAAsBiR,OAAtB,CAA8B,EAA9B,CAAnB;CACA,UAAM8Q,UAAU,GAAG/hB,KAAK,CAACgiB,UAAN,EAAnB;CAEA,4DACER,WAAW,CAACC,kBADd,EACmCI,aAAa,CAAClf,cAAd,EADnC,sCAEE6e,WAAW,CAACE,eAFd,EAEgCI,UAAU,CAACnf,cAAX,EAFhC,sCAGE6e,WAAW,CAACG,eAHd,EAGgCI,UAAU,CAACpf,cAAX,EAHhC,sCAIE6e,WAAW,CAACI,SAJd,EAI0B5hB,KAAK,CAAC2C,cAAN,EAJ1B;CAMA;;;GA7CuC+U;;6BAApB8J,mCAEgB;6BAFhBA,gCAGa;6BAHbA,gCAIa;6BAJbA,0BAKO;;KCNPS;;;CAEpB,iCAAYrgB,OAAZ,EACA;CAAA;;CAAA;CACC,uHAAMA,OAAN;;CACA,UAAKiC,iBAAL,CAAuB,qDAAvB;;CACA,UAAK7B,QAAL,GAAgB,kBAAhB;CACA,UAAKG,YAAL,GAAoB,4BAApB;CACA,UAAKK,SAAL,GAAiB,sBAAjB;CALD;CAMC;;;GATiDkV;;KCwBtCwK,UAAb;CAAA;;CAIC,sBAAYtgB,OAAZ,EACA;CAAA;;CAAA;CACC,4GAAMA,OAAN;CACA,UAAK0H,KAAL,GAAc,WAAW1H,OAAX,IAAsBA,OAAO,CAAC0H,KAA/B,GAAwC1H,OAAO,CAAC0H,KAAhD,GAAwD,EAArE;CACA,UAAK6Y,OAAL,GAAgB,OAAOvgB,OAAO,CAACugB,OAAf,KAA2B,QAA5B,GAAwCvgB,OAAO,CAACugB,OAAhD,GAA0D,EAAzE;CACA,UAAKC,KAAL,GAAc,oBAAOxgB,OAAO,CAACwgB,KAAf,MAAyB,QAA1B,GAAsCxgB,OAAO,CAACwgB,KAA9C,GAAsD,IAAnE;CACA,QAAMC,gBAAgB,GAAG;CACxBhF,MAAAA,KAAK,EAAEzb,OAAO,CAACyb,KADS;CAExBkB,MAAAA,SAAS,EAAE3c,OAAO,CAAC2c,SAFK;CAGxBC,MAAAA,QAAQ,EAAE5c,OAAO,CAAC4c,QAHM;CAIxB3X,MAAAA,WAAW,EAAE,MAAKA;CAJM,KAAzB;CAOA,UAAKyb,aAAL,GAAsB,OAAO1gB,OAAO,CAACkD,QAAf,KAA4B,UAA7B,GAA2ClD,OAAO,CAACkD,QAAnD,GAA+D,YAAM,EAA1F;CACA,UAAKyd,YAAL,GAAqB,OAAO3gB,OAAO,CAACiW,OAAf,KAA2B,UAA5B,GAA0CjW,OAAO,CAACiW,OAAlD,GAA6D,YAAY,EAA7F,CAbD;;CAgBC,YAAQjW,OAAO,CAAC4gB,OAAhB;CAEC,WAAK,OAAL;CACC,cAAKC,SAAL,GAAiB,IAAI/K,KAAJ,CAAU2K,gBAAV,CAAjB;CACA;;CAED,WAAK,aAAL;CACC,cAAKI,SAAL,GAAiB,IAAIrK,UAAJ,CAAeiK,gBAAf,CAAjB;CACA;;CAED,WAAK,IAAL;CACC,cAAKI,SAAL,GAAiB,IAAIpD,EAAJ,CAAOgD,gBAAP,CAAjB;CACA;;CAED,WAAK,UAAL;CACC,cAAKI,SAAL,GAAiB,IAAIjI,OAAJ,CAAY6H,gBAAZ,CAAjB;CACA;;CAED,WAAK,gBAAL;CACC,cAAKI,SAAL,GAAiB,IAAI9B,YAAJ,CAAiB0B,gBAAjB,CAAjB;CACA;;CAED,WAAK,gBAAL;CACC,cAAKI,SAAL,GAAiB,IAAI7B,YAAJ,CAAiByB,gBAAjB,CAAjB;CACA;;CAED,WAAK,iBAAL;CACC,cAAKI,SAAL,GAAiB,IAAI3B,aAAJ,CAAkBuB,gBAAlB,CAAjB;CACA;;CAED,WAAK,cAAL;CACC,cAAKI,SAAL,GAAiB,IAAIhC,WAAJ,CAAgB4B,gBAAhB,CAAjB;CACA;;CAED,WAAK,oBAAL;CACC,cAAKI,SAAL,GAAiB,IAAI/B,gBAAJ,CAAqB2B,gBAArB,CAAjB;CACA;;CAED,WAAK,kBAAL;CACC,cAAKI,SAAL,GAAiB,IAAIpB,cAAJ,CAAmBgB,gBAAnB,CAAjB;CACA;;CAED,WAAK,cAAL;CACC,cAAKI,SAAL,GAAiB,IAAI1B,WAAJ,CAAgBsB,gBAAhB,CAAjB;CACA;;CAED,WAAK,oBAAL;CACC,cAAKI,SAAL,GAAiB,IAAIzB,gBAAJ,CAAqBqB,gBAArB,CAAjB;CACA;;CAED,WAAK,yBAAL;CACC,cAAKI,SAAL,GAAiB,IAAIxB,oBAAJ,CAAyBoB,gBAAzB,CAAjB;CACA;;CAED,WAAK,+BAAL;CACC,cAAKI,SAAL,GAAiB,IAAIvB,yBAAJ,CAA8BmB,gBAA9B,CAAjB;CACA;;CAED,WAAK,iBAAL;CACC,cAAKI,SAAL,GAAiB,IAAItB,aAAJ,CAAkBkB,gBAAlB,CAAjB;CACA;;CAED,WAAK,uBAAL;CACC,cAAKI,SAAL,GAAiB,IAAIrB,kBAAJ,CAAuBiB,gBAAvB,CAAjB;CACA;;CAED,WAAK,0BAAL;CACC,cAAKI,SAAL,GAAiB,IAAIR,qBAAJ,CAA0BI,gBAA1B,CAAjB;CACA;;CAED,WAAK,YAAL;CACC,cAAKI,SAAL,GAAiB,IAAInB,SAAJ,CAAce,gBAAd,CAAjB;CACA;;CAED,WAAK,mBAAL;CACC,cAAKI,SAAL,GAAiB,IAAIlB,eAAJ,CAAoBc,gBAApB,CAAjB;CACA;;CAED,WAAK,cAAL;CACC,cAAKI,SAAL,GAAiB,IAAIjB,WAAJ,CAAgBa,gBAAhB,CAAjB;CACA;;CAED;CACC;CAnFF;;CAsFA,UAAKrgB,QAAL,GAAgB,MAAKygB,SAAL,CAAe1f,WAAf,GAA6B,MAAK0f,SAAL,CAAe1f,WAAf,GAA6BnG,MAA7B,GAAsC,CAAnE,CAAhB;;CACA,UAAK6lB,SAAL,CAAeC,YAAf,GAA8BlZ,OAA9B,CACC,UAAAC,IAAI;CAAA,aAAI,MAAKH,KAAL,CAAWK,IAAX,CAAgB;CAAC1K,QAAAA,IAAI,EAAEwK,IAAP;CAAazJ,QAAAA,KAAK,EAAEyJ;CAApB,OAAhB,CAAJ;CAAA,KADL,EAvGD;;;CA4GC9I,IAAAA,aAAG,CAACgiB,MAAJ,CAAW,MAAKC,KAAhB;;CACA,UAAK5O,MAAL,CAAY6O,SAAZ,CAAsBC,GAAtB,CAA0B,wBAA1B;;CACAniB,IAAAA,aAAG,CAACoJ,MAAJ,CAAW,MAAK0Y,SAAL,CAAejf,SAAf,EAAX,EAAuC,MAAKwQ,MAA5C;;CAEA,UAAKyO,SAAL,CAAexX,SAAf,CAAyB,UAAzB,EAAqC,MAAKnG,QAAL,CAAcZ,IAAd,2CAArC;;CACA,UAAKue,SAAL,CAAexX,SAAf,CAAyB,SAAzB,EAAoC,MAAK4M,OAAL,CAAa3T,IAAb,2CAApC;;CAjHD;CAkHC;;CAvHF;CAAA;CAAA,0CA0HC;CACC,aAAO,KAAKue,SAAL,CAAe/f,eAAf,EAAP;CACA;CA5HF;CAAA;CAAA,4CA+HC;CACC,aAAO,KAAK+f,SAAL,CAAe1f,WAAf,EAAP;CACA;CAjIF;CAAA;CAAA,uCAoIC;CACC,aAAO,KAAK0f,SAAL,CAAeM,cAAf,EAAP;CACA;CAtIF;CAAA;CAAA,+BAyIC;CACC,WAAKT,aAAL,CACC;CACC9f,QAAAA,SAAS,EAAE,KAAKigB,SAAL,CAAeC,YAAf,EADZ;CAEC9hB,QAAAA,KAAK,EAAE,KAAK6hB,SAAL,CAAeO,QAAf;CAFR,OADD,EAKC,KAAK1Z,KALN,EAMC,KAAK6Y,OANN,EAOC,KAAKngB,QAPN;CAUA,WAAKkB,IAAL,CAAU,UAAV;CACA;CArJF;CAAA;CAAA,8BAwJC;CACC,WAAKqf,YAAL,CAAkB,KAAKjZ,KAAvB,EAA8B,KAAK6Y,OAAnC,EAA4C,KAAKngB,QAAjD;CACA;CA1JF;CAAA;CAAA,+BA6JC;CACC,aAAO,KAAKygB,SAAL,CAAehgB,QAAf,MAA6B,KAAKggB,SAAL,CAAeQ,YAAf,EAApC;CACA;CA/JF;CAAA;CAAA,6BAiKUjjB,KAjKV,EAkKC;CAAA;;CACC,UAAIkjB,cAAc,GAAG,IAArB,CADD;;CAGC,WAAKC,mBAAL,GAA2B3Z,OAA3B,CAAmC,UAAA4Z,IAAI,EAAI;CAC1C,YAAIA,IAAI,IAAIpjB,KAAR,IAAiB,CAAC,MAAI,CAACyiB,SAAL,CAAeY,WAAf,CAA2BrjB,KAAK,CAACojB,IAAD,CAAhC,CAAtB,EACA;CACC,cAAI,CAAC/iB,cAAI,CAACC,QAAL,CAAc4iB,cAAd,CAAL,EACA;CACCA,YAAAA,cAAc,GAAG,EAAjB;CACA;;CACDA,UAAAA,cAAc,CAACE,IAAD,CAAd,GAAuBpjB,KAAK,CAACojB,IAAD,CAA5B;CACA;CACD,OATD;CAWA,UAAIE,YAAY,GAAG,IAAnB;CACA,WAAKC,qBAAL,GAA6B/Z,OAA7B,CAAqC,UAAA4Z,IAAI,EAAI;CAC5C,YAAIA,IAAI,IAAIpjB,KAAR,IAAiB,CAAC,MAAI,CAACyiB,SAAL,CAAeY,WAAf,CAA2BrjB,KAAK,CAACojB,IAAD,CAAhC,CAAtB,EACA;CACC,cAAI,CAAC/iB,cAAI,CAACC,QAAL,CAAcgjB,YAAd,CAAL,EACA;CACCA,YAAAA,YAAY,GAAG,EAAf;CACA;;CACDA,UAAAA,YAAY,CAACF,IAAD,CAAZ,GAAqBpjB,KAAK,CAACojB,IAAD,CAA1B;CACA;CACD,OATD;;CAWA,UAAIF,cAAc,KAAK,IAAvB,EACA;CACC,aAAKT,SAAL,CAAee,iBAAf,CAAiCN,cAAjC;CACA,OAHD,MAKA;CACC,aAAKT,SAAL,CAAegB,eAAf,CAA+BH,YAA/B;CACA;CACD;CApMF;CAAA;CAAA,kCAuMC;CACC;CAEA,UAAMtjB,KAAK,GAAG,KAAKqN,IAAL,CAAUkR,SAAV,CAAoB9b,QAApB,CAA6B,IAA7B,CAAd;CACA,WAAKxC,QAAL,CAAcD,KAAK,CAACY,KAApB;CACA;CA5MF;CAAA;CAAA,EAAgC8iB,oCAAhC;;;;;;;;"}