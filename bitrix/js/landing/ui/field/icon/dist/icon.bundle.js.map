{"version":3,"file":"icon.bundle.js","sources":["../src/icon.js"],"sourcesContent":["import {Runtime} from 'main.core'\nimport {IconPanel} from 'landing.ui.panel.iconpanel';\nimport {Image} from 'landing.ui.field.image'\n\n/**\n * @memberOf BX.Landing.UI.Field\n */\nexport class Icon extends Image\n{\n\tconstructor(data)\n\t{\n\t\tsuper(data);\n\t\tthis.uploadButton.layout.innerText = BX.Landing.Loc.getMessage(\"LANDING_ICONS_FIELD_BUTTON_REPLACE\");\n\t\tthis.editButton.layout.hidden = true;\n\t\tthis.clearButton.layout.hidden = true;\n\n\t\tthis.dropzone.removeEventListener(\"dragover\", this.onDragOver);\n\t\tthis.dropzone.removeEventListener(\"dragleave\", this.onDragLeave);\n\t\tthis.dropzone.removeEventListener(\"drop\", this.onDrop);\n\t\tthis.preview.removeEventListener(\"dragenter\", this.onImageDragEnter);\n\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then(function (libraries)\n\t\t\t{\n\t\t\t\tif (libraries.length === 0)\n\t\t\t\t{\n\t\t\t\t\tthis.uploadButton.disable();\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t}\n\n\tonUploadClick(event)\n\t{\n\t\tevent.preventDefault();\n\n\t\tIconPanel\n\t\t\t.getInstance()\n\t\t\t.show()\n\t\t\t.then(function (iconClassName)\n\t\t\t{\n\t\t\t\tthis.setValue({type: \"icon\", classList: iconClassName.split(\" \")});\n\t\t\t}.bind(this));\n\t}\n\n\tisChanged()\n\t{\n\t\treturn this.getValue().classList.some(function (className)\n\t\t{\n\t\t\treturn this.content.classList.indexOf(className) === -1;\n\t\t}, this);\n\t}\n\n\tgetValue()\n\t{\n\t\tvar classList = this.classList;\n\n\t\tif (this.selector)\n\t\t{\n\t\t\tvar selectorClassname = this.selector.split(\"@\")[0].replace(\".\", \"\");\n\t\t\tclassList = Runtime.clone(this.classList).concat([selectorClassname]);\n\t\t\tclassList = BX.Landing.Utils.arrayUnique(classList);\n\t\t}\n\n\t\treturn {\n\t\t\ttype: \"icon\",\n\t\t\tsrc: \"\",\n\t\t\tid: -1,\n\t\t\talt: \"\",\n\t\t\tclassList: classList,\n\t\t\turl: Object.assign({}, this.url.getValue(), {enabled: this.urlCheckbox.checked}),\n\t\t};\n\t}\n\n\treset()\n\t{\n\t\tthis.setValue({\n\t\t\ttype: \"icon\",\n\t\t\tsrc: \"\",\n\t\t\tid: -1,\n\t\t\talt: \"\",\n\t\t\tclassList: [],\n\t\t\turl: '',\n\t\t});\n\t}\n}"],"names":["Icon","data","uploadButton","layout","innerText","BX","Landing","Loc","getMessage","editButton","hidden","clearButton","dropzone","removeEventListener","onDragOver","onDragLeave","onDrop","preview","onImageDragEnter","IconPanel","getLibraries","then","libraries","length","disable","bind","event","preventDefault","getInstance","show","iconClassName","setValue","type","classList","split","getValue","some","className","content","indexOf","selector","selectorClassname","replace","Runtime","clone","concat","Utils","arrayUnique","src","id","alt","url","Object","assign","enabled","urlCheckbox","checked","Image"],"mappings":"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"}