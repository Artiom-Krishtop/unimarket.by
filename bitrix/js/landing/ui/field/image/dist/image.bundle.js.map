{"version":3,"file":"image.bundle.js","sources":["../src/image.js"],"sourcesContent":["import {Dom, Type} from 'main.core';\nimport {Loc} from 'landing.loc';\nimport {Main} from 'landing.main'\nimport {TextField} from 'landing.ui.field.textfield';\nimport {IconPanel} from 'landing.ui.panel.iconpanel';\nimport {ImageUploader} from 'landing.imageuploader';\nimport {BaseButton} from 'landing.ui.button.basebutton';\nimport {ImageEditor} from 'landing.imageeditor';\n\nimport './css/style.css';\n\nexport class Image extends TextField\n{\n\tconstructor(data)\n\t{\n\t\tsuper(data);\n\n\t\tthis.dimensions = typeof data.dimensions === \"object\" ? data.dimensions : null;\n\t\tthis.create2xByDefault = data.create2xByDefault !== false;\n\t\tthis.uploadParams = typeof data.uploadParams === \"object\" ? data.uploadParams : {};\n\t\tthis.onValueChangeHandler = data.onValueChange ? data.onValueChange : (() => {});\n\t\tthis.type = this.content.type || \"image\";\n\t\tthis.allowClear = data.allowClear;\n\t\tthis.input.innerText = this.content.src;\n\t\tthis.input.hidden = true;\n\t\tthis.input2x = this.createInput();\n\t\tthis.input2x.innerText = this.content.src2x;\n\t\tthis.input2x.hidden = true;\n\n\t\tthis.layout.classList.add(\"landing-ui-field-image\");\n\t\tif (data.compactMode === true)\n\t\t{\n\t\t\tthis.layout.classList.add(\"landing-ui-field-image--compact\");\n\t\t}\n\n\t\tthis.disableAltField = typeof data.disableAltField === \"boolean\" ? data.disableAltField : false;\n\n\t\tthis.fileInput = Image.createFileInput(this.selector);\n\t\tthis.fileInput.addEventListener(\"change\", this.onFileInputChange.bind(this));\n\n\t\tthis.linkInput = Image.createLinkInput();\n\t\tthis.linkInput.onInputHandler = this.onLinkInput.bind(this);\n\n\t\tthis.dropzone = Image.createDropzone(this.selector);\n\t\tthis.dropzone.hidden = true;\n\t\tthis.dropzone.insertBefore(this.fileInput, this.dropzone.firstElementChild);\n\n\t\tthis.onDragOver = this.onDragOver.bind(this);\n\t\tthis.onDragLeave = this.onDragLeave.bind(this);\n\t\tthis.onDrop = this.onDrop.bind(this);\n\n\t\tthis.dropzone.addEventListener(\"dragover\", this.onDragOver);\n\t\tthis.dropzone.addEventListener(\"dragleave\", this.onDragLeave);\n\t\tthis.dropzone.addEventListener(\"drop\", this.onDrop);\n\n\t\tthis.clearButton = Image.createClearButton();\n\t\tthis.clearButton.on(\"click\", this.onClearClick.bind(this));\n\n\t\tthis.preview = Image.createImagePreview();\n\t\tthis.preview.appendChild(this.clearButton.layout);\n\t\tthis.preview.style.backgroundImage = \"url(\" + this.input.innerText.trim() + \")\";\n\n\t\tthis.onImageDragEnter = this.onImageDragEnter.bind(this);\n\t\tthis.preview.addEventListener(\"dragenter\", this.onImageDragEnter);\n\n\t\tthis.loader = new BX.Loader({target: this.preview});\n\n\t\tthis.icon = Image.createIcon();\n\n\t\tthis.image = Image.createImageLayout();\n\t\tthis.image.appendChild(this.preview);\n\t\tthis.image.appendChild(this.icon);\n\t\tthis.image.dataset.fileid = this.content.id;\n\t\tthis.image.dataset.fileid2x = this.content.id2x;\n\n\t\tthis.hiddenImage = Dom.create(\"img\", {\n\t\t\tprops: {className: \"landing-ui-field-image-hidden\"},\n\t\t});\n\n\t\tif (Type.isPlainObject(this.content) && \"src\" in this.content)\n\t\t{\n\t\t\tthis.hiddenImage.src = this.content.src;\n\t\t}\n\n\t\tthis.altField = Image.createAltField();\n\t\tthis.altField.setValue(this.content.alt);\n\n\t\tthis.left = Image.createLeftLayout();\n\t\tthis.left.appendChild(this.dropzone);\n\t\tthis.left.appendChild(this.image);\n\t\tthis.left.appendChild(this.hiddenImage);\n\n\t\tif (this.description)\n\t\t{\n\t\t\tthis.left.appendChild(this.description);\n\t\t}\n\n\t\tthis.left.appendChild(this.altField.layout);\n\t\tthis.left.appendChild(this.linkInput.layout);\n\n\t\tthis.uploadButton = Image.createUploadButton();\n\t\tthis.uploadButton.on(\"click\", this.onUploadClick.bind(this));\n\n\t\tthis.editButton = Image.createEditButton();\n\t\tthis.editButton.on(\"click\", this.onEditClick.bind(this));\n\n\t\tthis.right = Image.createRightLayout();\n\t\tthis.right.appendChild(this.uploadButton.layout);\n\t\tthis.right.appendChild(this.editButton.layout);\n\n\t\tthis.form = Image.createForm();\n\t\tthis.form.appendChild(this.left);\n\t\tthis.form.appendChild(this.right);\n\n\t\tthis.layout.appendChild(this.form);\n\n\t\tthis.enableTextOnly();\n\n\t\tif (!this.input.innerText.trim() || this.input.innerText.trim() === window.location.toString())\n\t\t{\n\t\t\tthis.showDropzone();\n\t\t}\n\n\t\tif (this.disableAltField)\n\t\t{\n\t\t\tthis.altField.layout.hidden = true;\n\t\t\tthis.altField.layout.style.display = \"none\";\n\t\t\tthis.altField.layout.classList.add(\"landing-ui-hide\");\n\t\t}\n\n\t\tif (this.content.type === \"icon\")\n\t\t{\n\t\t\tthis.type = \"icon\";\n\t\t\tthis.classList = this.content.classList;\n\t\t\tvar sourceClassList = this.content.classList;\n\t\t\tvar newClassList = [];\n\n\t\t\tIconPanel\n\t\t\t\t.getLibraries()\n\t\t\t\t.then(function (libraries)\n\t\t\t\t{\n\t\t\t\t\tlibraries.forEach(function (library)\n\t\t\t\t\t{\n\t\t\t\t\t\tlibrary.categories.forEach(function (category)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcategory.items.forEach(function (item)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet className = '';\n\t\t\t\t\t\t\t\tif (BX.Type.isObject(item))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName = item.options.join(' ');\n\t\t\t\t\t\t\t\t\tif (item.previousVersion)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName += ' ' + item.previousVersion;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName = item;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar classList = className.split(\" \");\n\t\t\t\t\t\t\t\tclassList.forEach(function (className)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (sourceClassList.indexOf(className)\n\t\t\t\t\t\t\t\t\t\t!== -1\n\t\t\t\t\t\t\t\t\t\t&& newClassList.indexOf(className)\n\t\t\t\t\t\t\t\t\t\t=== -1)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnewClassList.push(className);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.icon.innerHTML = \"<span class=\\\"\" + newClassList.join(\" \") + \"\\\"></span>\";\n\t\t\t\t}.bind(this));\n\n\t\t\tthis.showPreview();\n\t\t\tthis.altField.layout.hidden = true;\n\t\t}\n\n\t\tthis.makeAsLinkWrapper = Dom.create(\"div\", {\n\t\t\tprops: {className: \"landing-ui-field-image-make-as-link-wrapper\"},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {className: \"landing-ui-field-image-make-as-link-button\"},\n\t\t\t\t\tchildren: [],\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tthis.url = new BX.Landing.UI.Field.Link({\n\t\t\tcontent: this.content.url || {\n\t\t\t\ttext: '',\n\t\t\t\thref: '',\n\t\t\t},\n\t\t\toptions: {\n\t\t\t\tsiteId: Main.getInstance().options.site_id,\n\t\t\t\tlandingId: Main.getInstance().id,\n\t\t\t},\n\t\t\tcontentRoot: this.contentRoot,\n\t\t});\n\n\t\tthis.urlCheckbox = Dom.create(\"input\", {\n\t\t\tprops: {type: \"checkbox\"},\n\t\t\tattrs: {style: \"margin-left: 4px;\"},\n\t\t});\n\n\t\tfunction onCheckboxChange(checkbox, layout)\n\t\t{\n\t\t\tif (checkbox.checked)\n\t\t\t{\n\t\t\t\tlayout.querySelector(\".landing-ui-field-link-right\").classList.remove(\"landing-ui-disabled\");\n\t\t\t\tlayout.querySelector(\".landing-ui-field-link-url-grid\").classList.remove(\"landing-ui-disabled\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlayout.querySelector(\".landing-ui-field-link-right\").classList.add(\"landing-ui-disabled\");\n\t\t\t\tlayout.querySelector(\".landing-ui-field-link-url-grid\").classList.add(\"landing-ui-disabled\");\n\t\t\t}\n\t\t}\n\n\t\tthis.urlCheckbox.addEventListener('change', function ()\n\t\t{\n\t\t\tonCheckboxChange(this.urlCheckbox, this.url.layout);\n\t\t}.bind(this));\n\n\t\tthis.urlCheckbox.checked = this.content.url && this.content.url.enabled;\n\n\t\tonCheckboxChange(this.urlCheckbox, this.url.layout);\n\n\t\tthis.url.hrefInput.header.appendChild(this.urlCheckbox);\n\t\tthis.url.left.hidden = true;\n\n\t\tthis.makeAsLinkWrapper.appendChild(this.url.layout);\n\n\t\tif (!data.disableLink)\n\t\t{\n\t\t\tthis.layout.appendChild(this.makeAsLinkWrapper);\n\t\t}\n\n\t\tthis.content = this.getValue();\n\t\tBX.DOM.write(function ()\n\t\t{\n\t\t\tthis.adjustPreviewBackgroundSize();\n\t\t}.bind(this));\n\n\t\tif (this.getValue().type === \"background\" || this.allowClear)\n\t\t{\n\t\t\tthis.clearButton.layout.classList.add(\"landing-ui-show\");\n\t\t}\n\n\t\tthis.uploader = new ImageUploader({\n\t\t\tuploadParams: this.uploadParams,\n\t\t\tadditionalParams: {context: 'imageeditor'},\n\t\t\tdimensions: this.dimensions,\n\t\t\tsizes: ['1x', '2x'],\n\t\t});\n\n\t\tthis.adjustEditButtonState();\n\t}\n\n\t/**\n\t * Creates file input\n\t * @return {Element}\n\t */\n\tstatic createFileInput(id)\n\t{\n\t\treturn Dom.create(\"input\", {\n\t\t\tprops: {className: \"landing-ui-field-image-dropzone-input\"},\n\t\t\tattrs: {accept: \"image/*\", type: \"file\", id: \"file_\" + id, name: \"picture\"},\n\t\t});\n\t}\n\n\t/**\n\t * Creates link input field\n\t * @return {TextField}\n\t */\n\tstatic createLinkInput(): TextField\n\t{\n\t\tvar field = new TextField({\n\t\t\tid: \"path_to_image\",\n\t\t\tplaceholder: Loc.getMessage(\"LANDING_IMAGE_UPLOAD_MENU_LINK_LABEL\"),\n\t\t});\n\t\tfield.enableTextOnly();\n\t\tfield.layout.hidden = true;\n\t\treturn field;\n\t}\n\n\t/**\n\t * Creates dropzone\n\t * @param {string} id\n\t * @return {Element}\n\t */\n\tstatic createDropzone(id)\n\t{\n\t\treturn Dom.create(\"label\", {\n\t\t\tprops: {className: \"landing-ui-field-image-dropzone\"},\n\t\t\tchildren: [\n\t\t\t\tDom.create(\"div\", {\n\t\t\t\t\tprops: {className: \"landing-ui-field-image-dropzone-text\"},\n\t\t\t\t\thtml: (\n\t\t\t\t\t\t\"<div class=\\\"landing-ui-field-image-dropzone-title\\\">\" + Loc.getMessage(\n\t\t\t\t\t\t\t\"LANDING_IMAGE_DROPZONE_TITLE\") + \"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"landing-ui-field-image-dropzone-subtitle\\\">\" + Loc.getMessage(\n\t\t\t\t\t\t\t\"LANDING_IMAGE_DROPZONE_SUBTITLE\") + \"</div>\"\n\t\t\t\t\t),\n\t\t\t\t}),\n\t\t\t],\n\t\t\tattrs: {\"for\": \"file_\" + id},\n\t\t});\n\t}\n\n\t/**\n\t * Creates clear button\n\t * @return {BaseButton}\n\t */\n\tstatic createClearButton()\n\t{\n\t\treturn new BaseButton(\"clear\", {\n\t\t\tclassName: \"landing-ui-field-image-action-button-clear\",\n\t\t});\n\t}\n\n\t/**\n\t * Creates image preview\n\t * @return {Element}\n\t */\n\tstatic createImagePreview()\n\t{\n\t\treturn Dom.create(\"div\", {\n\t\t\tprops: {className: \"landing-ui-field-image-preview-inner\"},\n\t\t});\n\t}\n\n\t/**\n\t * Creates icon layout\n\t * @return {Element}\n\t */\n\tstatic createIcon()\n\t{\n\t\treturn Dom.create(\"span\", {\n\t\t\tprops: {className: \"landing-ui-field-image-preview-icon\"},\n\t\t});\n\t}\n\n\t/**\n\t * Creates image layout\n\t * @return {Element}\n\t */\n\tstatic createImageLayout()\n\t{\n\t\treturn Dom.create(\"div\", {\n\t\t\tprops: {className: \"landing-ui-field-image-preview\"},\n\t\t});\n\t}\n\n\t/**\n\t * Creates alt field\n\t * @return {TextField}\n\t */\n\tstatic createAltField()\n\t{\n\t\tvar field = new TextField({\n\t\t\tplaceholder: Loc.getMessage(\"LANDING_FIELD_IMAGE_ALT_PLACEHOLDER\"),\n\t\t\tclassName: \"landing-ui-field-image-alt\",\n\t\t\ttextOnly: true,\n\t\t});\n\t\treturn field;\n\t}\n\n\t/**\n\t * Creates left layout\n\t * @return {Element}\n\t */\n\tstatic createLeftLayout()\n\t{\n\t\treturn Dom.create(\"div\", {\n\t\t\tprops: {className: \"landing-ui-field-image-left\"},\n\t\t});\n\t}\n\n\t/**\n\t * Creates upload button\n\t * @return {BaseButton}\n\t */\n\tstatic createUploadButton()\n\t{\n\t\treturn new BaseButton(\"upload\", {\n\t\t\ttext: Loc.getMessage(\"LANDING_FIELD_IMAGE_UPLOAD_BUTTON\"),\n\t\t\tclassName: \"landing-ui-field-image-action-button\",\n\t\t});\n\t}\n\n\t/**\n\t * Creates edit button\n\t * @return {BaseButton}\n\t */\n\tstatic createEditButton()\n\t{\n\t\tvar field = new BaseButton(\"edit\", {\n\t\t\ttext: Loc.getMessage(\"LANDING_FIELD_IMAGE_EDIT_BUTTON\"),\n\t\t\tclassName: \"landing-ui-field-image-action-button\",\n\t\t});\n\n\t\treturn field;\n\t}\n\n\t/**\n\t * Creates right layout\n\t * @return {Element}\n\t */\n\tstatic createRightLayout()\n\t{\n\t\treturn Dom.create(\"div\", {\n\t\t\tprops: {className: \"landing-ui-field-image-right\"},\n\t\t});\n\t}\n\n\t/**\n\t * Creates form\n\t * @return {Element}\n\t */\n\tstatic createForm()\n\t{\n\t\treturn Dom.create(\"form\", {\n\t\t\tprops: {className: \"landing-ui-field-image-container\"},\n\t\t\tattrs: {method: \"post\", enctype: \"multipart/form-data\"},\n\t\t\tevents: {\n\t\t\t\tsubmit: function (event)\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tonInputInput()\n\t{\n\t\tthis.preview.src = this.input.innerText.trim();\n\t}\n\n\tonImageDragEnter(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (!this.imageHidden)\n\t\t{\n\t\t\tthis.showDropzone();\n\t\t\tthis.imageHidden = true;\n\t\t}\n\t}\n\n\tonDragOver(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tthis.dropzone.classList.add(\"landing-ui-active\");\n\t}\n\n\tonDragLeave(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tthis.dropzone.classList.remove(\"landing-ui-active\");\n\n\t\tif (this.imageHidden)\n\t\t{\n\t\t\tthis.imageHidden = false;\n\t\t\tthis.showPreview();\n\t\t}\n\t}\n\n\tonDrop(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tthis.dropzone.classList.remove(\"landing-ui-active\");\n\t\tthis.onFileChange(event.dataTransfer.files[0]);\n\t\tthis.imageHidden = false;\n\t}\n\n\tonFileChange(file)\n\t{\n\t\tthis.showLoader();\n\n\t\tthis.upload(file)\n\t\t\t.then(this.setValue.bind(this))\n\t\t\t.then(this.hideLoader.bind(this))\n\t\t\t.catch(function (err)\n\t\t\t{\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.hideLoader();\n\t\t\t}.bind(this));\n\t}\n\n\tonFileInputChange(event)\n\t{\n\t\tthis.onFileChange(event.currentTarget.files[0]);\n\t}\n\n\tonUploadClick(event)\n\t{\n\t\tthis.bindElement = event.currentTarget;\n\n\t\tevent.preventDefault();\n\n\t\tif (!this.uploadMenu)\n\t\t{\n\t\t\tthis.uploadMenu = BX.Main.MenuManager.create({\n\t\t\t\tid: \"upload_\" + this.selector + (+new Date()),\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t},\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage(\"LANDING_IMAGE_UPLOAD_MENU_UNSPLASH\"),\n\t\t\t\t\t\tonclick: this.onUnsplashShow.bind(this),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage(\"LANDING_IMAGE_UPLOAD_MENU_GOOGLE\"),\n\t\t\t\t\t\tonclick: this.onGoogleShow.bind(this),\n\t\t\t\t\t},\n\t\t\t\t\t// {\n\t\t\t\t\t// \ttext: Loc.getMessage(\"LANDING_IMAGE_UPLOAD_MENU_PARTNER\"),\n\t\t\t\t\t// \tclassName: \"landing-ui-disabled\"\n\t\t\t\t\t// },\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage(\"LANDING_IMAGE_UPLOAD_MENU_UPLOAD\"),\n\t\t\t\t\t\tonclick: this.onUploadShow.bind(this),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage(\"LANDING_IMAGE_UPLOAD_MENU_LINK\"),\n\t\t\t\t\t\tonclick: this.onLinkShow.bind(this),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: function ()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.bindElement.classList.remove(\"landing-ui-active\");\n\n\t\t\t\t\t\tif (this.uploadMenu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.uploadMenu.destroy();\n\t\t\t\t\t\t\tthis.uploadMenu = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this),\n\t\t\t\t},\n\t\t\t\ttargetContainer: this.contentRoot,\n\t\t\t});\n\t\t\tif (!this.contentRoot)\n\t\t\t{\n\t\t\t\tthis.bindElement.parentNode.appendChild(this.uploadMenu.popupWindow.popupContainer);\n\t\t\t}\n\t\t}\n\n\t\tthis.bindElement.classList.add(\"landing-ui-active\");\n\t\tthis.uploadMenu.toggle();\n\n\t\tif (!this.contentRoot)\n\t\t{\n\t\t\tvar rect = BX.pos(this.bindElement, this.bindElement.parentNode);\n\t\t\tthis.uploadMenu.popupWindow.popupContainer.style.top = rect.bottom + \"px\";\n\t\t\tthis.uploadMenu.popupWindow.popupContainer.style.left = \"auto\";\n\t\t\tthis.uploadMenu.popupWindow.popupContainer.style.right = \"5px\";\n\t\t}\n\t}\n\n\tonUnsplashShow()\n\t{\n\t\tthis.uploadMenu.close();\n\n\t\tBX.Landing.UI.Panel.Image.getInstance()\n\t\t\t.show(\"unsplash\", this.dimensions, this.loader, this.uploadParams)\n\t\t\t.then(this.upload.bind(this))\n\t\t\t.then(this.setValue.bind(this))\n\t\t\t.then(this.hideLoader.bind(this))\n\t\t\t.catch(function (err)\n\t\t\t{\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.hideLoader();\n\t\t\t}.bind(this));\n\t}\n\n\tonGoogleShow()\n\t{\n\t\tthis.uploadMenu.close();\n\n\t\tBX.Landing.UI.Panel.Image.getInstance()\n\t\t\t.show(\"google\", this.dimensions, this.loader, this.uploadParams)\n\t\t\t.then(this.upload.bind(this))\n\t\t\t.then(this.setValue.bind(this))\n\t\t\t.then(this.hideLoader.bind(this))\n\t\t\t.catch(function (err)\n\t\t\t{\n\t\t\t\tBX.Landing.ErrorManager.getInstance().add({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\taction: 'BAD_IMAGE',\n\t\t\t\t\thideSupportLink: true,\n\t\t\t\t});\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.hideLoader();\n\t\t\t}.bind(this));\n\t}\n\n\tonUploadShow()\n\t{\n\t\tthis.uploadMenu.close();\n\t\tthis.fileInput.click();\n\t}\n\n\tonLinkShow()\n\t{\n\t\tthis.uploadMenu.close();\n\t\tthis.showLinkField();\n\t\tthis.linkInput.setValue(\"\");\n\t}\n\n\tonEditClick(event)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.edit({src: this.hiddenImage.src});\n\t}\n\n\tonClearClick(event)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.setValue({src: \"\"});\n\t\tthis.fileInput.value = \"\";\n\t\tthis.showDropzone();\n\t}\n\n\tshowDropzone()\n\t{\n\t\tthis.dropzone.hidden = false;\n\t\tthis.image.hidden = true;\n\t\tthis.altField.layout.hidden = true;\n\t\tthis.linkInput.layout.hidden = true;\n\t}\n\n\tshowPreview()\n\t{\n\t\tthis.dropzone.hidden = true;\n\t\tthis.image.hidden = false;\n\t\tthis.altField.layout.hidden = false;\n\t\tthis.linkInput.layout.hidden = true;\n\t}\n\n\tshowLinkField()\n\t{\n\t\tthis.dropzone.hidden = true;\n\t\tthis.image.hidden = true;\n\t\tthis.altField.layout.hidden = true;\n\t\tthis.linkInput.layout.hidden = false;\n\t}\n\n\tonLinkInput(value)\n\t{\n\t\tvar tmpImage = Dom.create(\"img\");\n\t\ttmpImage.src = value;\n\t\ttmpImage.onload = function ()\n\t\t{\n\t\t\tthis.showPreview();\n\t\t\tthis.setValue({src: value, src2x: value});\n\t\t}.bind(this);\n\t}\n\n\tshowLoader()\n\t{\n\t\tif (this.dropzone && !this.dropzone.hidden)\n\t\t{\n\t\t\tthis.loader.show(this.dropzone);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.loader.show(this.preview);\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.loader.hide();\n\t}\n\n\t/**\n\t * Handles click event on input field\n\t * @param {MouseEvent} event\n\t */\n\tonInputClick(event)\n\t{\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t * @return {boolean}\n\t */\n\tisChanged()\n\t{\n\t\tvar lastValue = BX.Landing.Utils.clone(this.content);\n\t\tvar currentValue = BX.Landing.Utils.clone(this.getValue());\n\n\t\tif (lastValue.url && Type.isString(lastValue.url))\n\t\t{\n\t\t\tlastValue.url = BX.Landing.Utils.decodeDataValue(lastValue.url);\n\t\t}\n\n\t\tif (currentValue.url && Type.isString(currentValue.url))\n\t\t{\n\t\t\tcurrentValue.url = BX.Landing.Utils.decodeDataValue(currentValue.url);\n\t\t}\n\n\t\treturn JSON.stringify(lastValue) !== JSON.stringify(currentValue);\n\t}\n\n\t/**\n\t * Adjusts preview background image size\n\t */\n\tadjustPreviewBackgroundSize()\n\t{\n\t\tvar img = Dom.create(\"img\", {attrs: {src: this.getValue().src}});\n\n\t\timg.onload = function ()\n\t\t{\n\t\t\tvar preview = this.preview.getBoundingClientRect();\n\t\t\tvar position = \"cover\";\n\n\t\t\tif (img.width > preview.width || img.height > preview.height)\n\t\t\t{\n\t\t\t\tposition = \"contain\";\n\t\t\t}\n\n\t\t\tif (img.width < preview.width && img.height < preview.height)\n\t\t\t{\n\t\t\t\tposition = \"auto\";\n\t\t\t}\n\n\t\t\tBX.DOM.write(function ()\n\t\t\t{\n\t\t\t\tthis.preview.style.backgroundSize = position;\n\t\t\t}.bind(this));\n\t\t}.bind(this);\n\t}\n\n\t/**\n\t * @param {object} value\n\t * @param {boolean} [preventEvent = false]\n\t */\n\tsetValue(value, preventEvent)\n\t{\n\t\tif (value.type !== \"icon\")\n\t\t{\n\t\t\tif (!value || !value.src)\n\t\t\t{\n\t\t\t\tthis.input.innerText = \"\";\n\t\t\t\tthis.input2x.innerText = \"\";\n\t\t\t\tthis.preview.removeAttribute(\"style\");\n\t\t\t\tthis.input.dataset.ext = \"\";\n\t\t\t\tthis.showDropzone();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.input.innerText = value.src;\n\t\t\t\tthis.input2x.innerText = value.src2x || '';\n\t\t\t\tthis.preview.style.backgroundImage = \"url(\\\"\" + (value.src2x || value.src) + \"\\\")\";\n\t\t\t\tthis.preview.id = BX.util.getRandomString();\n\t\t\t\tthis.hiddenImage.src = value.src2x || value.src;\n\t\t\t\tthis.showPreview();\n\t\t\t}\n\n\t\t\tthis.image.dataset.fileid = value && value.id ? value.id : -1;\n\t\t\tthis.image.dataset.fileid2x = value && value.id2x ? value.id2x : -1;\n\n\t\t\tthis.classList = [];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.preview.style.backgroundImage = null;\n\t\t\tthis.classList = value.classList;\n\t\t\tthis.icon.innerHTML = \"<span class=\\\"\" + value.classList.join(\" \") + \"\\\"></span>\";\n\t\t\tthis.showPreview();\n\t\t\tthis.type = \"icon\";\n\t\t\tthis.altField.layout.hidden = true;\n\t\t\tthis.altField.setValue(\"\");\n\t\t\tthis.input.innerText = \"\";\n\t\t}\n\n\t\tif (value.url)\n\t\t{\n\t\t\tthis.url.setValue(value.url);\n\t\t}\n\n\t\tthis.adjustPreviewBackgroundSize();\n\t\tthis.adjustEditButtonState();\n\t\tthis.hideLoader();\n\n\t\tthis.onValueChangeHandler(this);\n\t\tBX.fireEvent(this.layout, \"input\");\n\n\t\tvar event = new BX.Event.BaseEvent({\n\t\t\tdata: {value: this.getValue()},\n\t\t\tcompatData: [this.getValue()],\n\t\t});\n\t\tif (!preventEvent)\n\t\t{\n\t\t\tthis.emit('change', event);\n\t\t}\n\t}\n\n\tadjustEditButtonState()\n\t{\n\t\tvar value = this.getValue();\n\t\tif (BX.Type.isStringFilled(value.src))\n\t\t{\n\t\t\tthis.editButton.enable();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.editButton.disable();\n\t\t}\n\t}\n\n\treset()\n\t{\n\t\tthis.setValue({\n\t\t\ttype: this.getValue().type,\n\t\t\tid: -1,\n\t\t\tsrc: \"\",\n\t\t\talt: \"\",\n\t\t});\n\t}\n\n\t/**\n\t * Gets field value\n\t * @return {{src, [alt]: string, [title]: string, [url]: string}}\n\t */\n\tgetValue()\n\t{\n\t\tvar fileId = parseInt(this.image.dataset.fileid);\n\t\tvar fileId2x = parseInt(this.image.dataset.fileid2x);\n\t\tfileId = fileId === fileId ? fileId : -1;\n\t\tfileId2x = fileId2x === fileId2x ? fileId2x : -1;\n\n\t\tvar value = {type: \"\", src: \"\", id: fileId, id2x: fileId2x, src2x: \"\", alt: \"\", url: \"\"};\n\n\t\tif (this.type === \"background\")\n\t\t{\n\t\t\tvalue.type = \"background\";\n\t\t\tvalue.src = this.input.innerText.trim();\n\t\t\tvalue.src2x = this.input2x.innerText.trim();\n\t\t\tvalue.id = fileId;\n\t\t\tvalue.id2x = fileId2x;\n\t\t}\n\n\t\tif (this.type === \"image\")\n\t\t{\n\t\t\tvalue.type = \"image\";\n\t\t\tvalue.src = this.input.innerText.trim();\n\t\t\tvalue.src2x = this.input2x.innerText.trim();\n\t\t\tvalue.id = fileId;\n\t\t\tvalue.id2x = fileId2x;\n\t\t\tvalue.alt = this.altField.getValue();\n\t\t}\n\n\t\tif (this.type === \"icon\")\n\t\t{\n\t\t\tvalue.type = \"icon\";\n\t\t\tvalue.classList = this.classList;\n\t\t}\n\n\t\tvalue.url = Object.assign({}, this.url.getValue(), {enabled: this.urlCheckbox.checked});\n\n\t\treturn value;\n\t}\n\n\tedit(data)\n\t{\n\t\tImageEditor\n\t\t\t.edit({\n\t\t\t\timage: data.src,\n\t\t\t\tdimensions: this.dimensions,\n\t\t\t})\n\t\t\t.then(function (file)\n\t\t\t{\n\t\t\t\treturn this.upload(file, {context: \"imageEditor\"});\n\t\t\t}.bind(this))\n\t\t\t.then(function (result)\n\t\t\t{\n\t\t\t\tthis.setValue(result);\n\t\t\t}.bind(this));\n\n\t\t// Analytics hack\n\t\tvar tmpImage = new Image();\n\t\tvar imageSrc = \"/bitrix/images/landing/close.svg\";\n\n\t\timageSrc = BX.util.add_url_param(imageSrc, {\n\t\t\taction: \"openImageEditor\",\n\t\t});\n\n\t\ttmpImage.src = imageSrc + \"?\" + (+new Date());\n\t}\n\n\t/**\n\t * @param {File|Blob} file\n\t * @param {object} [additionalParams]\n\t */\n\tupload(file, additionalParams)\n\t{\n\t\tif (file.type && (file.type.includes('text') || file.type.includes('html')))\n\t\t{\n\t\t\tBX.Landing.ErrorManager.getInstance().add({\n\t\t\t\ttype: \"error\",\n\t\t\t\taction: \"BAD_IMAGE\",\n\t\t\t});\n\n\t\t\treturn Promise.reject({\n\t\t\t\ttype: \"error\",\n\t\t\t\taction: \"BAD_IMAGE\",\n\t\t\t});\n\t\t}\n\n\t\tthis.showLoader();\n\n\t\tvar checkSize = new Promise(function (resolve)\n\t\t{\n\t\t\tvar sizes = ['1x', '2x'];\n\n\t\t\tif (this.create2xByDefault === false)\n\t\t\t{\n\t\t\t\tvar image = new Image();\n\t\t\t\tvar objectUrl = URL.createObjectURL(file);\n\t\t\t\tvar dimensions = this.dimensions;\n\t\t\t\timage.onload = function ()\n\t\t\t\t{\n\t\t\t\t\tURL.revokeObjectURL(objectUrl);\n\t\t\t\t\tif (\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tthis.width >= dimensions.width\n\t\t\t\t\t\t\t|| this.height >= dimensions.height\n\t\t\t\t\t\t\t|| this.width >= dimensions.maxWidth\n\t\t\t\t\t\t\t|| this.height >= dimensions.maxHeight\n\t\t\t\t\t\t) === false\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tsizes = ['1x'];\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(sizes);\n\t\t\t\t};\n\t\t\t\timage.src = objectUrl;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve(sizes);\n\t\t\t}\n\t\t}.bind(this));\n\n\t\treturn checkSize\n\t\t\t.then(function (allowedSizes)\n\t\t\t{\n\t\t\t\tvar sizes = (function ()\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.create2xByDefault === false\n\t\t\t\t\t\t&& BX.Type.isArrayFilled(allowedSizes)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn allowedSizes;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn ['1x', '2x'];\n\t\t\t\t}.bind(this))();\n\n\t\t\t\treturn this.uploader\n\t\t\t\t\t.setSizes(sizes)\n\t\t\t\t\t.upload(file, additionalParams)\n\t\t\t\t\t.then(function (result)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideLoader();\n\n\t\t\t\t\t\tif (sizes.length === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn result[0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.assign({}, result[0], {\n\t\t\t\t\t\t\tsrc2x: result[1].src,\n\t\t\t\t\t\t\tid2x: result[1].id,\n\t\t\t\t\t\t});\n\t\t\t\t\t}.bind(this));\n\t\t\t}.bind(this));\n\t}\n}"],"names":["Image","data","dimensions","create2xByDefault","uploadParams","onValueChangeHandler","onValueChange","type","content","allowClear","input","innerText","src","hidden","input2x","createInput","src2x","layout","classList","add","compactMode","disableAltField","fileInput","createFileInput","selector","addEventListener","onFileInputChange","bind","linkInput","createLinkInput","onInputHandler","onLinkInput","dropzone","createDropzone","insertBefore","firstElementChild","onDragOver","onDragLeave","onDrop","clearButton","createClearButton","on","onClearClick","preview","createImagePreview","appendChild","style","backgroundImage","trim","onImageDragEnter","loader","BX","Loader","target","icon","createIcon","image","createImageLayout","dataset","fileid","id","fileid2x","id2x","hiddenImage","Dom","create","props","className","Type","isPlainObject","altField","createAltField","setValue","alt","left","createLeftLayout","description","uploadButton","createUploadButton","onUploadClick","editButton","createEditButton","onEditClick","right","createRightLayout","form","createForm","enableTextOnly","window","location","toString","showDropzone","display","sourceClassList","newClassList","IconPanel","getLibraries","then","libraries","forEach","library","categories","category","items","item","isObject","options","join","previousVersion","split","indexOf","push","innerHTML","showPreview","makeAsLinkWrapper","children","url","Landing","UI","Field","Link","text","href","siteId","Main","getInstance","site_id","landingId","contentRoot","urlCheckbox","attrs","onCheckboxChange","checkbox","checked","querySelector","remove","enabled","hrefInput","header","disableLink","getValue","DOM","write","adjustPreviewBackgroundSize","uploader","ImageUploader","additionalParams","context","sizes","adjustEditButtonState","event","preventDefault","stopPropagation","imageHidden","onFileChange","dataTransfer","files","file","showLoader","upload","hideLoader","catch","err","console","error","currentTarget","bindElement","uploadMenu","MenuManager","Date","bindOptions","forceBindPosition","Loc","getMessage","onclick","onUnsplashShow","onGoogleShow","onUploadShow","onLinkShow","events","onPopupClose","destroy","targetContainer","parentNode","popupWindow","popupContainer","toggle","rect","pos","top","bottom","close","Panel","show","ErrorManager","action","hideSupportLink","click","showLinkField","edit","value","tmpImage","onload","hide","lastValue","Utils","clone","currentValue","isString","decodeDataValue","JSON","stringify","img","getBoundingClientRect","position","width","height","backgroundSize","preventEvent","removeAttribute","ext","util","getRandomString","fireEvent","Event","BaseEvent","compatData","emit","isStringFilled","enable","disable","fileId","parseInt","fileId2x","Object","assign","ImageEditor","result","imageSrc","add_url_param","includes","Promise","reject","checkSize","resolve","objectUrl","URL","createObjectURL","revokeObjectURL","maxWidth","maxHeight","allowedSizes","isArrayFilled","setSizes","length","accept","name","field","TextField","placeholder","html","BaseButton","textOnly","method","enctype","submit"],"mappings":"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"}